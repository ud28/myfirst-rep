/*!
 * jQuery MobiScroll v2.5.0
 * http://mobiscroll.com
 *
 * Copyright 2010-2013, Acid Media
 * Licensed under the MIT license.
 *
 */
(function($){function S(o,c1){var m,hi,v,dw,ww,wh,h1,mw,mh,k1,l1,m1=this,ms=$.mobiscroll,e=o,o1=$(e),p1,q1,s=U({},a1),r1={},s1=[],iv={},u1={},v1=o1.is('input'),w1=false;function x1(wh){if($.isArray(s.readonly)){var i=$('.dwwl',dw).index(wh);return s.readonly[i]}return s.readonly}function y1(i){var b='<div class="dw-bf">',l=1,j;for(j in s1[i]){if(l%20==0){b+='</div><div class="dw-bf">'}b+='<div class="dw-li dw-v" data-val="'+j+'" style="height:'+hi+'px;line-height:'+hi+'px;"><div class="dw-i">'+s1[i][j]+'</div></div>';l++}b+='</div>';return b}function z1(t){B=$('.dw-li',t).index($('.dw-v',t).eq(0));C=$('.dw-li',t).index($('.dw-v',t).eq(-1));J=$('.dw-ul',dw).index(t);h=hi;D=m1}function A1(v){var t=s.headerText;return t?(typeof(t)=='function'?t.call(e,v):t.replace(/\{value\}/i,v)):''}function B1(){m1.temp=((v1&&m1.val!==null&&m1.val!=o1.val())||m1.values===null)?s.parseValue(o1.val()||'',m1):m1.values.slice(0);m1.setValue(true)}function C1(b,J,c,d,j){if(F1('validate',[dw,J,b])!==false){$('.dw-ul',dw).each(function(i){var t=$(this),k=$('.dw-li[data-val="'+m1.temp[i]+'"]',t),p=$('.dw-li',t),v=p.index(k),l=p.length,w=i==J||J===undefined;if(!k.hasClass('dw-v')){var d1=k,e1=k,f1=0,g1=0;while(v-f1>=0&&!d1.hasClass('dw-v')){f1++;d1=p.eq(v-f1)}while(v+g1<l&&!e1.hasClass('dw-v')){g1++;e1=p.eq(v+g1)}if(((g1<f1&&g1&&d!==2)||!f1||(v-f1<0)||d==1)&&e1.hasClass('dw-v')){k=e1;v=v+g1}else{k=d1;v=v-f1}}if(!(k.hasClass('dw-sel'))||w){m1.temp[i]=k.attr('data-val');$('.dw-sel',t).removeClass('dw-sel');k.addClass('dw-sel');m1.scroll(t,i,v,w?b:0.1,w?j:undefined)}});m1.change(c)}}function D1(c){if(s.display=='inline'||(ww===$(window).width()&&h1===$(window).height()&&c)){return}var w,l,t,b,i,j,k,p,d1,e1,f1,g1,i1=0,j1=0,st=$(window).scrollTop(),wr=$('.dwwr',dw),d=$('.dw',dw),n1={},t1=s.anchor===undefined?o1:s.anchor;ww=$(window).width();h1=$(window).height();wh=window.innerHeight;wh=wh||h1;if(/modal|bubble/.test(s.display)){$('.dwc',dw).each(function(){w=$(this).outerWidth(true);i1+=w;j1=(w>j1)?w:j1});w=i1>ww?j1:i1;wr.width(w)}mw=d.outerWidth();mh=d.outerHeight(true);if(s.display=='modal'){l=(ww-mw)/2;t=st+(wh-mh)/2}else if(s.display=='bubble'){g1=true;d1=$('.dw-arrw-i',dw);j=t1.offset();k=j.top;p=j.left;b=t1.outerWidth();i=t1.outerHeight();l=p-(d.outerWidth(true)-b)/2;l=l>(ww-mw)?(ww-(mw+20)):l;l=l>=0?l:20;t=k-mh;if((t<st)||(k>st+wh)){d.removeClass('dw-bubble-top').addClass('dw-bubble-bottom');t=k+i}else{d.removeClass('dw-bubble-bottom').addClass('dw-bubble-top')}e1=d1.outerWidth();f1=p+b/2-(l+(mw-e1)/2);$('.dw-arr',dw).css({left:f1>e1?e1:f1})}else{n1.width='100%';if(s.display=='top'){t=st}else if(s.display=='bottom'){t=st+wh-mh}}n1.top=t<0?0:t;n1.left=l;d.css(n1);$('.dw-persp',dw).height(0).height(t+mh>$(document).height()?t+mh:$(document).height());if(g1&&((t+mh>st+wh)||(k>st+wh))){$(window).scrollTop(t+mh-wh)}}function E1(e){if(e.type==='touchstart'){W=true;setTimeout(function(){W=false},500)}else if(W){W=false;return false}return true}function F1(b,c){var d;c.push(m1);$.each([r1,c1],function(i,v){if(v[b]){d=v[b].apply(e,c)}});return d}function G1(t){var p=+t.data('pos'),b=p+1;u(t,b>C?B:b,1,true)}function H1(t){var p=+t.data('pos'),b=p-1;u(t,b<B?C:b,2,true)}m1.enable=function(){s.disabled=false;if(v1){o1.prop('disabled',false)}};m1.disable=function(){s.disabled=true;if(v1){o1.prop('disabled',true)}};m1.scroll=function(t,J,j,k,l){function p(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b}function w(){clearInterval(iv[J]);delete iv[J];t.data('pos',j).closest('.dwwl').removeClass('dwa')}var px=(m-j)*hi,i;if(px==u1[J]&&iv[J]){return}u1[J]=px;t.attr('style',(T+'-transition:all '+(k?k.toFixed(3):0)+'s ease-out;')+(R?(T+'-transform:translate3d(0,'+px+'px,0);'):('top:'+px+'px;')));if(iv[J]){w()}if(k&&l!==undefined){i=0;t.closest('.dwwl').addClass('dwa');iv[J]=setInterval(function(){i+=0.1;t.data('pos',Math.round(p(i,l,j-l,k)));if(i>=k){w()}},100)}else{t.data('pos',j)}};m1.setValue=function(b,c,t,d){if(!$.isArray(m1.temp)){m1.temp=s.parseValue(m1.temp+'',m1)}if(w1&&b){C1(t)}v=s.formatResult(m1.temp);if(!d){m1.values=m1.temp.slice(0);m1.val=v}if(c){if(v1){o1.val(v).trigger('change')}}};m1.getValues=function(){var b=[],i;for(i in m1._selectedValues){b.push(m1._selectedValues[i])}return b};m1.validate=function(i,d,t,b){C1(t,i,true,d,b)};m1.change=function(b){v=s.formatResult(m1.temp);if(s.display=='inline'){m1.setValue(false,b)}else{$('.dwv',dw).html(A1(v))}if(b){F1('onChange',[v])}};m1.changeWheel=function(b,t){if(dw){var i=0,j,k,c=b.length;for(j in s.wheels){for(k in s.wheels[j]){if($.inArray(i,b)>-1){s1[i]=s.wheels[j][k];$('.dw-ul',dw).eq(i).html(y1(i));c--;if(!c){D1();C1(t,undefined,true);return}}i++}}}};m1.isVisible=function(){return w1};m1.tap=function(b,c){var d,i;if(s.tap){b.bind('touchstart',function(e){e.preventDefault();d=n(e,'X');i=n(e,'Y')}).bind('touchend',function(e){if(Math.abs(n(e,'X')-d)<20&&Math.abs(n(e,'Y')-i)<20){c.call(this,e)}V=true;setTimeout(function(){V=false},300)})}b.bind('click',function(e){if(!V){c.call(this,e)}})};m1.show=function(b){if(s.disabled||w1){return false}if(s.display=='top'){k1='slidedown'}if(s.display=='bottom'){k1='slideup'}B1();F1('onBeforeShow',[dw]);var l=0,i,c,d='';if(k1&&!b){d='dw-'+k1+' dw-in'}var j='<div class="dw-trans '+s.theme+' dw-'+s.display+'">'+(s.display=='inline'?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp">'+'<div class="dwo"></div><div class="dw dwbg '+d+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(s.headerText?'<div class="dwv"></div>':''));for(i=0;i<s.wheels.length;i++){j+='<div class="dwc'+(s.mode!='scroller'?' dwpm':' dwsc')+(s.showLabel?'':' dwhl')+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(c in s.wheels[i]){s1[l]=s.wheels[i][c];j+='<td><div class="dwwl dwrc dwwl'+l+'">'+(s.mode!='scroller'?'<div class="dwwb dwwbp" style="height:'+hi+'px;line-height:'+hi+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+hi+'px;line-height:'+hi+'px;"><span>&ndash;</span></div>':'')+'<div class="dwl">'+c+'</div><div class="dww" style="height:'+(s.rows*hi)+'px;min-width:'+s.width+'px;"><div class="dw-ul">';j+=y1(l);j+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';l++}j+='</tr></table></div></div>'}j+=(s.display!='inline'?'<div class="dwbc'+(s.button3?' dwbc-p':'')+'"><span class="dwbw dwb-s"><span class="dwb">'+s.setText+'</span></span>'+(s.button3?'<span class="dwbw dwb-n"><span class="dwb">'+s.button3Text+'</span></span>':'')+'<span class="dwbw dwb-c"><span class="dwb">'+s.cancelText+'</span></span></div></div>':'<div class="dwcc"></div>')+'</div></div></div>';dw=$(j);C1();F1('onMarkupReady',[dw]);if(s.display!='inline'){dw.appendTo('body');setTimeout(function(){dw.removeClass('dw-trans').find('.dw').removeClass(d)},350)}else if(o1.is('div')){o1.html(dw)}else{dw.insertAfter(o1)}w1=true;p1.init(dw,m1);if(s.display!='inline'){m1.tap($('.dwb-s span',dw),function(){if(m1.hide(false,'set')!==false){m1.setValue(false,true);F1('onSelect',[m1.val])}});m1.tap($('.dwb-c span',dw),function(){m1.cancel()});if(s.button3){m1.tap($('.dwb-n span',dw),s.button3)}if(s.scrollLock){dw.bind('touchmove',function(e){if(mh<=wh&&mw<=ww){e.preventDefault()}})}$('input,select,button').each(function(){if(!$(this).prop('disabled')){$(this).addClass('dwtd').prop('disabled',true)}});D1();$(window).bind('resize.dw',function(){clearTimeout(l1);l1=setTimeout(function(){D1(true)},100)})}dw.delegate('.dwwl','DOMMouseScroll mousewheel',function(e){if(!x1(this)){e.preventDefault();e=e.originalEvent;var k=e.wheelDelta?(e.wheelDelta/120):(e.detail?(-e.detail/3):0),t=$('.dw-ul',this),p=+t.data('pos'),w=Math.round(p-k);z1(t);u(t,w,k<0?1:2)}}).delegate('.dwb, .dwwb',X,function(e){$(this).addClass('dwb-a')}).delegate('.dwwb',X,function(e){e.stopPropagation();e.preventDefault();var w=$(this).closest('.dwwl');if(E1(e)&&!x1(w)&&!w.hasClass('dwa')){H=true;var t=w.find('.dw-ul'),k=$(this).hasClass('dwwbp')?G1:H1;z1(t);clearInterval(z);z=setInterval(function(){k(t)},s.delay);k(t)}}).delegate('.dwwl',X,function(e){e.preventDefault();if(E1(e)&&!G&&!x1(this)&&!H){G=true;$(document).bind(Y,_);I=$('.dw-ul',this);P=s.mode!='clickpick',N=+I.data('pos');z1(I);O=iv[J]!==undefined;K=n(e,'Y');M=new Date();L=K;m1.scroll(I,J,N,0.001);if(P){I.closest('.dwwl').addClass('dwa')}}});F1('onShow',[dw,v])};m1.hide=function(p,b){if(F1('onClose',[v,b])===false){return false}$('.dwtd').prop('disabled',false).removeClass('dwtd');o1.blur();if(dw){if(s.display!='inline'&&k1&&!p){dw.addClass('dw-trans').find('.dw').addClass('dw-'+k1+' dw-out');setTimeout(function(){dw.remove();dw=null},350)}else{dw.remove();dw=null}w1=false;u1={};$(window).unbind('.dw')}};m1.cancel=function(){if(m1.hide(false,'cancel')!==false){F1('onCancel',[m1.val])}};m1.init=function(b){p1=U({defaults:{},init:A},ms.themes[b.theme||s.theme]);q1=ms.i18n[b.lang||s.lang];U(c1,b);U(s,p1.defaults,q1,c1);m1.settings=s;o1.unbind('.dw');var p=ms.presets[s.preset];if(p){r1=p.call(e,m1);U(s,r1,c1);U(b1,r1.methods)}m=Math.floor(s.rows/2);hi=s.height;k1=s.animate;if(o1.data('dwro')!==undefined){e.readOnly=q(o1.data('dwro'))}if(w1){m1.hide()}if(s.display=='inline'){m1.show()}else{B1();if(v1&&s.showOnFocus){o1.data('dwro',e.readOnly);e.readOnly=true;o1.bind('focus.dw',function(){m1.show()})}}};m1.trigger=function(b,p){return F1(b,p)};m1.values=null;m1.val=null;m1.temp=null;m1._selectedValues={};m1.init(c1)}function a(p){var i;for(i in p){if(Q[p[i]]!==undefined){return true}}return false}function f(){var b=['Webkit','Moz','O','ms'],p;for(p in b){if(a([b[p]+'Transform'])){return'-'+b[p].toLowerCase()}}return''}function g(e){return y[e.id]}function n(e,c){var o=e.originalEvent,b=e.changedTouches;return b||(o&&o.changedTouches)?(o?o.changedTouches[0]['page'+c]:b[0]['page'+c]):e['page'+c]}function q(v){return(v===true||v=='true')}function r(v,B,C){v=v>C?C:v;v=v<B?B:v;return v}function u(t,v,d,b,c){v=r(v,B,C);var e=$('.dw-li',t).eq(v),o=c===undefined?v:c,i=J,j=b?(v==o?0.1:Math.abs((v-o)*0.1)):0;D.temp[i]=e.attr('data-val');D.scroll(t,i,v,j,c);setTimeout(function(){D.validate(i,d,j,c)},10)}function x(t,m,b){if(b1[m]){return b1[m].apply(t,Array.prototype.slice.call(b,1))}if(typeof m==='object'){return b1.init.call(t,m)}return t}var y={},z,A=function(){},h,B,C,D,E=new Date(),F=E.getTime(),G,H,I,J,K,L,M,N,O,P,Q=document.createElement('modernizr').style,R=a(['perspectiveProperty','WebkitPerspective','MozPerspective','OPerspective','msPerspective']),T=f(),U=$.extend,V,W,X='touchstart mousedown',Y='touchmove mousemove',Z='touchend mouseup',_=function(e){if(P){e.preventDefault();L=n(e,'Y');D.scroll(I,J,r(N+(K-L)/h,B-1,C+1))}O=true},a1={width:70,height:40,rows:3,delay:300,disabled:false,readonly:false,showOnFocus:true,showLabel:true,wheels:[],theme:'',headerText:'{value}',display:'modal',mode:'scroller',preset:'',lang:'en-US',setText:'Set',cancelText:'Cancel',scrollLock:true,tap:true,formatResult:function(d){return d.join(' ')},parseValue:function(b,D){var w=D.settings.wheels,c=b.split(' '),d=[],j=0,i,l,v;for(i=0;i<w.length;i++){for(l in w[i]){if(w[i][l][c[j]]!==undefined){d.push(c[j])}else{for(v in w[i][l]){d.push(v);break}}j++}}return d}},b1={init:function(o){if(o===undefined){o={}}return this.each(function(){if(!this.id){F+=1;this.id='scoller'+F}y[this.id]=new S(this,o)})},enable:function(){return this.each(function(){var D=g(this);if(D){D.enable()}})},disable:function(){return this.each(function(){var D=g(this);if(D){D.disable()}})},isDisabled:function(){var D=g(this[0]);if(D){return D.settings.disabled}},isVisible:function(){var D=g(this[0]);if(D){return D.isVisible()}},option:function(o,v){return this.each(function(){var D=g(this);if(D){var b={};if(typeof o==='object'){b=o}else{b[o]=v}D.init(b)}})},setValue:function(d,b,t,c){return this.each(function(){var D=g(this);if(D){D.temp=d;D.setValue(true,b,t,c)}})},getInst:function(){return g(this[0])},getValue:function(){var D=g(this[0]);if(D){return D.values}},getValues:function(){var D=g(this[0]);if(D){return D.getValues()}},show:function(){var D=g(this[0]);if(D){return D.show()}},hide:function(){return this.each(function(){var D=g(this);if(D){D.hide()}})},destroy:function(){return this.each(function(){var D=g(this);if(D){D.hide();$(this).unbind('.dw');delete y[this.id];if($(this).is('input')){this.readOnly=q($(this).data('dwro'))}}})}};$(document).bind(Z,function(e){if(G){var t=new Date()-M,v=r(N+(K-L)/h,B-1,C+1),s,d,b,c=I.offset().top;if(t<300){s=(L-K)/t;d=(s*s)/(2*0.0006);if(L-K<0){d=-d}}else{d=L-K}b=Math.round(N-d/h);if(!d&&!O){var i=Math.floor((L-c)/h),l=$('.dw-li',I).eq(i),j=P;if(D.trigger('onValueTap',[l])!==false){b=i}else{j=true}if(j){l.addClass('dw-hl');setTimeout(function(){l.removeClass('dw-hl')},200)}}if(P){u(I,b,0,true,Math.round(v))}G=false;I=null;$(document).unbind(Y,_)}if(H){clearInterval(z);H=false}$('.dwb-a').removeClass('dwb-a')}).bind('mouseover mouseup mousedown click',function(e){if(V){e.stopPropagation();e.preventDefault();return false}});$.fn.mobiscroll=function(m){U(this,$.mobiscroll.shorts);return x(this,m,arguments)};$.mobiscroll=$.mobiscroll||{setDefaults:function(o){U(a1,o)},presetShort:function(b){this.shorts[b]=function(m){return x(this,U(m,{preset:b}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}};$.scroller=$.scroller||$.mobiscroll;$.fn.scroller=$.fn.scroller||$.fn.mobiscroll})(jQuery);
