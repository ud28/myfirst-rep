/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
tinymce.dom={};(function(n,a){var w=!!document.addEventListener;function b(t,d,e,g){if(t.addEventListener){t.addEventListener(d,e,g||false)}else if(t.attachEvent){t.attachEvent('on'+d,e)}}function r(t,d,e,g){if(t.removeEventListener){t.removeEventListener(d,e,g||false)}else if(t.detachEvent){t.detachEvent('on'+d,e)}}function f(o,d){var e,g=d||{};function h(){return false}function i(){return true}for(e in o){if(e!=="layerX"&&e!=="layerY"){g[e]=o[e]}}if(!g.target){g.target=g.srcElement||document}g.preventDefault=function(){g.isDefaultPrevented=i;if(o){if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}}};g.stopPropagation=function(){g.isPropagationStopped=i;if(o){if(o.stopPropagation){o.stopPropagation()}else{o.cancelBubble=true}}};g.stopImmediatePropagation=function(){g.isImmediatePropagationStopped=i;g.stopPropagation()};if(!g.isDefaultPrevented){g.isDefaultPrevented=h;g.isPropagationStopped=h;g.isImmediatePropagationStopped=h}return g}function c(d,e,g){var h=d.document,i={type:'ready'};function j(){if(!g.domLoaded){g.domLoaded=true;e(i)}}if(h.readyState=="complete"){j();return}if(w){b(d,'DOMContentLoaded',j)}else{b(h,"readystatechange",function(){if(h.readyState==="complete"){r(h,"readystatechange",arguments.callee);j()}});if(h.documentElement.doScroll&&d===d.top){(function(){try{
// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.
h.documentElement.doScroll("left")}catch(k){setTimeout(arguments.callee,0);return}j()})()}}b(d,'load',j)}function E(p){var s=this,d={},g,h,j,k,m;k="onmouseenter"in document.documentElement;j="onfocusin"in document.documentElement;m={mouseenter:'mouseover',mouseleave:'mouseout'};g=1;s.domLoaded=false;s.events=d;function o(e,q){var t,i,l,u;t=d[q][e.type];if(t){for(i=0,l=t.length;i<l;i++){u=t[i];if(u&&u.func.call(u.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}}s.bind=function(t,e,l,q){var u,v,i,x,y,z,A,B=window;function C(D){o(f(D||B.event),u)}if(!t||t.nodeType===3||t.nodeType===8){return}if(!t[a]){u=g++;t[a]=u;d[u]={}}else{u=t[a];if(!d[u]){d[u]={}}}q=q||t;e=e.split(' ');i=e.length;while(i--){x=e[i];z=C;y=A=false;if(x==="DOMContentLoaded"){x="ready"}if((s.domLoaded||t.readyState=='complete')&&x==="ready"){s.domLoaded=true;l.call(q,f({type:x}));continue}if(!k){y=m[x];if(y){z=function(D){var F,G;F=D.currentTarget;G=D.relatedTarget;if(G&&F.contains){G=F.contains(G)}else{while(G&&G!==F){G=G.parentNode}}if(!G){D=f(D||B.event);D.type=D.type==='mouseout'?'mouseleave':'mouseenter';D.target=F;o(D,u)}}}}if(!j&&(x==="focusin"||x==="focusout")){A=true;y=x==="focusin"?"focus":"blur";z=function(D){D=f(D||B.event);D.type=D.type==='focus'?'focusin':'focusout';o(D,u)}}v=d[u][x];if(!v){d[u][x]=v=[{func:l,scope:q}];v.fakeName=y;v.capture=A;v.nativeHandler=z;if(!w){v.proxyHandler=p(u)}if(x==="ready"){c(t,z,s)}else{b(t,y||x,w?z:v.proxyHandler,A)}}else{v.push({func:l,scope:q})}}t=v=0;return l};s.unbind=function(t,e,l){var q,u,i,v,x,y;if(!t||t.nodeType===3||t.nodeType===8){return s}q=t[a];if(q){y=d[q];if(e){e=e.split(' ');i=e.length;while(i--){x=e[i];u=y[x];if(u){if(l){v=u.length;while(v--){if(u[v].func===l){u.splice(v,1)}}}if(!l||u.length===0){delete y[x];r(t,u.fakeName||x,w?u.nativeHandler:u.proxyHandler,u.capture)}}}}else{for(x in y){u=y[x];r(t,u.fakeName||x,w?u.nativeHandler:u.proxyHandler,u.capture)}y={}}for(x in y){return s}delete d[q];try{delete t[a]}catch(z){t[a]=null}}return s};s.fire=function(t,e,i){var l,q;if(!t||t.nodeType===3||t.nodeType===8){return s}q=f(null,i);q.type=e;do{l=t[a];if(l){o(q,l)}t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!q.isPropagationStopped());return s};s.clean=function(t){var i,e,u=s.unbind;if(!t||t.nodeType===3||t.nodeType===8){return s}if(t[a]){u(t)}if(!t.getElementsByTagName){t=t.document}if(t&&t.getElementsByTagName){u(t);e=t.getElementsByTagName('*');i=e.length;while(i--){t=e[i];if(t[a]){u(t)}}}return s};s.callNativeHandler=function(i,e){if(d){d[i][e.type].nativeHandler(e)}};s.destory=function(){d={}};s.add=function(t,d,e,l){if(typeof(t)==="string"){t=document.getElementById(t)}if(t&&t instanceof Array){var i=t.length;while(i--){s.add(t[i],d,e,l)}return}if(d==="init"){d="ready"}return s.bind(t,d instanceof Array?d.join(' '):d,e,l)};s.remove=function(t,d,e,l){if(!t){return s}if(typeof(t)==="string"){t=document.getElementById(t)}if(t instanceof Array){var i=t.length;while(i--){s.remove(t[i],d,e,l)}return s}return s.unbind(t,d instanceof Array?d.join(' '):d,e)};s.clear=function(t){if(typeof(t)==="string"){t=document.getElementById(t)}return s.clean(t)};s.cancel=function(e){if(e){s.prevent(e);s.stop(e)}return false};s.prevent=function(e){if(!e.preventDefault){e=f(e)}e.preventDefault();return false};s.stop=function(e){if(!e.stopPropagation){e=f(e)}e.stopPropagation();return false}}n.EventUtils=E;n.Event=new E(function(i){return function(e){tinymce.dom.Event.callNativeHandler(i,e)}});n.Event.bind(window,'ready',function(){});n=0})(tinymce.dom,'data-mce-expando');
