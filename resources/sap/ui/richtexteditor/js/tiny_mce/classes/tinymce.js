/**
 * tinymce.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
(function(b){var e=/^\s*|\s*$/g,g,h='B'.replace(/A(.)|B/,'$1')==='$1';var j={majorVersion:'@@tinymce_major_version@@',minorVersion:'@@tinymce_minor_version@@',releaseDate:'@@tinymce_release_date@@',_init:function(){var t=this,d=document,a=navigator,u=a.userAgent,i,c,n,f,p,v;t.isOpera=b.opera&&opera.buildNumber;t.isWebKit=/WebKit/.test(u);t.isIE=!t.isWebKit&&!t.isOpera&&(/MSIE/gi).test(u)&&(/Explorer/gi).test(a.appName);t.isIE6=t.isIE&&/MSIE [56]/.test(u);t.isIE7=t.isIE&&/MSIE [7]/.test(u);t.isIE8=t.isIE&&/MSIE [8]/.test(u);t.isIE9=t.isIE&&/MSIE [9]/.test(u);t.isGecko=!t.isWebKit&&/Gecko/.test(u);t.isMac=u.indexOf('Mac')!=-1;t.isAir=/adobeair/i.test(u);t.isIDevice=/(iPad|iPhone)/.test(u);t.isIOS5=t.isIDevice&&u.match(/AppleWebKit\/(\d*)/)[1]>=534;if(b.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix;t.baseURL=tinyMCEPreInit.base;t.query=tinyMCEPreInit.query;return}t.suffix='';c=d.getElementsByTagName('base');for(i=0;i<c.length;i++){v=c[i].href;if(v){if(/^https?:\/\/[^\/]+$/.test(v))v+='/';f=v?v.match(/.*\//)[0]:''}}function k(n){if(n.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(n.src)){if(/_(src|dev)\.js/g.test(n.src))t.suffix='_src';if((p=n.src.indexOf('?'))!=-1)t.query=n.src.substring(p+1);t.baseURL=n.src.substring(0,n.src.lastIndexOf('/'));if(f&&t.baseURL.indexOf('://')==-1&&t.baseURL.indexOf('/')!==0)t.baseURL=f+t.baseURL;return t.baseURL}return null};c=d.getElementsByTagName('script');for(i=0;i<c.length;i++){if(k(c[i]))return}n=d.getElementsByTagName('head')[0];if(n){c=n.getElementsByTagName('script');for(i=0;i<c.length;i++){if(k(c[i]))return}}return},is:function(o,t){if(!t)return o!==g;if(t=='array'&&j.isArray(o))return true;return typeof(o)==t},isArray:Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},makeMap:function(a,d,m){var i;a=a||[];d=d||',';if(typeof(a)=="string")a=a.split(d);m=m||{};i=a.length;while(i--)m[a[i]]={};return m},each:function(o,c,s){var n,l;if(!o)return 0;s=s||o;if(o.length!==g){for(n=0,l=o.length;n<l;n++){if(c.call(s,o[n],n,o)===false)return 0}}else{for(n in o){if(o.hasOwnProperty(n)){if(c.call(s,o[n],n,o)===false)return 0}}}return 1},map:function(a,f){var o=[];j.each(a,function(v){o.push(f(v))});return o},grep:function(a,f){var o=[];j.each(a,function(v){if(!f||f(v))o.push(v)});return o},inArray:function(a,v){var i,l;if(a){for(i=0,l=a.length;i<l;i++){if(a[i]===v)return i}}return-1},extend:function(o,a){var i,l,n,c=arguments,v;for(i=1,l=c.length;i<l;i++){a=c[i];for(n in a){if(a.hasOwnProperty(n)){v=a[n];if(v!==g){o[n]=v}}}}return o},trim:function(s){return(s?''+s:'').replace(e,'')},create:function(s,p,r){var t=this,a,d,i,k,c,l=0;s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s);i=s[3].match(/(^|\.)(\w+)$/i)[2];d=t.createNS(s[3].replace(/\.\w+$/,''),r);if(d[i])return;if(s[2]=='static'){d[i]=p;if(this.onCreate)this.onCreate(s[2],s[3],d[i]);return}if(!p[i]){p[i]=function(){};l=1}d[i]=p[i];t.extend(d[i].prototype,p);if(s[5]){a=t.resolve(s[5]).prototype;k=s[5].match(/\.(\w+)$/i)[1];c=d[i];if(l){d[i]=function(){return a[k].apply(this,arguments)}}else{d[i]=function(){this.parent=a[k];return c.apply(this,arguments)}}d[i].prototype[i]=d[i];t.each(a,function(f,n){d[i].prototype[n]=a[n]});t.each(p,function(f,n){if(a[n]){d[i].prototype[n]=function(){this.parent=a[n];return f.apply(this,arguments)}}else{if(n!=i)d[i].prototype[n]=f}})}t.each(p['static'],function(f,n){d[i][n]=f});if(this.onCreate)this.onCreate(s[2],s[3],d[i].prototype)},walk:function(o,f,n,s){s=s||this;if(o){if(n)o=o[n];j.each(o,function(o,i){if(f.call(s,o,i,n)===false)return false;j.walk(o,f,n,s)})}},createNS:function(n,o){var i,v;o=o||b;n=n.split('.');for(i=0;i<n.length;i++){v=n[i];if(!o[v])o[v]={};o=o[v]}return o},resolve:function(n,o){var i,l;o=o||b;n=n.split('.');for(i=0,l=n.length;i<l;i++){o=o[n[i]];if(!o)break}return o},addUnload:function(f,s){var t=this,u;u=function(){var l=t.unloads,o,n;if(l){for(n in l){o=l[n];if(o&&o.func)o.func.call(o.scope,1)}if(b.detachEvent){b.detachEvent('onbeforeunload',a);b.detachEvent('onunload',u)}else if(b.removeEventListener)b.removeEventListener('unload',u,false);t.unloads=o=l=w=u=0;if(b.CollectGarbage)CollectGarbage()}};function a(){var d=document;function c(){d.detachEvent('onstop',c);if(u)u();d=0};if(d.readyState=='interactive'){if(d)d.attachEvent('onstop',c);b.setTimeout(function(){if(d)d.detachEvent('onstop',c)},0)}};f={func:f,scope:s||this};if(!t.unloads){if(b.attachEvent){b.attachEvent('onunload',u);b.attachEvent('onbeforeunload',a)}else if(b.addEventListener)b.addEventListener('unload',u,false);t.unloads=[f]}else t.unloads.push(f);return f},removeUnload:function(f){var u=this.unloads,r=null;j.each(u,function(o,i){if(o&&o.func==f){u.splice(i,1);r=f;return false}});return r},explode:function(s,d){if(!s||j.is(s,'array')){return s}return j.map(s.split(d||','),j.trim)},_addVer:function(u){var v;if(!this.query)return u;v=(u.indexOf('?')==-1?'?':'&')+this.query;if(u.indexOf('#')==-1)return u+v;return u.replace('#',v+'#')},_replace:function(f,r,s){if(h){return s.replace(f,function(){var v=r,a=arguments,i;for(i=0;i<a.length-2;i++){if(a[i]===g){v=v.replace(new RegExp('\\$'+i,'g'),'')}else{v=v.replace(new RegExp('\\$'+i,'g'),a[i])}}return v})}return s.replace(f,r)}};j._init();b.tinymce=b.tinyMCE=j})(window);
