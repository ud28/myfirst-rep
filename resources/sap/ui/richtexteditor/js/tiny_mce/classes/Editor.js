/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
(function(d){var D=d.DOM,E=d.dom.Event,g=d.extend,j=d.each,k=d.isGecko,l=d.isIE,m=d.isWebKit,q=d.is,T=d.ThemeManager,P=d.PluginManager,r=d.explode;d.create('tinymce.Editor',{Editor:function(i,s){var a=this,b=true;a.settings=s=g({id:i,language:'en',theme:'advanced',skin:'default',delta_width:0,delta_height:0,popup_css:'',plugins:'',document_base_url:d.documentBaseURL,add_form_submit_trigger:b,submit_patch:b,add_unload_trigger:b,convert_urls:b,relative_urls:b,remove_script_host:b,table_inline_editing:false,object_resizing:b,accessibility_focus:b,doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':'<!DOCTYPE>',visual:b,font_size_style_values:'xx-small,x-small,small,medium,large,x-large,xx-large',font_size_legacy_values:'xx-small,small,medium,large,x-large,xx-large,300%',apply_source_formatting:b,directionality:'ltr',forced_root_block:'p',hidden_input:b,padd_empty_editor:b,render_ui:b,indentation:'30px',fix_table_elements:b,inline_styles:b,convert_fonts_to_spans:b,indent:'simple',indent_before:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',indent_after:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',validate:b,entity_encoding:'named',url_converter:a.convertURL,url_converter_scope:a,ie7_compat:b},s);a.id=a.editorId=i;a.isNotDirty=false;a.plugins={};a.documentBaseURI=new d.util.URI(s.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});a.baseURI=d.baseURI;a.contentCSS=[];a.contentStyles=[];a.setupEvents();a.execCommands={};a.queryStateCommands={};a.queryValueCommands={};a.execCallback('setup',a)},render:function(a){var t=this,s=t.settings,i=t.id,b=d.ScriptLoader;if(!E.domLoaded){E.add(window,'ready',function(){t.render()});return}tinyMCE.settings=s;if(!t.getElement())return;if(d.isIDevice&&!d.isIOS5)return;if(!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&s.hidden_input&&D.getParent(i,'form'))D.insertAfter(D.create('input',{type:'hidden',name:i}),i);if(!s.content_editable){t.orgVisibility=t.getElement().style.visibility;t.getElement().style.visibility='hidden'}if(d.WindowManager)t.windowManager=new d.WindowManager(t);if(s.encoding=='xml'){t.onGetContent.add(function(e,o){if(o.save)o.content=D.encode(o.content)})}if(s.add_form_submit_trigger){t.onSubmit.addToTop(function(){if(t.initialized){t.save();t.isNotDirty=1}})}if(s.add_unload_trigger){t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(t.initialized&&!t.destroyed&&!t.isHidden())t.save({format:'raw',no_events:true})})}d.addUnload(t.destroy,t);if(s.submit_patch){t.onBeforeRenderUI.add(function(){var n=t.getElement().form;if(!n)return;if(n._mceOldSubmit)return;if(!n.submit.nodeType&&!n.submit.length){t.formElement=n;n._mceOldSubmit=n.submit;n.submit=function(){d.triggerSave();t.isNotDirty=1;return t.formElement._mceOldSubmit(t.formElement)}}n=null})}function c(){if(s.language&&s.language_load!==false)b.add(d.baseURL+'/langs/'+s.language+'.js');if(s.theme&&typeof s.theme!="function"&&s.theme.charAt(0)!='-'&&!T.urls[s.theme])T.load(s.theme,'themes/'+s.theme+'/editor_template'+d.suffix+'.js');j(r(s.plugins),function(p){if(p&&!P.urls[p]){if(p.charAt(0)=='-'){p=p.substr(1,p.length);var e=P.dependencies(p);j(e,function(f){var h={prefix:'plugins/',resource:f,suffix:'/editor_plugin'+d.suffix+'.js'};f=P.createUrl(h,f);P.load(f.resource,f)})}else{if(p=='safari'){return}P.load(p,{prefix:'plugins/',resource:p,suffix:'/editor_plugin'+d.suffix+'.js'})}}});b.loadQueue(function(){if(!t.removed)t.init()})};c()},init:function(){var n,t=this,s=t.settings,w,h,a,e=t.getElement(),o,b,u,f,v,x,i,y=[];d.add(t);s.aria_label=s.aria_label||D.getAttrib(e,'aria-label',t.getLang('aria.rich_text_area'));if(s.theme){if(typeof s.theme!="function"){s.theme=s.theme.replace(/-/,'');o=T.get(s.theme);t.theme=new o();if(t.theme.init)t.theme.init(t,T.urls[s.theme]||d.documentBaseURL.replace(/\/$/,''))}else{t.theme=s.theme}}function z(p){var c=P.get(p),u=P.urls[p]||d.documentBaseURL.replace(/\/$/,''),A;if(c&&d.inArray(y,p)===-1){j(P.dependencies(p),function(B){z(B)});A=new c(t,u);t.plugins[p]=A;if(A.init){A.init(t,u);y.push(p)}}}j(r(s.plugins.replace(/\-/g,'')),z);if(s.popup_css!==false){if(s.popup_css)s.popup_css=t.documentBaseURI.toAbsolute(s.popup_css);else s.popup_css=t.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")}if(s.popup_css_add)s.popup_css+=','+t.documentBaseURI.toAbsolute(s.popup_css_add);t.controlManager=new d.ControlManager(t);t.onBeforeRenderUI.dispatch(t,t.controlManager);if(s.render_ui&&t.theme){t.orgDisplay=e.style.display;if(typeof s.theme!="function"){w=s.width||e.style.width||e.offsetWidth;h=s.height||e.style.height||e.offsetHeight;a=s.min_height||100;x=/^[0-9\.]+(|px)$/i;if(x.test(''+w))w=Math.max(parseInt(w,10)+(o.deltaWidth||0),100);if(x.test(''+h))h=Math.max(parseInt(h,10)+(o.deltaHeight||0),a);o=t.theme.renderUI({targetNode:e,width:w,height:h,deltaWidth:s.delta_width,deltaHeight:s.delta_height});D.setStyles(o.sizeContainer||o.editorContainer,{width:w,height:h});h=(o.iframeHeight||h)+(typeof(h)=='number'?(o.deltaHeight||0):'');if(h<a)h=a}else{o=s.theme(t,e);if(o.editorContainer.nodeType){o.editorContainer=o.editorContainer.id=o.editorContainer.id||t.id+"_parent"}if(o.iframeContainer.nodeType){o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||t.id+"_iframecontainer"}h=o.iframeHeight||e.offsetHeight;if(l){t.onInit.add(function(c){c.dom.bind(c.getBody(),'beforedeactivate keydown',function(){c.lastIERng=c.selection.getRng()})})}}t.editorContainer=o.editorContainer}if(s.content_css){j(r(s.content_css),function(u){t.contentCSS.push(t.documentBaseURI.toAbsolute(u))})}if(s.content_style){t.contentStyles.push(s.content_style)}if(s.content_editable){e=n=o=null;return t.initContentBody()}if(document.domain&&location.hostname!=document.domain)d.relaxedDomain=document.domain;t.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(s.document_base_url!=d.documentBaseURL)t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />';if(d.isIE8){if(s.ie7_compat)t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />';else t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(i=0;i<t.contentCSS.length;i++){t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+t.contentCSS[i]+'" />'}t.contentCSS=[];f=s.body_id||'tinymce';if(f.indexOf('=')!=-1){f=t.getParam('body_id','','hash');f=f[t.id]||f}v=s.body_class||'';if(v.indexOf('=')!=-1){v=t.getParam('body_class','','hash');v=v[t.id]||''}t.iframeHTML+='</head><body id="'+f+'" class="mceContentBody '+v+'" onload="window.parent.tinyMCE.get(\''+t.id+'\').onLoad.dispatch();"><br></body></html>';if(d.relaxedDomain&&(l||(d.isOpera&&parseFloat(opera.version())<11))){u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}n=D.add(o.iframeContainer,'iframe',{id:t.id+"_ifr",src:u||'javascript:""',frameBorder:'0',allowTransparency:"true",title:s.aria_label,style:{width:'100%',height:h,display:'block'}});t.contentAreaContainer=o.iframeContainer;if(o.editorContainer){D.get(o.editorContainer).style.display=t.orgDisplay}e.style.visibility=t.orgVisibility;D.get(t.id).style.display='none';D.setAttrib(t.id,'aria-hidden',true);if(!d.relaxedDomain||!u)t.initContentBody();e=n=o=null},initContentBody:function(){var s=this,a=s.settings,t=D.get(s.id),b=s.getDoc(),h,c,e;if((!l||!d.relaxedDomain)&&!a.content_editable){b.open();b.write(s.iframeHTML);b.close();if(d.relaxedDomain)b.domain=d.relaxedDomain}if(a.content_editable){D.addClass(t,'mceContentBody');s.contentDocument=b=a.content_document||document;s.contentWindow=a.content_window||window;s.bodyElement=t;a.content_document=a.content_window=null}c=s.getBody();c.disabled=true;if(!a.readonly)c.contentEditable=s.getParam('content_editable_state',true);c.disabled=false;s.schema=new d.html.Schema(a);s.dom=new d.dom.DOMUtils(b,{keep_values:true,url_converter:s.convertURL,url_converter_scope:s,hex_colors:a.force_hex_style_colors,class_filter:a.class_filter,update_styles:true,root_element:a.content_editable?s.id:null,schema:s.schema});s.parser=new d.html.DomParser(a,s.schema);s.parser.addAttributeFilter('src,href,style',function(n,f){var i=n.length,o,p=s.dom,v,u;while(i--){o=n[i];v=o.attr(f);u='data-mce-'+f;if(!o.attributes.map[u]){if(f==="style")o.attr(u,p.serializeStyle(p.parseStyle(v),o.name));else o.attr(u,s.convertURL(v,f,o.name))}}});s.parser.addNodeFilter('script',function(n,f){var i=n.length,o;while(i--){o=n[i];o.attr('type','mce-'+(o.attr('type')||'text/javascript'))}});s.parser.addNodeFilter('#cdata',function(n,f){var i=n.length,o;while(i--){o=n[i];o.type=8;o.name='#comment';o.value='[CDATA['+o.value+']]'}});s.parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',function(n,f){var i=n.length,o,p=s.schema.getNonEmptyElements();while(i--){o=n[i];if(o.isEmpty(p))o.empty().append(new d.html.Node('br',1)).shortEnded=true}});s.serializer=new d.dom.Serializer(a,s.dom,s.schema);s.selection=new d.dom.Selection(s.dom,s.getWin(),s.serializer,s);s.formatter=new d.Formatter(s);s.undoManager=new d.UndoManager(s);s.forceBlocks=new d.ForceBlocks(s);s.enterKey=new d.EnterKey(s);s.editorCommands=new d.EditorCommands(s);s.onExecCommand.add(function(f,i){if(!/^(FontName|FontSize)$/.test(i))s.nodeChanged()});s.serializer.onPreProcess.add(function(f,o){return s.onPreProcess.dispatch(s,o,f)});s.serializer.onPostProcess.add(function(f,o){return s.onPostProcess.dispatch(s,o,f)});s.onPreInit.dispatch(s);if(!a.browser_spellcheck&&!a.gecko_spellcheck)b.body.spellcheck=false;if(!a.readonly){s.bindNativeEvents()}s.controlManager.onPostRender.dispatch(s,s.controlManager);s.onPostRender.dispatch(s);s.quirks=d.util.Quirks(s);if(a.directionality)c.dir=a.directionality;if(a.nowrap)c.style.whiteSpace="nowrap";if(a.protect){s.onBeforeSetContent.add(function(f,o){j(a.protect,function(p){o.content=o.content.replace(p,function(i){return'<!--mce:protected '+escape(i)+'-->'})})})}s.onSetContent.add(function(){s.addVisual(s.getBody())});if(a.padd_empty_editor){s.onPostProcess.add(function(f,o){o.content=o.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,'')})}s.load({initial:true,format:'html'});s.startContent=s.getContent({format:'raw'});s.initialized=true;s.onInit.dispatch(s);s.execCallback('setupcontent_callback',s.id,c,b);s.execCallback('init_instance_callback',s);s.focus(true);s.nodeChanged({initial:true});if(s.contentStyles.length>0){e='';j(s.contentStyles,function(f){e+=f+"\r\n"});s.dom.addStyle(e)}j(s.contentCSS,function(u){s.dom.loadCSS(u)});if(a.auto_focus){setTimeout(function(){var f=d.get(a.auto_focus);f.selection.select(f.getBody(),1);f.selection.collapse(1);f.getBody().focus();f.getWin().focus()},100)}t=b=c=null},focus:function(s){var o,a=this,b=a.selection,c=a.settings.content_editable,i,e,f=a.getDoc(),h;if(!s){if(a.lastIERng){b.setRng(a.lastIERng)}i=b.getRng();if(i.item){e=i.item(0)}a._refreshContentEditable();if(!c){a.getWin().focus()}if(d.isGecko||c){h=a.getBody();if(h.setActive){h.setActive()}else{h.focus()}if(c){b.normalize()}}if(e&&e.ownerDocument==f){i=f.body.createControlRange();i.addElement(e);i.select()}}if(d.activeEditor!=a){if((o=d.activeEditor)!=null)o.onDeactivate.dispatch(o,a);a.onActivate.dispatch(a,o)}d._setActive(a)},execCallback:function(n){var t=this,f=t.settings[n],s;if(!f)return;if(t.callbackLookup&&(s=t.callbackLookup[n])){f=s.func;s=s.scope}if(q(f,'string')){s=f.replace(/\.\w+$/,'');s=s?d.resolve(s):0;f=d.resolve(f);t.callbackLookup=t.callbackLookup||{};t.callbackLookup[n]={func:f,scope:s}}return f.apply(s||t,Array.prototype.slice.call(arguments,1))},translate:function(s){var c=this.settings.language||'en',i=d.i18n;if(!s)return'';return i[c+'.'+s]||s.replace(/\{\#([^\}]+)\}/g,function(a,b){return i[c+'.'+b]||'{#'+b+'}'})},getLang:function(n,a){return d.i18n[(this.settings.language||'en')+'.'+n]||(q(a)?a:'{#'+n+'}')},getParam:function(n,a,t){var b=d.trim,v=q(this.settings[n])?this.settings[n]:a,o;if(t==='hash'){o={};if(q(v,'string')){j(v.indexOf('=')>0?v.split(/[;,](?![^=;,]*(?:[;,]|$))/):v.split(','),function(v){v=v.split('=');if(v.length>1)o[b(v[0])]=b(v[1]);else o[b(v[0])]=b(v)})}else o=v;return o}return v},nodeChanged:function(o){var s=this,a=s.selection,n;if(s.initialized){o=o||{};n=a.getStart()||s.getBody();n=l&&n.ownerDocument!=s.getDoc()?s.getBody():n;o.parents=[];s.dom.getParent(n,function(n){if(n.nodeName=='BODY')return true;o.parents.push(n)});s.onNodeChange.dispatch(s,o?o.controlManager||s.controlManager:s.controlManager,n,a.isCollapsed(),o)}},addButton:function(n,s){var a=this;a.buttons=a.buttons||{};a.buttons[n]=s},addCommand:function(n,c,s){this.execCommands[n]={func:c,scope:s||this}},addQueryStateHandler:function(n,c,s){this.queryStateCommands[n]={func:c,scope:s||this}},addQueryValueHandler:function(n,c,s){this.queryValueCommands[n]={func:c,scope:s||this}},addShortcut:function(p,a,b,s){var t=this,c;if(t.settings.custom_shortcuts===false)return false;t.shortcuts=t.shortcuts||{};if(q(b,'string')){c=b;b=function(){t.execCommand(c,false,null)}}if(q(b,'object')){c=b;b=function(){t.execCommand(c[0],c[1],c[2])}}j(r(p),function(p){var o={func:b,scope:s||this,desc:t.translate(a),alt:false,ctrl:false,shift:false};j(r(p,'+'),function(v){switch(v){case'alt':case'ctrl':case'shift':o[v]=true;break;default:o.charCode=v.charCodeAt(0);o.keyCode=v.toUpperCase().charCodeAt(0)}});t.shortcuts[(o.ctrl?'ctrl':'')+','+(o.alt?'alt':'')+','+(o.shift?'shift':'')+','+o.keyCode]=o});return true},execCommand:function(c,u,v,a){var t=this,s=0,o,b;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(c)&&(!a||!a.skip_focus))t.focus();a=g({},a);t.onBeforeExecCommand.dispatch(t,c,u,v,a);if(a.terminate)return false;if(t.execCallback('execcommand_callback',t.id,t.selection.getNode(),c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}if(o=t.execCommands[c]){b=o.func.call(o.scope,u,v);if(b!==true){t.onExecCommand.dispatch(t,c,u,v,a);return b}}j(t.plugins,function(p){if(p.execCommand&&p.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);s=1;return false}});if(s)return true;if(t.theme&&t.theme.execCommand&&t.theme.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}if(t.editorCommands.execCommand(c,u,v)){t.onExecCommand.dispatch(t,c,u,v,a);return true}t.getDoc().execCommand(c,u,v);t.onExecCommand.dispatch(t,c,u,v,a)},queryCommandState:function(c){var t=this,o,s;if(t._isHidden())return;if(o=t.queryStateCommands[c]){s=o.func.call(o.scope);if(s!==true)return s}o=t.editorCommands.queryCommandState(c);if(o!==-1)return o;try{return this.getDoc().queryCommandState(c)}catch(e){}},queryCommandValue:function(c){var t=this,o,s;if(t._isHidden())return;if(o=t.queryValueCommands[c]){s=o.func.call(o.scope);if(s!==true)return s}o=t.editorCommands.queryCommandValue(c);if(q(o))return o;try{return this.getDoc().queryCommandValue(c)}catch(e){}},show:function(){var s=this;D.show(s.getContainer());D.hide(s.id);s.load()},hide:function(){var s=this,a=s.getDoc();if(l&&a)a.execCommand('SelectAll');s.save();D.hide(s.getContainer());D.setStyle(s.id,'display',s.orgDisplay)},isHidden:function(){return!D.isHidden(this.id)},setProgressState:function(b,t,o){this.onSetProgressState.dispatch(this,b,t,o);return b},load:function(o){var t=this,e=t.getElement(),h;if(e){o=o||{};o.load=true;h=t.setContent(q(e.value)?e.value:e.innerHTML,o);o.element=e;if(!o.no_events)t.onLoadContent.dispatch(t,o);o.element=e=null;return h}},save:function(o){var t=this,e=t.getElement(),h,f;if(!e||!t.initialized)return;o=o||{};o.save=true;o.element=e;h=o.content=t.getContent(o);if(!o.no_events)t.onSaveContent.dispatch(t,o);h=o.content;if(!/TEXTAREA|INPUT/i.test(e.nodeName)){e.innerHTML=h;if(f=D.getParent(t.id,'form')){j(f.elements,function(e){if(e.name==t.id){e.value=h;return false}})}}else e.value=h;o.element=e=null;return h},setContent:function(c,a){var s=this,b,e=s.getBody(),f;a=a||{};a.format=a.format||'html';a.set=true;a.content=c;if(!a.no_events)s.onBeforeSetContent.dispatch(s,a);c=a.content;if(!d.isIE&&(c.length===0||/^\s+$/.test(c))){f=s.settings.forced_root_block;if(f)c='<'+f+'><br data-mce-bogus="1"></'+f+'>';else c='<br data-mce-bogus="1">';e.innerHTML=c;s.selection.select(e,true);s.selection.collapse(true);return}if(a.format!=='raw'){c=new d.html.Serializer({},s.schema).serialize(s.parser.parse(c))}a.content=d.trim(c);s.dom.setHTML(e,a.content);if(!a.no_events)s.onSetContent.dispatch(s,a);if(!s.settings.content_editable||document.activeElement===s.getBody()){s.selection.normalize()}return a.content},getContent:function(a){var s=this,c,b=s.getBody();a=a||{};a.format=a.format||'html';a.get=true;a.getInner=true;if(!a.no_events)s.onBeforeGetContent.dispatch(s,a);if(a.format=='raw')c=b.innerHTML;else if(a.format=='text')c=b.innerText||b.textContent;else c=s.serializer.serialize(b,a);if(a.format!='text'){a.content=d.trim(c)}else{a.content=c}if(!a.no_events)s.onGetContent.dispatch(s,a);return a.content},isDirty:function(){var s=this;return d.trim(s.startContent)!=d.trim(s.getContent({format:'raw',no_events:1}))&&!s.isNotDirty},getContainer:function(){var s=this;if(!s.container)s.container=D.get(s.editorContainer||s.id+'_parent');return s.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return D.get(this.settings.content_element||this.id)},getWin:function(){var s=this,e;if(!s.contentWindow){e=D.get(s.id+"_ifr");if(e)s.contentWindow=e.contentWindow}return s.contentWindow},getDoc:function(){var s=this,w;if(!s.contentDocument){w=s.getWin();if(w)s.contentDocument=w.document}return s.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(u,n,e){var s=this,a=s.settings;if(a.urlconverter_callback)return s.execCallback('urlconverter_callback',u,e,true,n);if(!a.convert_urls||(e&&e.nodeName=='LINK')||u.indexOf('file:')===0)return u;if(a.relative_urls)return s.documentBaseURI.toRelative(u);u=s.documentBaseURI.toAbsolute(u,a.remove_script_host);return u},addVisual:function(e){var s=this,a=s.settings,b=s.dom,c;e=e||s.getBody();if(!q(s.hasVisual))s.hasVisual=a.visual;j(b.select('table,a',e),function(e){var v;switch(e.nodeName){case'TABLE':c=a.visual_table_class||'mceItemTable';v=b.getAttrib(e,'border');if(!v||v=='0'){if(s.hasVisual)b.addClass(e,c);else b.removeClass(e,c)}return;case'A':if(!b.getAttrib(e,'href',false)){v=b.getAttrib(e,'name')||e.id;c='mceItemAnchor';if(v){if(s.hasVisual)b.addClass(e,c);else b.removeClass(e,c)}}return}});s.onVisualAid.dispatch(s,e,s.hasVisual)},remove:function(){var s=this,e=s.getContainer(),a=s.getDoc();if(!s.removed){s.removed=1;if(l&&a)a.execCommand('SelectAll');s.save();D.setStyle(s.id,'display',s.orgDisplay);if(!s.settings.content_editable){E.unbind(s.getWin());E.unbind(s.getDoc())}E.unbind(s.getBody());E.clear(e);s.execCallback('remove_instance_callback',s);s.onRemove.dispatch(s);s.onExecCommand.listeners=[];d.remove(s);D.remove(e)}},destroy:function(s){var t=this;if(t.destroyed)return;if(k){E.unbind(t.getDoc());E.unbind(t.getWin());E.unbind(t.getBody())}if(!s){d.removeUnload(t.destroy);tinyMCE.onBeforeUnload.remove(t._beforeUnload);if(t.theme&&t.theme.destroy)t.theme.destroy();t.controlManager.destroy();t.selection.destroy();t.dom.destroy()}if(t.formElement){t.formElement.submit=t.formElement._mceOldSubmit;t.formElement._mceOldSubmit=null}t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null;if(t.selection)t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null;t.destroyed=1},_refreshContentEditable:function(){var s=this,b,p;if(s._isHidden()){b=s.getBody();p=b.parentNode;p.removeChild(b);p.appendChild(b);b.focus()}},_isHidden:function(){var s;if(!k)return 0;s=this.selection.getSel();return(!s||!s.rangeCount||s.rangeCount===0)}})})(tinymce);
