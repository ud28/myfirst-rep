/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.ux3.DataSetSimpleView");jQuery.sap.require("sap.ui.ux3.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ui.ux3.DataSetSimpleView",{metadata:{interfaces:["sap.ui.ux3.DataSetView"],library:"sap.ui.ux3",properties:{"floating":{type:"boolean",group:"Misc",defaultValue:true},"name":{type:"string",group:"Misc",defaultValue:"Name of this View"},"icon":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"iconHovered":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"iconSelected":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"responsive":{type:"boolean",group:"Misc",defaultValue:false},"itemMinWidth":{type:"int",group:"Misc",defaultValue:0}},aggregations:{"template":{type:"sap.ui.core.Control",multiple:false}}}});jQuery.sap.require("jquery.sap.script");
sap.ui.ux3.DataSetSimpleView.prototype.init=function(){this._oDataSet=this.getParent()};
sap.ui.ux3.DataSetSimpleView.prototype.handleSelection=function(e){var o=e.getParameters().oldLeadSelectedIndex,n=e.getParameters().newLeadSelectedIndex;if(o!=-1){jQuery.sap.byId(this.getParent().getSelectedItemId(o)).removeClass("sapUiUx3DSSVSelected")}if(n!=-1){jQuery.sap.byId(this.getParent().getSelectedItemId(n)).addClass("sapUiUx3DSSVSelected")}};
sap.ui.ux3.DataSetSimpleView.prototype.isItemSelected=function(i){return this.getParent().isSelectedIndex(i._index)};
sap.ui.ux3.DataSetSimpleView.prototype.initView=function(I){this.getParent().attachSelectionChanged(this.handleSelection,this);this.items=I;for(var i=0;i<I.length;i++){var t=this.getTemplate().clone(String(i));I[i]._setTemplate(t)}};
sap.ui.ux3.DataSetSimpleView.prototype.exitView=function(I){this.getParent().detachSelectionChanged(this.handleSelection,this);for(var i=0;i<I.length;i++){I[i]._destroyTemplate()}this.items=[]};
(function(){sap.ui.ux3.DataSetSimpleView.prototype.onBeforeRendering=function(){if(this._handleResizeId){jQuery.sap.clearDelayedCall(this._handleResizeId);this._handleResizeId=null}};sap.ui.ux3.DataSetSimpleView.prototype.onAfterRendering=function(){if(this.getFloating()&&this.getResponsive()){this._height=-1;this._itemsPerRow=-1;a(this,true)}};function _(){if(!this.getDomRef()){return}a(this)};function a(t,i){var T=t.$();var I=Math.floor(T.width()/t.getItemMinWidth());var b=Math.floor(100/I);if(T.width()*b/100<t.getItemMinWidth()){I--;b=Math.floor(100/I)}if(i||t._height!=T.height()||t._itemsPerRow!=I){var c=-1;var d=t.getParent().getItems();var e,w;for(var j=0;j<d.length;j++){if(c==-1||c+1>I){c=0;e=100-(I*b)}var w=b;if(e>0){w++;e--}jQuery.sap.byId(d[j].getId()).css("width",w+"%");c++}t._height=T.height();t._itemsPerRow=I}t._handleResizeId=jQuery.sap.delayedCall(300,t,_)}}());
