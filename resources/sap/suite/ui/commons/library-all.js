jQuery.sap.declare('sap.suite.ui.commons.library-all');if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeScrollerRenderer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.suite.ui.commons.DateRangeScrollerRenderer");sap.suite.ui.commons.DateRangeScrollerRenderer={};sap.suite.ui.commons.DateRangeScrollerRenderer.renderDecrementScrollButton=function(r,d,D){r.write("<a>");r.write('<span id="'+d.getId()+'-decrementScrollButton"');r.write('title="');r.writeEscaped(D.resBundle.getText("DATERANGESCROLLER_PREV_TEXT"));r.write('"');r.addClass("sapSuiteUiCommonsDateRangeScrollerScrollBtn");r.addClass("sapSuiteUiCommonsDateRangeScrollerDecBtnArrow");r.writeClasses();r.write(">");if(sap.ui.getCore().getConfiguration().getRTL()){r.write(D.nextArrowSymbol)}else{r.write(D.prevArrowSymbol)}r.write("</span>");r.write("</a>")};sap.suite.ui.commons.DateRangeScrollerRenderer.renderIncrementScrollButton=function(r,d,D){r.write("<a>");r.write('<span id="'+d.getId()+'-incrementScrollButton"');r.write('title="');r.writeEscaped(D.resBundle.getText("DATERANGESCROLLER_NEXT_TEXT"));r.write('"');r.addClass("sapSuiteUiCommonsDateRangeScrollerScrollBtn");r.addClass("sapSuiteUiCommonsDateRangeScrollerIncBtnArrow");r.writeClasses();r.write(">");if(sap.ui.getCore().getConfiguration().getRTL()){r.write(D.prevArrowSymbol)}else{r.write(D.nextArrowSymbol)}r.write("</span>");r.write("</a>")};sap.suite.ui.commons.DateRangeScrollerRenderer.render=function(r,d){var l=sap.ui.getCore().getConfiguration().getLanguage();var R=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons",l);var p="&#9668";var n="&#9658";var D={resBundle:R,prevArrowSymbol:p,nextArrowSymbol:n};r.write("<span");r.writeControlData(d);r.addClass("sapSuiteUiCommonsDateRangeScroller");r.writeClasses();r.writeAttribute("tabindex","-1");r.write(">");if(d.getTooltip_AsString()){r.write('<SPAN id="'+d.getId()+'-Descr" style="visibility: hidden; display: none;"');r.write('>');r.writeEscaped(d.getTooltip_AsString());r.write('</SPAN>')}this.renderDecrementScrollButton(r,d,D);this.renderIncrementScrollButton(r,d,D);r.write("<span");r.writeAttribute("id",d.getId()+"-labelarea");r.writeAttribute("tabindex","0");r.writeClasses();r.writeAccessibilityState(d,{role:'list',live:'assertive',describedby:d.getTooltip_AsString()?(d.getId()+'-Descr '+d.getAriaDescribedBy().join(" ")):undefined});r.write(">");r.renderControl(d._oDateRangeLabel);r.write("</span>");r.write("</span>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeSliderInternalRenderer')){jQuery.sap.declare("sap.suite.ui.commons.DateRangeSliderInternalRenderer");jQuery.sap.require('sap.ui.commons.RangeSliderRenderer');jQuery.sap.require('sap.ui.core.Renderer');sap.suite.ui.commons.DateRangeSliderInternalRenderer=sap.ui.core.Renderer.extend(sap.ui.commons.RangeSliderRenderer);sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderBufferDivForBubbles=function(r,d){if(d.getShowBubbles()){r.write('<DIV id="'+d.getId()+'-bubbleBuffer" style="height:40px">');r.write('</DIV>')}};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderEnclosingDiv=function(r,d){r.write('<DIV');r.writeControlData(d);r.addClass('sapUiSli');this.controlAdditionalCode(r,d);if(d.getTooltip_AsString()){r.writeAttributeEscaped('title',d.getTooltip_AsString())}if(!d.getVertical()&&d.getWidth()){r.writeAttribute('style','width:'+d.getWidth()+';')}if(!d.getEnabled()){r.addClass('sapUiSliDsbl')}else{if(!d.getEditable()){r.addClass('sapUiSliRo')}else{r.addClass('sapUiSliStd')}}if(!d.getVertical()){r.addClass('sapUiSliHori')}if(d.getShowBubbles()){r.addClass('sapUiSuiteDRSliBub')}r.writeClasses();r.write('>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderEnclosingDivEnd=function(r,d){r.write('</DIV>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderAriaGripTooltip=function(r,d){if(d.getTooltip_AsString()){r.write('<SPAN id="'+d.getId()+'-Descr" style="visibility: hidden; display: none;">');r.writeEscaped(d.getTooltip_AsString());r.write('</SPAN>')}};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderBubbles=function(r,d){if(!d.getShowBubbles()){return}r.write('<div id="'+d.getId()+'-bubble"');r.addClass("sapSuiteUiCommonsDateRangeSliderBubble");r.writeClasses();r.write('>');r.write('<div');r.addClass("sapSuiteUiCommonsDateRangeSliderBubbleLbl");r.writeClasses();r.write('>');r.renderControl(d._oBubble);r.write('</div>');r.write('</div>');r.write('<div id="'+d.getId()+'-bubble2"');r.addClass("sapSuiteUiCommonsDateRangeSliderBubble");r.writeClasses();r.write('>');r.write('<div');r.addClass("sapSuiteUiCommonsDateRangeSliderBubbleLbl");r.writeClasses();r.write('>');r.renderControl(d._oBubble2);r.write('</div>');r.write('</div>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderSliderBar=function(r,d){r.write('<DIV');r.writeAttribute('id',d.getId()+'-right');r.write('class="sapUiSliR"> <DIV');r.writeAttribute('id',d.getId()+'-left');r.write('class="sapUiSliL"> <DIV');r.writeAttribute('id',d.getId()+'-bar');r.write('class="sapUiSliBar">')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderSliderBarEnd=function(r,d){r.write('</DIV></DIV></DIV>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderTicksAndLabels=function(r,d){var u=false;if(d.getLabels()&&d.getLabels().length>0){u=true}if(d.getTotalUnits()>0||u){var t=d.getTotalUnits();if(u){t=d.getLabels().length-1}for(var i=0;i<=t;i++){r.write('<DIV');r.writeAttribute('id',d.getId()+'-tick'+i);r.write('class="sapUiSliTick" ');r.write('></DIV>');if(d.getStepLabels()){r.write('<DIV');r.writeAttribute('id',d.getId()+'-text'+i);switch(i){case(0):r.write('class="sapUiSliText sapUiSliTextLeft" >');break;case(t):r.write('class="sapUiSliText sapUiSliTextRight" >');break;default:r.write('class="sapUiSliText" >');break}if(u){r.write(d.getLabels()[i])}else{var s=(d.getMax()-d.getMin())/t;r.write(d.getMin()+i*s)}r.write('</DIV>')}}}};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderHighlightBar=function(r,d){r.write('<DIV');r.writeAttribute('id',d.getId()+'-hili');r.write('class="sapUiSliHiLi"></DIV>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderGrip=function(r,d){r.write('<DIV');r.writeAttribute('id',d.getId()+'-grip');if(d.getEnabled()){r.writeAttribute('tabIndex','0')}else{r.writeAttribute('tabIndex','-1')}if(d.getPinGrip()){r.write('class="sapUiSliGrip sapUiSliGripPin"')}else{r.write('class="sapUiSliGrip"')}r.writeAttribute('title',d.getValue());r.writeAccessibilityState(d,{role:'slider',controls:d.getId()+'-grip2',orientation:'horizontal',valuemin:d.getMin(),valuemax:d.getValue2(),live:'assertive',disabled:!d.getEditable()||!d.getEnabled(),describedby:d.getTooltip_AsString()?(d.getId()+'-Descr '+d.getAriaDescribedBy().join(" ")):undefined});r.write('>&#9650;</DIV>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.renderGrip2=function(r,d){r.write('<DIV');r.writeAttribute('id',d.getId()+'-grip2');if(d.getEnabled()){r.writeAttribute('tabIndex','0')}else{r.writeAttribute('tabIndex','-1')}if(d.getPinGrip2()){r.write('class="sapUiSliGrip sapUiSliGripPin"')}else{r.write('class="sapUiSliGrip"')}r.writeAttribute('title',d.getValue2());r.writeAccessibilityState(d,{role:'slider',controls:d.getId()+'-grip',orientation:'horizontal',valuemin:d.getValue(),valuemax:d.getMax(),live:'assertive',disabled:!d.getEditable()||!d.getEnabled(),describedby:d.getTooltip_AsString()?(d.getId()+'-Descr '+d.getAriaDescribedBy().join(" ")):undefined});r.write('>&#9650;</DIV>')};sap.suite.ui.commons.DateRangeSliderInternalRenderer.render=function(r,d){if(!d.getVisible()){return}this.renderEnclosingDiv(r,d);this.renderBufferDivForBubbles(r,d);this.renderAriaGripTooltip(r,d);this.renderBubbles(r,d);this.renderSliderBar(r,d);this.renderTicksAndLabels(r,d);this.renderHighlightBar(r,d);if(d.getPinGrip()||(d.getPinGrip()&&d.getPinGrip2())||(!d.getPinGrip()&&!d.getPinGrip2())){this.renderGrip(r,d);this.renderGrip2(r,d)}else if(d.getPinGrip2()){this.renderGrip2(r,d);this.renderGrip(r,d)}this.renderSliderBarEnd(r,d);this.renderEnclosingDivEnd(r,d)}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeSliderRenderer')){jQuery.sap.declare("sap.suite.ui.commons.DateRangeSliderRenderer");sap.suite.ui.commons.DateRangeSliderRenderer={};sap.suite.ui.commons.DateRangeSliderRenderer.render=function(r,d){if(!d.getVisible()){return}r.write("<span");r.writeControlData(d);r.addClass("sapSuiteUiCommonsDateRangeSlider");r.writeClasses();r.write(">");r.renderControl(d._oDateRangeSliderInternal);r.write("</span>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTakerFeederRenderer')){jQuery.sap.declare("sap.suite.ui.commons.NoteTakerFeederRenderer");sap.suite.ui.commons.NoteTakerFeederRenderer={};sap.suite.ui.commons.NoteTakerFeederRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapSuiteUiCommonsNoteTakerFeeder");r.writeClasses();r.writeAttribute("tabindex","0");r.writeAccessibilityState(c,{role:'region',describedby:c.getId()+"-header"});r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-header");r.addClass("sapSuiteUiCommonsNoteTakerFeederHeader");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-header-text");r.writeAccessibilityState(c,{role:'heading'});r.write(">");r.writeEscaped(c._rb.getText("NOTETAKERFEEDER_TITLE"));r.write("</div>");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-tag-panel");r.addClass("sapSuiteUiCommonsNoteTakerFeederTagPanel");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-left-toolbar");r.addClass("sapSuiteUiCommonsNoteTakerFeederLeftPanel");r.writeClasses();r.write(">");r.renderControl(c._oTagButton);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-right-toolbar");r.addClass("sapSuiteUiCommonsNoteTakerFeederRightPanel");r.writeClasses();r.write(">");r.renderControl(c._oThumbUpButton);r.renderControl(c._oThumbDownButton);r.renderControl(c._oAddAttachButton);r.renderControl(c._oFileUploader);r.write("</div>");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-panel");r.addClass("sapSuiteUiCommonsNoteTakerFeederAttachmentPanel");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-content");r.addClass("sapSuiteUiCommonsNoteTakerFeederAttachmentContent");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-name");r.addClass("sapSuiteUiCommonsNtfAttachmentNamelbl");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-image");r.addClass("sapSuiteUiCommonsNtfAttachImg");r.writeClasses();r.write("/>");r.renderControl(c._oAttachmentLink);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-loading");r.addClass("sapSuiteUiCommonsNtfLoadingLbl");r.writeClasses();r.write(">");r.renderControl(c._oAttachmentLoadingLabel);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-attachment-delete");r.addClass("sapSuiteUiCommonsNtfDeleteBtn");r.writeClasses();r.write(">");r.renderControl(c._oDeleteAttachButton);r.write("</div>");r.write("</div>");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-title-panel");r.addClass("sapSuiteUiCommonsNoteTakerFeederTitlePanel");r.writeClasses();r.write(">");r.renderControl(c._oTitle);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-body");if(c._oAddAttachButton.getEnabled()){r.addClass("sapSuiteUiCommonsNoteTakerFeederBody")}else{r.addClass("sapSuiteUiCommonsNoteTakerFeederBodySmaller")}r.writeClasses();r.write(">");r.renderControl(c._oBody);r.write("</div>");r.renderControl(c._oAddButton);r.write("<div");r.writeAttribute("id",c.getId()+"-selectTag-panel");r.addClass("sapSuiteUiCommonsNoteTakerFeederSelectTagPanel");r.addClass("sapUiShd");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-selectTag-arrow");r.addClass("sapSuiteUiCommonsNoteTakerFeederSelectTagArrow");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-selectTag-header");r.addClass("sapSuiteUiCommonsNoteTakerFeederSelectTagHeader");r.writeClasses();r.write(">");r.writeEscaped(c._rb.getText("NOTETAKERFEEDER_TOOLPOPUP_TITLE"));r.write("</div>");r.write("<div>");r.renderControl(c._oTagInput);r.write("</div>");r.write("<div>");r.renderControl(c._oTagList);r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsNoteTakerFeederSelectTagButtons");r.writeClasses();r.write(">");r.renderControl(c._oAddTagButton);r.renderControl(c._oCancelTagButton);r.write("</div>");r.write("</div>");r.write("</div>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTakerRenderer')){jQuery.sap.declare("sap.suite.ui.commons.NoteTakerRenderer");sap.suite.ui.commons.NoteTakerRenderer={};sap.suite.ui.commons.NoteTakerRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapSuiteUiCommonsNoteTaker");r.writeClasses();r.writeAttribute("style","width:"+(c.getVisibleNotes()*350+50)+"px");r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-filterPane");r.addClass("sapSuiteUiCommonsNoteTakerFilterPane");r.writeClasses();r.write(">");r.write("<div");r.addClass("suiteUiNtFilterPaneLeftSection");r.writeClasses();r.write(">");r.renderControl(c._oHomeButton);r.write("<span");r.writeAttribute("id",c.getId()+"-filterPane-header");r.addClass("suiteUiNtFilterTitle");r.writeClasses();r.write(">");r.writeEscaped(c._rb.getText("NOTETAKER_FILTER_TITLE")+":");r.write("</span>");r.renderControl(c._oFilterTagButton);r.renderControl(c._oFilterThumbUpButton);r.renderControl(c._oFilterThumbDownButton);r.renderControl(c._oFilterAllButton);r.write("</div>");r.write("<div");r.addClass("suiteUiNtFilterPaneRightSection");r.writeClasses();r.write(">");if(c.getVisibleNotes()>1){r.renderControl(c._oFilterSearchField)}else{r.renderControl(c._oSearchButton)}r.write("</div>");r.write("</div>");r.renderControl(c._carousel);if(c.getVisibleNotes()==1){this.searchTextRender(r,c)}r.write("<div");r.writeAttribute("id",c.getId()+"-filterTag-panel");r.addClass("sapSuiteUiCommonsNoteTakerFilterTagPanel");r.addClass("sapUiShd");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-filterTag-arrow");r.addClass("sapSuiteUiCommonsNoteTakerFilterTagArrow");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-filterTag-header");r.addClass("sapSuiteUiCommonsNoteTakerFilterTagHeader");r.writeClasses();r.write(">");r.writeEscaped(c._rb.getText("NOTETAKERFEEDER_TOOLPOPUP_TITLE"));r.write("</div>");r.write("<div>");r.renderControl(c._oFilterTagList);r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsNoteTakerFilterTagButtons");r.writeClasses();r.write(">");r.renderControl(c._oApplyFilterTagButton);r.renderControl(c._oCancelFilterTagButton);r.write("</div>");r.write("</div>");r.write("</div>")};sap.suite.ui.commons.NoteTakerRenderer.searchTextRender=function(r,c){r.write("<div");r.writeAttribute("id",c.getId()+"-search-panel");r.addClass("sapSuiteUiCommonsNoteTakerSearchPanel");r.addClass("sapUiShd");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-search-arrow");r.addClass("sapSuiteUiCommonsNoteTakerSearchArrow");r.writeClasses();r.write(">");r.write("</div>");r.write("<div>");r.renderControl(c._oFilterSearchField);r.write("</div>");r.write("</div>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.SplitButtonRenderer')){jQuery.sap.declare("sap.suite.ui.commons.SplitButtonRenderer");sap.suite.ui.commons.SplitButtonRenderer={};sap.suite.ui.commons.SplitButtonRenderer.render=function(r,s){if(!s.getVisible()){return}r.write("<span");r.writeControlData(s);r.addClass("sapSuiteUiCommonsSplitButton");r.writeClasses();r.write(">");r.renderControl(s._oDefaultActionButton);r.renderControl(s._oMenuButton);r.write("</span>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.library')){jQuery.sap.declare("sap.suite.ui.commons.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.commons.library');sap.ui.getCore().initLibrary({name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.ui.commons"],types:[],interfaces:[],controls:["sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.SplitButton"],elements:[],version:"1.12.1"})};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.util.DateUtils')){jQuery.sap.declare("sap.suite.ui.commons.util.DateUtils");sap.suite.ui.commons.util.DateUtils=function(){throw new Error()};sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0)}};sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setHours(23);d.setMinutes(59);d.setSeconds(59);d.setMilliseconds(999)}};sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setDate(1);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(d)}};sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setDate(1);d.setMonth(d.getMonth()+1);d.setDate(0);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(d)}};sap.suite.ui.commons.util.DateUtils.resetDateToStartOfYear=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setMonth(0);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(d)}};sap.suite.ui.commons.util.DateUtils.resetDateToEndOfYear=function(d){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){d.setMonth(11);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(d)}};sap.suite.ui.commons.util.DateUtils.resetDateToStartOfWeek=function(d,f){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){if(f===undefined){f=1}else if(isNaN(f)||!isFinite(f)){jQuery.sap.log.error("DateUtils iFirstDayOfWeek value ='"+f+"' is invalid.");return}d.setDate(d.getDate()-(d.getDay()-f+7)%7);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(d)}};sap.suite.ui.commons.util.DateUtils.resetDateToEndOfWeek=function(d,s){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)){var a;if(s&&!(s instanceof Object)){jQuery.sap.log.error("DateUtils oSettings is not an object.");return}if(!s){s={}}if(s.iDuration===undefined){a=7}else{a=s.iDuration;if(isNaN(a)||!isFinite(a)){jQuery.sap.log.error("DateUtils duration value ='"+a+"' is invalid.");return}}sap.suite.ui.commons.util.DateUtils.resetDateToStartOfWeek(d,s.iFirstDayOfWeek);d.setDate(d.getDate()+a-1);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(d)}};sap.suite.ui.commons.util.DateUtils.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){jQuery.sap.log.error("DateUtils invalid date="+d);return false}return true};sap.suite.ui.commons.util.DateUtils.dateDaysEqual=function(d,D){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)&&sap.suite.ui.commons.util.DateUtils.isValidDate(D)){return(d.getFullYear()===D.getFullYear()&&d.getMonth()===D.getMonth()&&d.getDate()===D.getDate())}return false};sap.suite.ui.commons.util.DateUtils.dateMonthsEqual=function(d,D){if(sap.suite.ui.commons.util.DateUtils.isValidDate(d)&&sap.suite.ui.commons.util.DateUtils.isValidDate(D)){return(d.getFullYear()===D.getFullYear()&&d.getMonth()===D.getMonth())}return false};sap.suite.ui.commons.util.DateUtils.incrementDateByIndex=function(s,i){var r=null;if(sap.suite.ui.commons.util.DateUtils.isValidDate(s)&&isFinite(i)){r=new Date(s);r.setDate(s.getDate()+parseInt(i,10))}return r};sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex=function(s,i){var r=null;if(sap.suite.ui.commons.util.DateUtils.isValidDate(s)&&isFinite(i)){r=new Date(s);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(r);r.setMonth(s.getMonth()+parseInt(i,10))}return r};sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart=function(s,e){s=new Date(s);e=new Date(e);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(s);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(e);var f=s.getTime()<=e.getTime();var F=0,b=0,n=0;for(F=0,b=0;!(s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear());F++,b--){if(f){s.setMonth(s.getMonth()+1)}else{s.setMonth(s.getMonth()-1)}}if(f){n=F}else{n=b}return n};sap.suite.ui.commons.util.DateUtils.numberOfDaysApart=function(s,e){s=new Date(s);e=new Date(e);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(s);sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(e);var f=s.getTime()<=e.getTime();var F=0,b=0,n=0;for(F=0,b=0;!(s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear());F++,b--){if(f){s.setDate(s.getDate()+1)}else{s.setDate(s.getDate()-1)}}if(f){n=F}else{n=b}return n}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.util.RenderUtils')){jQuery.sap.declare("sap.suite.ui.commons.util.RenderUtils");jQuery.sap.require('sap.ui.base.Object');sap.suite.ui.commons.util.RenderingHelper=function(r){this._rm=r};sap.suite.ui.commons.util.RenderingHelper.prototype=jQuery.sap.newObject(sap.ui.base.Object.prototype);sap.suite.ui.commons.util.RenderingHelper.prototype._getRenderManager=function(){if(!(this._rm)){throw new Error("Render manager not defined")}return this._rm};sap.suite.ui.commons.util.RenderingHelper.prototype.writeOpeningTag=function(t,T){T=T||{};var r=this._getRenderManager();var a;r.write("<");r.writeEscaped(t);if(T.classes){for(var i=0;i<T.classes.length;i++){r.addClass(T.classes[i])}r.writeClasses()}if(T.attributes){for(a in T.attributes){r.writeAttribute(a,T.attributes[a])}}if(T.escapedAttributes){for(a in T.escapedAttributes){r.writeAttributeEscaped(a,T.escapedAttributes[a])}}r.write(">")};sap.suite.ui.commons.util.RenderingHelper.prototype.writeClosingTag=function(t){var r=this._getRenderManager();r.write("</");r.writeEscaped(t);r.write(">")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeScroller')){jQuery.sap.declare("sap.suite.ui.commons.DateRangeScroller");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.DateRangeScroller",{metadata:{library:"sap.suite.ui.commons",associations:{"ariaDescribedBy":{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},"ariaLabelledBy":{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{"change":{}}}});sap.suite.ui.commons.DateRangeScroller.M_EVENTS={'change':'change'};jQuery.sap.require('sap.ui.commons.Label');jQuery.sap.require('sap.ui.core.format.DateFormat');(function(){var D="d";var W="w";var M="m";var Y="y";var C="c";var w=7;sap.suite.ui.commons.DateRangeScroller.getFormattedDate=function(r,d,o){var a;var f;switch(r){case(D):a=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:"MMMM d, YYYY"});f=a.format(d.startDate,false);break;case(W):case(C):var s=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:'MMMM d'});var e=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:'MMMM d, YYYY'});if(d.startDate.getYear()!==d.endDate.getYear()){s=e}else if(d.startDate.getMonth()===d.endDate.getMonth()){e=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:'d, YYYY'})}var S=s.format(d.startDate,false);var E=e.format(d.endDate,false);f=S+" - "+E;break;case(M):a=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:'MMMM YYYY'});f=a.format(d.startDate,false);break;case(Y):a=o||sap.ui.core.format.DateFormat.getDateInstance({pattern:'YYYY'});f=a.format(d.startDate,false);break;default:f=d.startDate+" - "+d.endDate;break}return f};sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue=function(r,d,R,o){R.setText(sap.suite.ui.commons.DateRangeScroller.getFormattedDate(r,d,o));if(R.isActive()){R.rerender()}};sap.suite.ui.commons.DateRangeScroller.adjustDateByStep=function(d,s){if(s===0){return}d.setDate(d.getDate()+s)};sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep=function(r,s){var S=r.startDate;var e=r.endDate;S.setDate(S.getDate()+s);e.setDate(e.getDate()+s)};sap.suite.ui.commons.DateRangeScroller.isValidDuration=function(d,u){var v=false;if(d===undefined){v=true}else if(!isNaN(d)&&isFinite(d)){if((d>=1)&&(!u||d<=u)){v=true}}if(!v){jQuery.sap.log.error("DateRangeScroller duration value ='"+d+"' is invalid.")}return v};sap.suite.ui.commons.DateRangeScroller.prototype.init=function(){this._sRangeType=D;this._iCustomDuration=1;this._oDateFormat=null;this._oDateRangeLabel=new sap.ui.commons.Label(this.getId()+"-dateRangeLabel",{labelFor:this.getId()});this._oDateRangeLabel.addStyleClass("sapSuiteUiCommonsDateRangeScrollerLabel");var s=new Date();sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(s);var e=new Date();sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(e);this._oDateRange={startDate:s,endDate:e};sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(D,this._oDateRange,this._oDateRangeLabel,this._oDateFormat)};sap.suite.ui.commons.DateRangeScroller.prototype.setDateRangeDay=function(i){if(sap.suite.ui.commons.util.DateUtils.isValidDate(i)){this._oDateRange.startDate.setTime(i.getTime());this._oDateRange.endDate.setTime(i.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(this._oDateRange.startDate);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(D,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);this._sRangeType=D}return this};sap.suite.ui.commons.DateRangeScroller.prototype.setDateRangeWeek=function(i,s){var d=w;var f=1;if(s){d=s.duration;f=s.firstDayOfWeek}if(d===undefined){d=w}else if(d&&!isNaN(d)){d=parseInt(d,10)}if(f===undefined){f=1}else if(f&&!isNaN(f)){f=parseInt(f,10)}if((f===null)||f===""||isNaN(f)||f<0||f>6){jQuery.sap.log.error("DateRangeScroller oSettings.firstDayOfWeek value ='"+s.firstDayOfWeek+"' is invalid.")}else if(sap.suite.ui.commons.util.DateUtils.isValidDate(i)&&sap.suite.ui.commons.DateRangeScroller.isValidDuration(d,w)){this._oDateRange.startDate.setTime(i.getTime());this._oDateRange.endDate.setTime(i.getTime());var a=d;var b=f;sap.suite.ui.commons.util.DateUtils.resetDateToStartOfWeek(this._oDateRange.startDate,f);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfWeek(this._oDateRange.endDate,{iDuration:a,iFirstDayOfWeek:b});sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(W,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);this._sRangeType=W}return this};sap.suite.ui.commons.DateRangeScroller.prototype.setDateRangeMonth=function(i){if(sap.suite.ui.commons.util.DateUtils.isValidDate(i)){this._oDateRange.startDate.setTime(i.getTime());this._oDateRange.endDate.setTime(i.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(this._oDateRange.startDate);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(M,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);this._sRangeType=M}return this};sap.suite.ui.commons.DateRangeScroller.prototype.setDateRangeYear=function(i){if(sap.suite.ui.commons.util.DateUtils.isValidDate(i)){this._oDateRange.startDate.setTime(i.getTime());this._oDateRange.endDate.setTime(i.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfYear(this._oDateRange.startDate);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfYear(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(Y,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);this._sRangeType=Y}return this};sap.suite.ui.commons.DateRangeScroller.prototype.setDateRangeCustom=function(i,d){if(d===undefined){d=this._iCustomDuration}else if(d&&!isNaN(d)){d=parseInt(d,10)}if(sap.suite.ui.commons.util.DateUtils.isValidDate(i)&&sap.suite.ui.commons.DateRangeScroller.isValidDuration(d)){this._oDateRange.startDate.setTime(i.getTime());this._oDateRange.endDate.setTime(i.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(this._oDateRange.startDate);sap.suite.ui.commons.DateRangeScroller.adjustDateByStep(this._oDateRange.endDate,d-1);sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(C,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);this._sRangeType=C;this._iCustomDuration=d}return this};sap.suite.ui.commons.DateRangeScroller.prototype.incrementDateRange=function(){switch(this._sRangeType){case(D):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,1);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(D,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(W):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,w);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(W,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(C):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,this._iCustomDuration);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(C,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(M):var s=this._oDateRange.startDate.getMonth()+1;this._oDateRange.startDate.setMonth(s);this._oDateRange.endDate.setTime(this._oDateRange.startDate.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(M,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(Y):s=this._oDateRange.startDate.getFullYear()+1;this._oDateRange.startDate.setFullYear(s);this._oDateRange.endDate.setTime(this._oDateRange.startDate.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfYear(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(Y,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break}var c=this.getDateRange();this.fireChange({dateRange:c});return this};sap.suite.ui.commons.DateRangeScroller.prototype.decrementDateRange=function(){switch(this._sRangeType){case(D):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,-1);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(D,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(W):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,-w);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(W,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(C):sap.suite.ui.commons.DateRangeScroller.adjustRangeByStep(this._oDateRange,-this._iCustomDuration);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(C,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(M):var s=this._oDateRange.startDate.getMonth()-1;this._oDateRange.startDate.setMonth(s);this._oDateRange.endDate.setTime(this._oDateRange.startDate.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(M,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break;case(Y):s=this._oDateRange.startDate.getFullYear()-1;this._oDateRange.startDate.setFullYear(s);this._oDateRange.endDate.setTime(this._oDateRange.startDate.getTime());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfYear(this._oDateRange.endDate);sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(Y,this._oDateRange,this._oDateRangeLabel,this._oDateFormat);break}var c=this.getDateRange();this.fireChange({dateRange:c});return this};sap.suite.ui.commons.DateRangeScroller.prototype.getDateRange=function(){var c={startDate:new Date(this._oDateRange.startDate.getTime()),endDate:new Date(this._oDateRange.endDate.getTime())};return c};sap.suite.ui.commons.DateRangeScroller.prototype.setDateFormat=function(d){if(d&&d instanceof sap.ui.core.format.DateFormat){this._oDateFormat=d}else{this._oDateFormat=null}sap.suite.ui.commons.DateRangeScroller.updateDateRangeValue(this._sRangeType,this._oDateRange,this._oDateRangeLabel,this._oDateFormat)};sap.suite.ui.commons.DateRangeScroller.prototype.onclick=function(e){switch(e.target){case jQuery.sap.byId(this.getId()+'-decrementScrollButton')[0]:this.decrementDateRange();break;case jQuery.sap.byId(this.getId()+'-incrementScrollButton')[0]:this.incrementDateRange();break}jQuery.sap.byId(this.getId()+"-labelarea").focus()};sap.suite.ui.commons.DateRangeScroller.prototype.onsapright=function(e){this.incrementDateRange();e.preventDefault();e.stopPropagation()};sap.suite.ui.commons.DateRangeScroller.prototype.onsapleft=function(e){this.decrementDateRange();e.preventDefault();e.stopPropagation()};sap.suite.ui.commons.DateRangeScroller.prototype.onsapup=function(e){this.incrementDateRange();e.preventDefault();e.stopPropagation()};sap.suite.ui.commons.DateRangeScroller.prototype.onsapdown=function(e){this.decrementDateRange();e.preventDefault();e.stopPropagation()}}())};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeSlider')){jQuery.sap.declare("sap.suite.ui.commons.DateRangeSlider");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.DateRangeSlider",{metadata:{library:"sap.suite.ui.commons",properties:{"width":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},"enabled":{type:"boolean",group:"Appearance",defaultValue:true},"editable":{type:"boolean",group:"Behavior",defaultValue:true},"visible":{type:"boolean",group:"Misc",defaultValue:true},"showBubbles":{type:"boolean",group:"Misc",defaultValue:true},"smallStepWidth":{type:"float",group:"Appearance",defaultValue:null},"totalUnits":{type:"int",group:"Appearance",defaultValue:null},"stepLabels":{type:"boolean",group:"Misc",defaultValue:false},"labels":{type:"string[]",group:"Misc",defaultValue:null},"min":{type:"object",group:"Behavior",defaultValue:null},"max":{type:"object",group:"Behavior",defaultValue:null},"value":{type:"object",group:"Behavior",defaultValue:null},"value2":{type:"object",group:"Behavior",defaultValue:null},"pinGrip":{type:"boolean",group:"Misc",defaultValue:false},"pinGrip2":{type:"boolean",group:"Misc",defaultValue:false}},events:{"change":{},"liveChange":{}}}});sap.suite.ui.commons.DateRangeSlider.M_EVENTS={'change':'change','liveChange':'liveChange'};jQuery.sap.require('jquery.sap.resources');(function(){var D="d";var M="m";sap.suite.ui.commons.DateRangeSlider.areDaysSameBasedOnGranularity=function(f,s,g){var S=false;switch(g){case(D):S=sap.suite.ui.commons.util.DateUtils.dateDaysEqual(f,s);break;case(M):S=sap.suite.ui.commons.util.DateUtils.dateMonthsEqual(f,s);break}return S};sap.suite.ui.commons.DateRangeSlider.isMinBeforeMax=function(m,d,g){var b=false;if(m.getFullYear()<d.getFullYear()){b=true}else if(m.getFullYear()===d.getFullYear()){if(m.getMonth()<d.getMonth()){b=true}else if(m.getMonth()===d.getMonth()&&g===D){if(m.getDate()<d.getDate()){b=true}}}if(!b){jQuery.sap.log.error("DateRangeSlider: Min Date = "+m+" should be before Max Date = "+d)}return b};sap.suite.ui.commons.DateRangeSlider.isValueEqualOrAfterMin=function(m,v,g){var V=false;if(m.getFullYear()<v.getFullYear()){V=true}else if(m.getFullYear()===v.getFullYear()){if(m.getMonth()<v.getMonth()){V=true}else if(m.getMonth()===v.getMonth()&&g===M){V=true}else if(m.getMonth()===v.getMonth()&&g===D){if(m.getDate()<=v.getDate()){V=true}}}if(!V){jQuery.sap.log.error("DateRangeSlider: Value Date = "+v+" should be after or equal to Min Date = "+m)}return V};sap.suite.ui.commons.DateRangeSlider.isValue2EqualOrBeforeMax=function(v,m,g){var V=false;if(v.getFullYear()<m.getFullYear()){V=true}else if(v.getFullYear()===m.getFullYear()){if(v.getMonth()<m.getMonth()){V=true}else if(v.getMonth()===m.getMonth()&&g===M){V=true}else if(v.getMonth()===m.getMonth()&&g===D){if(v.getDate()<=m.getDate()){V=true}}}if(!V){jQuery.sap.log.error("DateRangeSlider: Value2 Date = "+v+" should be before or equal to Max Date = "+m)}return V};sap.suite.ui.commons.DateRangeSlider.isValueBeforeOrEqualValue2=function(v,V,g){var b=false;if(v.getFullYear()<V.getFullYear()){b=true}else if(v.getFullYear()===V.getFullYear()){if(v.getMonth()<V.getMonth()){b=true}else if(v.getMonth()===V.getMonth()&&g===M){b=true}else if(v.getMonth()===V.getMonth()&&g===D){if(v.getDate()<=V.getDate()){b=true}}}if(!b){jQuery.sap.log.error("DateRangeSlider: Value Date = "+v+" should be before or equal to Value2 Date = "+V)}return b};sap.suite.ui.commons.DateRangeSlider.prototype.setMin=function(m){if(sap.suite.ui.commons.util.DateUtils.isValidDate(m)&&sap.suite.ui.commons.DateRangeSlider.isMinBeforeMax(m,new Date(this.getMax()),this._sGranularity)&&!sap.suite.ui.commons.DateRangeSlider.areDaysSameBasedOnGranularity(new Date(this.getMin()),m,this._sGranularity)){sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(m);this._oDateRangeSliderInternal.setMinDate(m);sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this)}};sap.suite.ui.commons.DateRangeSlider.prototype.setMax=function(m){if(sap.suite.ui.commons.util.DateUtils.isValidDate(m)&&sap.suite.ui.commons.DateRangeSlider.isMinBeforeMax(new Date(this.getMin()),m,this._sGranularity)&&!sap.suite.ui.commons.DateRangeSlider.areDaysSameBasedOnGranularity(new Date(this.getMax()),m,this._sGranularity)){sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(m);this._oDateRangeSliderInternal.setMaxDate(m);sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this)}};sap.suite.ui.commons.DateRangeSlider.prototype.setValue=function(v){if(sap.suite.ui.commons.util.DateUtils.isValidDate(v)&&sap.suite.ui.commons.DateRangeSlider.isValueBeforeOrEqualValue2(v,new Date(this.getValue2()),this._sGranularity)&&sap.suite.ui.commons.DateRangeSlider.isValueEqualOrAfterMin(new Date(this.getMin()),v,this._sGranularity)&&!sap.suite.ui.commons.DateRangeSlider.areDaysSameBasedOnGranularity(new Date(this.getValue()),v,this._sGranularity)){sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(v);this._oDateRangeSliderInternal.setValueDate(v);sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this)}};sap.suite.ui.commons.DateRangeSlider.prototype.getValue=function(){var v=this._oDateRangeSliderInternal.getValueDate();return v};sap.suite.ui.commons.DateRangeSlider.prototype.setValue2=function(v){if(sap.suite.ui.commons.util.DateUtils.isValidDate(v)&&sap.suite.ui.commons.DateRangeSlider.isValueBeforeOrEqualValue2(new Date(this.getValue()),v,this._sGranularity)&&!sap.suite.ui.commons.DateRangeSlider.areDaysSameBasedOnGranularity(new Date(this.getValue2()),v,this._sGranularity)&&sap.suite.ui.commons.DateRangeSlider.isValue2EqualOrBeforeMax(v,new Date(this.getMax()),this._sGranularity)){sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(v);this._oDateRangeSliderInternal.setValue2Date(v);sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this)}};sap.suite.ui.commons.DateRangeSlider.prototype.getValue2=function(){var v=this._oDateRangeSliderInternal.getValue2Date();return v};sap.suite.ui.commons.DateRangeSlider.prototype.setVisible=function(v){this._oDateRangeSliderInternal.setVisible(v);this.setProperty("visible",v)};sap.suite.ui.commons.DateRangeSlider.prototype.setEnabled=function(e){this._oDateRangeSliderInternal.setEnabled(e);this.setProperty("enabled",e)};sap.suite.ui.commons.DateRangeSlider.prototype.setLabels=function(l){this._oDateRangeSliderInternal.setLabels(l);this.setProperty("labels",l)};sap.suite.ui.commons.DateRangeSlider.prototype.setStepLabels=function(s){this._oDateRangeSliderInternal.setStepLabels(s);this.setProperty("stepLabels",s)};sap.suite.ui.commons.DateRangeSlider.prototype.setEditable=function(e){this._oDateRangeSliderInternal.setEditable(e);this.setProperty("editable",e)};sap.suite.ui.commons.DateRangeSlider.prototype.setWidth=function(t){this._oDateRangeSliderInternal.setWidth(t);this.setProperty("width",t)};sap.suite.ui.commons.DateRangeSlider.prototype.setShowBubbles=function(s){this._oDateRangeSliderInternal.setShowBubbles(s);this.setProperty("showBubbles",s)};sap.suite.ui.commons.DateRangeSlider.prototype.setSmallStepWidth=function(s){this._oDateRangeSliderInternal.setSmallStepWidth(s);this.setProperty("smallStepWidth",s)};sap.suite.ui.commons.DateRangeSlider.prototype.setTotalUnits=function(t){this._oDateRangeSliderInternal.setTotalUnits(t);this.setProperty("totalUnits",t)};sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal=function(d){d.setProperty("min",d._oDateRangeSliderInternal.getMinDate());d.setProperty("max",d._oDateRangeSliderInternal.getMaxDate());d.setProperty("value",d._oDateRangeSliderInternal.getValueDate());d.setProperty("value2",d._oDateRangeSliderInternal.getValue2Date());d._sGranularity=d._oDateRangeSliderInternal._sGranularity};sap.suite.ui.commons.DateRangeSlider.prototype.setDayGranularity=function(){this._oDateRangeSliderInternal.setDayGranularity();if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender()}sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this);return this};sap.suite.ui.commons.DateRangeSlider.prototype.setMonthGranularity=function(){var m=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(this.getMin(),this.getMax());if(m>=1){this._oDateRangeSliderInternal.setMonthGranularity();if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender()}sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this)}else{jQuery.sap.log.error("DateRangeSlider.setMonthGranularity(): Max Date should be 1 month after Min Date.")}return this};sap.suite.ui.commons.DateRangeSlider.prototype.setDateFormat=function(d){this._oDateRangeSliderInternal.setDateFormat(d);if(this._oDateRangeSliderInternal.isActive()){this._oDateRangeSliderInternal.rerender()}};sap.suite.ui.commons.DateRangeSlider.prototype.setPinGrip=function(p){this._oDateRangeSliderInternal.setPinGrip(p);this.setProperty("pinGrip",p)};sap.suite.ui.commons.DateRangeSlider.prototype.setPinGrip2=function(p){this._oDateRangeSliderInternal.setPinGrip2(p);this.setProperty("pinGrip2",p)};sap.suite.ui.commons.DateRangeSlider.prototype.exit=function(){this._oDateRangeSliderInternal.destroy();this._oDateRangeSliderInternal=null};sap.suite.ui.commons.DateRangeSlider.prototype.init=function(){this._oDateRangeSliderInternal=new sap.suite.ui.commons.DateRangeSliderInternal({id:this.getId()+"-dateRangeSliderInternal"});sap.suite.ui.commons.DateRangeSlider.setPropertiesBasedOnSliderInternal(this);var s=this;this._oDateRangeSliderInternal.attachChange(function(e){s.handleChange(e)});this._oDateRangeSliderInternal.attachLiveChange(function(e){s.handleLiveChange(e)})};sap.suite.ui.commons.DateRangeSlider.prototype.handleChange=function(e){var v=e.getParameter("value");var V=e.getParameter("value2");this.fireChange({value:v,value2:V})};sap.suite.ui.commons.DateRangeSlider.prototype.handleLiveChange=function(e){var v=e.getParameter("value");var V=e.getParameter("value2");this.fireLiveChange({value:v,value2:V})}}())};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.DateRangeSliderInternal')){jQuery.sap.declare("sap.suite.ui.commons.DateRangeSliderInternal");jQuery.sap.require('sap.ui.commons.RangeSlider');sap.ui.commons.RangeSlider.extend("sap.suite.ui.commons.DateRangeSliderInternal",{metadata:{library:"sap.suite.ui.commons",properties:{"showBubbles":{type:"boolean",group:"Misc",defaultValue:true},"pinGrip":{type:"boolean",group:"Misc",defaultValue:false},"pinGrip2":{type:"boolean",group:"Misc",defaultValue:false}},events:{"change":{},"liveChange":{}}}});sap.suite.ui.commons.DateRangeSliderInternal.M_EVENTS={'change':'change','liveChange':'liveChange'};jQuery.sap.require('sap.ui.commons.RangeSlider');jQuery.sap.require('jquery.sap.resources');jQuery.sap.require('sap.ui.core.format.DateFormat');jQuery.sap.require('sap.ui.core.ResizeHandler');jQuery.sap.require('sap.ui.commons.Label');(function(){var D=12;var a="d";var M="m";sap.suite.ui.commons.DateRangeSliderInternal.prototype.setVertical=function(v){jQuery.sap.log.error("DateRangeSliderInternal.setVertical method is not yet supported!")};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setHeight=function(h){jQuery.sap.log.error("DateRangeSliderInternal.setHeight method is not yet supported!")};sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels=function(d){var r=[];var t=d.getTotalUnits();var s=(d.getMax()-d.getMin())/t;for(var i=0;i<=t;i++){var b=Math.round(parseFloat(d.getMin()+i*s));if(b>d.getMax()){b=d.getMax()}var T=null;if(d._sGranularity===a){T=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(d.getMinDate(),b)}else if(d._sGranularity===M){T=sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex(d.getMinDate(),b)}r[i]=d.getFormattedDate(T)}d.setProperty("labels",r);return r};sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles=function(d){var g=d.getId()+'-grip';var G=jQuery.sap.domById(g);var l=G.style.left;var L=l.substring(0,l.length-2);var i=parseInt(L,10);var s=d.getId()+'-grip2';var o=jQuery.sap.domById(s);var b=o.style.left;var c=b.substring(0,b.length-2);var e=parseInt(c,10);var B=d.getId()+'-bubble';var f=jQuery.sap.domById(B);var h=d.getId()+'-bubble2';var j=jQuery.sap.domById(h);var k=null,m=null;var n=f.style.left;if(n){k=n.substring(0,n.length-2)}var p=j.style.left;if(p){m=p.substring(0,p.length-2)}var w=jQuery(f).css("width");var W=parseInt(w,10);var q=41;if((i+W)<e){f.style.left=(i-q)+"px";j.style.left=(e-q)+"px"}if(!k&&!m){f.style.left=(i-q)+"px";j.style.left=(e-q)+"px"}var v=d.getFormattedDate(d.getValueDate());var V=d.getFormattedDate(d.getValue2Date());d._oBubble.setText(v);d._oBubble2.setText(V);if(d.isActive()){d._oBubble.rerender();d._oBubble2.rerender()}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.changeGrip=function(n,N,g){sap.ui.commons.Slider.prototype.changeGrip.apply(this,arguments);if(!isNaN(n)){var d=Math.round(n);var t=null;if(this._sGranularity===a){t=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(this._dMinDate,d)}else if(this._sGranularity===M){t=sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex(this._dMinDate,d)}g.title=this.getFormattedDate(t)}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getFormattedDate=function(d){var f=null;switch(this._sGranularity){case(a):f=this._oDateFormat||sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});break;case(M):f=this._oDateFormat||sap.ui.core.format.DateFormat.getDateInstance({pattern:'MMM YYYY'});break}return f.format(d)};sap.suite.ui.commons.DateRangeSliderInternal.updateLabelBubbleToolTipValues=function(d){if(d._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(d)}if(d.getShowBubbles()){var v=d.getFormattedDate(d.getValueDate());var V=d.getFormattedDate(d.getValue2Date());d._oBubble.setText(v);d._oBubble2.setText(V)}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getDateFormat=function(){return this._oDateFormat};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setDateFormat=function(d){if(d&&d instanceof sap.ui.core.format.DateFormat){this._oDateFormat=d}else{this._oDateFormat=null}sap.suite.ui.commons.DateRangeSliderInternal.updateLabelBubbleToolTipValues(this)};sap.suite.ui.commons.DateRangeSliderInternal.prototype.init=function(){this.setSmallStepWidth(1);this._sGranularity=a;this._oDateFormat=null;var m=new Date();this._dMinDate=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(m,-365);if(!this.getTotalUnits()){this.setTotalUnits(D)}this.setMin(0);this.setMax(365);this.setValue(0);this.setValue2(365);var t=(this.getLabels()&&this.getLabels().length>0);this._bUsingDefaultLabels=this.getStepLabels()&&!t;if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}if(this.getShowBubbles()){this._oBubble=new sap.ui.commons.Label({id:this.getId()+'-bubbleTxt'});this._oBubble2=new sap.ui.commons.Label({id:this.getId()+'-bubbleTxt2'});this._oBubble.addStyleClass("sapSuiteUiCommonsDateRangeSliderBubbleLblTxt");this._oBubble2.addStyleClass("sapSuiteUiCommonsDateRangeSliderBubbleLblTxt");this._oBubble.setText(this.getFormattedDate(this.getValueDate()));this._oBubble2.setText(this.getFormattedDate(this.getValue2Date()))}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getDateRange=function(){var v=this.getValueDate();var V=this.getValue2Date();var c={valueDate:v,value2Date:V};return c};sap.suite.ui.commons.DateRangeSliderInternal.prototype.handleFireChange=function(){if(this.getShowBubbles()){sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles(this)}var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date});this.fireLiveChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.handleFireChangeWithoutLive=function(){if(this.getShowBubbles()){sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles(this)}var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.fireLiveChangeForGrip=function(g,n,o){if(this.getShowBubbles()&&o!==n){sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles(this)}var r;if(g===this.oGrip){if(o!==n){r=this.getDateRange();this.fireLiveChange({value:r.valueDate,value2:r.value2Date})}}else if(g===this.oGrip2){if(o!==n){r=this.getDateRange();this.fireLiveChange({value:r.valueDate,value2:r.value2Date})}}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onAfterRendering=function(){sap.ui.commons.RangeSlider.prototype.onAfterRendering.apply(this);if(this.getShowBubbles()){sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles(this)}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onresize=function(e){sap.ui.commons.RangeSlider.prototype.onresize.apply(this,arguments);if(this.getDomRef()){if(this.getShowBubbles()){sap.suite.ui.commons.DateRangeSliderInternal.repositionBubbles(this)}}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setStepLabels=function(s){this.setProperty("stepLabels",s);if(s===true){var t=(this.getLabels()&&this.getLabels().length>0);if(!t){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this);this._bUsingDefaultLabels=true}}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setLabels=function(l){this.setProperty("labels",l);var t=(this.getLabels()&&this.getLabels().length>0);if(this.getStepLabels()&&!t){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this);this._bUsingDefaultLabels=true}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setSmallStepWidth=function(s){this.setProperty("smallStepWidth",Math.round(s))};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setTotalUnits=function(t){this.setProperty("totalUnits",t);if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getMaxDate=function(){var m=null;switch(this._sGranularity){case(a):m=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(this._dMinDate,this.getMax());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(m);break;case(M):m=sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex(this._dMinDate,this.getMax());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(m);break}return m};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setMaxDate=function(m){var d=this.getMinDate();var v=this.getValueDate();var V=this.getValue2Date();var f=false;var n=0,N=0,i=0;switch(this._sGranularity){case(a):n=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(d,m);N=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(d,v);i=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(d,V);break;case(M):n=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(d,m);N=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(d,v);i=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(d,V);break}f=N>n||i>n;N=N>n?n:N;i=i>n?n:i;this.setProperty('min',0,true);this.setProperty('max',n,true);this.setProperty('value',N,true);this.setProperty('value2',i,true);if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}if(f){var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getMinDate=function(){var m=new Date(this._dMinDate);switch(this._sGranularity){case(a):sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(m);break;case(M):sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(m);break}return m};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setMinDate=function(m){var d=this.getMaxDate();var v=this.getValueDate();var V=this.getValue2Date();this._dMinDate=new Date(m);var f=false;var n=0,N=0,i=0;switch(this._sGranularity){case(a):n=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,d);N=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,v);i=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,V);break;case(M):n=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,d);N=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,v);i=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,V);break}f=N<0||i<0;N=N<0?0:N;i=i<0?0:i;this.setProperty('min',0,true);this.setProperty('max',n,true);this.setProperty('value',N,true);this.setProperty('value2',i,true);if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}if(f){var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getValue2Date=function(){var v=null;switch(this._sGranularity){case(a):v=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(this._dMinDate,this.getValue2());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfDay(v);break;case(M):v=sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex(this._dMinDate,this.getValue2());sap.suite.ui.commons.util.DateUtils.resetDateToEndOfMonth(v);break}return v};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setValue2Date=function(v){var n=0;switch(this._sGranularity){case(a):n=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(this._dMinDate,v);break;case(M):n=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(this._dMinDate,v);break}this.setProperty('value2',n,true);var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.getValueDate=function(){var v=null;switch(this._sGranularity){case(a):v=sap.suite.ui.commons.util.DateUtils.incrementDateByIndex(this._dMinDate,this.getValue());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfDay(v);break;case(M):v=sap.suite.ui.commons.util.DateUtils.incrementMonthByIndex(this._dMinDate,this.getValue());sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(v);break}return v};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setValueDate=function(v){var n=0;switch(this._sGranularity){case(a):n=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(this._dMinDate,v);break;case(M):n=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(this._dMinDate,v);break}this.setProperty('value',n,true);var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setDayGranularity=function(){var m=this.getMinDate();var v=this.getValueDate();var V=this.getValue2Date();var d=this.getMaxDate();var n=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,v);var N=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,V);var i=sap.suite.ui.commons.util.DateUtils.numberOfDaysApart(m,d);this.setProperty('min',0,true);this.setProperty('value',n,true);this.setProperty('value2',N,true);this.setProperty('max',i,true);this._sGranularity=a;if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.setMonthGranularity=function(){var m=this.getMinDate();var v=this.getValueDate();var V=this.getValue2Date();var d=this.getMaxDate();var n=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,v);var N=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,V);var i=sap.suite.ui.commons.util.DateUtils.numberOfMonthsApart(m,d);this.setProperty('min',0,true);this.setProperty('value',n,true);this.setProperty('value2',N,true);this.setProperty('max',i,true);this._sGranularity=M;sap.suite.ui.commons.util.DateUtils.resetDateToStartOfMonth(this._dMinDate);if(this._bUsingDefaultLabels){sap.suite.ui.commons.DateRangeSliderInternal.createRailLabels(this)}var r=this.getDateRange();this.fireChange({value:r.valueDate,value2:r.value2Date})};sap.suite.ui.commons.DateRangeSliderInternal.prototype.handleMove=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.handleMove.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsapend=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsapend.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsaphome=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsaphome.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsaprightmodifiers=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsaprightmodifiers.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsapleftmodifiers=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsapleftmodifiers.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsapright=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsapright.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onsapleft=function(e){if((this.oMovingGrip===this.oGrip2&&!this.getPinGrip2())||(this.oMovingGrip===this.oGrip&&!this.getPinGrip())){sap.ui.commons.RangeSlider.prototype.onsapleft.apply(this,[e])}};sap.suite.ui.commons.DateRangeSliderInternal.prototype.onclick=function(e){var m=this.oMovingGrip;if(this.getEditable()&&this.getEnabled()){var f;var s=e.target.getAttribute('ID');var n=this.getValue();var N=this.getOffsetLeft(this.oGrip)+this.iShiftGrip;switch(s){case(this.oBar.id):case(this.oHiLi.id):if(this.getVertical()){f=this.getBarWidth()-this.getOffsetX(e)}else{f=this.getOffsetX(e)}if(s==this.oHiLi.id){if(this.getVertical()){f-=this.getOffsetLeft(this.oHiLi)}else{f+=this.getOffsetLeft(this.oHiLi)}}n=this.convertRtlValue(this.getMin()+(((this.getMax()-this.getMin())/this.getBarWidth())*f));N=this.getOffsetX(e);if(s==this.oHiLi.id){N+=this.getOffsetLeft(this.oHiLi)}if(this.oStartTarget&&this.targetIsGrip(this.oStartTarget.id)){m=this.oStartTarget}else if(this.targetIsGrip(s)){m=e.target}else{m=this.getNearestGrip(N)}break;case(this.getId()+'-left'):N=0;if(this.getVertical()){n=this.getMax();m=this.getRightGrip()}else{n=this.getMin();m=this.getLeftGrip()}break;case(this.getId()+'-right'):N=this.getBarWidth();if(!this.getVertical()){n=this.getMax();m=this.getRightGrip()}else{n=this.getMin();m=this.getLeftGrip()}break;default:if(this.targetIsGrip(s)){return}var t=s.search('-tick');if(t>=0){var T=parseInt(s.slice(this.getId().length+5),10);N=this.fTickDist*T;n=this.convertRtlValue(this.getMin()+(((this.getMax()-this.getMin())/this.getTotalUnits())*T));if(this.oStartTarget&&this.targetIsGrip(this.oStartTarget.id)){m=this.oStartTarget}else if(this.targetIsGrip(s)){m=e.target}else{m=this.getNearestGrip(N)}break}var o=jQuery(this.oBar).offset();var O=jQuery(e.target).offset();if(this.getVertical()){N=this.getOffsetX(e)-(o.top-O.top)}else{N=this.getOffsetX(e)-(o.left-O.left)}if(N<=0){N=0;if(this.getVertical()){n=this.getMax()}else{n=this.getMin()}}else{if(N>=this.getBarWidth()){N=this.getBarWidth();if(this.getVertical()){n=this.getMin()}else{n=this.getMax()}}else{if(this.getVertical()){f=this.getBarWidth()-N}else{f=N}n=this.getMin()+(((this.getMax()-this.getMin())/this.getBarWidth())*f)}}n=this.convertRtlValue(n);if(this.oStartTarget&&this.targetIsGrip(this.oStartTarget.id)){m=this.oStartTarget}else if(this.targetIsGrip(s)){m=e.target}else{m=this.getNearestGrip(N)}break}if((m===this.oGrip2&&this.getPinGrip2())||(m===this.oGrip&&this.getPinGrip())){return}var v=this.validateNewPosition(n,N,m,(this.getValueForGrip(m)>n));n=v.fNewValue;N=v.iNewPos;this.changeGrip(n,N,m);this.handleFireChange()}m.focus();this.oMovingGrip=m;this.oStartTarget=null}}())};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTaker')){jQuery.sap.declare("sap.suite.ui.commons.NoteTaker");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.NoteTaker",{metadata:{publicMethods:["getAllTags","setNextCardUid","uploadAttachment","setAttachmentData","handleAttachmentUploadFail","setNextCardAttachmentUrl"],library:"sap.suite.ui.commons",properties:{"visibleNotes":{type:"int",group:"Misc",defaultValue:2},"cardViewAllTrigger":{type:"int",group:"Misc",defaultValue:1800},"filterCriteria":{type:"object",group:"Misc",defaultValue:null},"attachmentUploadUrl":{type:"string",group:"Misc",defaultValue:null},"attachmentName":{type:"string",group:"Misc",defaultValue:'attachment'}},aggregations:{"cards":{type:"sap.suite.ui.commons.NoteTakerCard",multiple:true,singularName:"card"},"carousel":{type:"sap.ui.commons.Carousel",multiple:false,visibility:"hidden"}},events:{"addCard":{},"deleteCard":{},"editCard":{},"attachmentSelect":{},"attachmentUploadComplete":{},"attachmentDelete":{},"attachmentClick":{}}}});sap.suite.ui.commons.NoteTaker.M_EVENTS={'addCard':'addCard','deleteCard':'deleteCard','editCard':'editCard','attachmentSelect':'attachmentSelect','attachmentUploadComplete':'attachmentUploadComplete','attachmentDelete':'attachmentDelete','attachmentClick':'attachmentClick'};jQuery.sap.require('sap.ui.commons.Carousel');jQuery.sap.require('sap.ui.commons.SearchField');(function(){sap.suite.ui.commons.NoteTaker.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._bFilterTagPopupOpen=false;this._bSearchPopupOpen=false;var t=this;this._carousel=new sap.ui.commons.Carousel({id:this.getId()+"-carousel",height:"540px"});this.setAggregation("carousel",this._carousel);this._carousel.addContent(this._createFeederAndAddToThis());this._notFilteredCards=[];this._oHomeButton=new sap.ui.commons.Button({id:this.getId()+"-home-button",tooltip:this._rb.getText("NOTETAKER_BUTTON_HOME_TOOLTIP"),press:function(){t._handleHomeButton()}});this._oHomeButton.addStyleClass("sapSuiteUiCommonsNoteTakerHomeButton");this._oFilterTagButton=new sap.ui.commons.Button({id:this.getId()+"-filterTag-button",tooltip:this._rb.getText("NOTETAKER_BUTTON_FILTER_TAG_TOOLTIP"),press:function(){t._toggleFilterTagPopup()}});this._oFilterTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterTagButton");this._oFilterThumbUpButton=new sap.ui.commons.Button({id:this.getId()+"-filter-thumb-up-button",tooltip:this._rb.getText("NOTETAKER_BUTTON_FILTER_THUMB_UP_TOOLTIP"),press:function(){t._handleFilteringByThumbUp()}});this._oFilterThumbUpButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterThumbUpButton");this._oFilterThumbDownButton=new sap.ui.commons.Button({id:this.getId()+"-filter-thumb-down-button",tooltip:this._rb.getText("NOTETAKER_BUTTON_FILTER_THUMB_DOWN_TOOLTIP"),press:function(){t._handleFilteringByThumbDown()}});this._oFilterThumbDownButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterThumbDownButton");this._oFilterAllButton=new sap.ui.commons.Button({id:this.getId()+"-filterAll-button",text:this._rb.getText("NOTETAKER_BUTTON_FILTER_ALL_TEXT"),tooltip:this._rb.getText("NOTETAKER_BUTTON_FILTER_ALL_TOOLTIP"),press:function(){t._handleResetFilters()}});this._oFilterAllButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterAllButton");this._oSearchButton=new sap.ui.commons.Button({id:this.getId()+"-filter-search-button",tooltip:this._rb.getText("NOTETAKER_BUTTON_SEARCH_TOOLTIP"),press:function(){t._handleSearchPopup()}});this._oSearchButton.addStyleClass("sapSuiteUiCommonsNoteTakerSearchBtn");this._oFilterSearchField=new sap.ui.commons.SearchField({id:this.getId()+"-filter-searchField",tooltip:this._rb.getText("NOTETAKER_BUTTON_SEARCH_TOOLTIP"),showListExpander:false,enableFilterMode:true,enableListSuggest:false,search:function(e){t._handleSearchingByText(e.getParameter("query"))}});this._oFilterSearchField.addStyleClass("suiteUiNtFilterSearchField");this._oFilterTagList=new sap.ui.commons.ListBox({id:this.getId()+"-filterTag-listBox",allowMultiSelect:true,visibleItems:10,width:"100%",height:"194px"});this._oCancelFilterTagButton=new sap.ui.commons.Button({id:this.getId()+"-cancel-filterTags-button",text:this._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS"),tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS_TOOLTIP"),press:function(){t._toggleFilterTagPopup()}});this._oCancelFilterTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerCancelFilterTagButton");this._oApplyFilterTagButton=new sap.ui.commons.Button({id:this.getId()+"-apply-filterTags-button",text:this._rb.getText("NOTETAKER_BUTTON_FILTER_TAG_APPLY_TEXT"),tooltip:this._rb.getText("NOTETAKER_BUTTON_FILTER_TAG_APPLY_TOOLTIP"),press:function(){t._toggleFilterTagPopup();setTimeout(function(){t._handleFilteringByTags()},400)}})};sap.suite.ui.commons.NoteTaker.prototype.onBeforeRendering=function(){this._carousel.setVisibleItems(this.getVisibleNotes());this._adjustFilteringButtonsStyle();this._feeder.setAttachmentName(this.getAttachmentName())};sap.suite.ui.commons.NoteTaker.prototype.onAfterRendering=function(){this._adjustPopupState();if(!this.getAttachmentUploadUrl()){jQuery.sap.byId(this._feeder._oAddAttachButton.getId()).hide()};jQuery.sap.byId(this._oFilterThumbUpButton.getId()).attr("aria-pressed",this.getFilterCriteria()&&this.getFilterCriteria().thumbUp);jQuery.sap.byId(this._oFilterThumbDownButton.getId()).attr("aria-pressed",this.getFilterCriteria()&&this.getFilterCriteria().thumbDown)};sap.suite.ui.commons.NoteTaker.prototype.exit=function(){this.destroyAggregation("carousel",true);this._carousel=null;this._oHomeButton.destroy();this._oHomeButton=null;this._oFilterTagButton.destroy();this._oFilterTagButton=null;this._oFilterThumbUpButton.destroy();this._oFilterThumbUpButton=null;this._oFilterThumbDownButton.destroy();this._oFilterThumbDownButton=null;this._oFilterAllButton.destroy();this._oFilterAllButton=null;this._oFilterTagList.destroy();this._oFilterTagList=null;this._oCancelFilterTagButton.destroy();this._oCancelFilterTagButton=null;this._oApplyFilterTagButton.destroy();this._oApplyFilterTagButton=null;this._oFilterSearchField.destroy();this._oFilterSearchField=null;this._oSearchButton.destroy();this._oSearchButton=null};sap.suite.ui.commons.NoteTaker.prototype._handleAddNote=function(e){var t=e.getParameter("title");var b=e.getParameter("body");var a=e.getParameter("timestamp");var c=e.getParameter("tags");var d=e.getParameter("thumbUp");var f=e.getParameter("thumbDown");var g=e.getParameter("attachmentFilename");var h={};h.title=t;h.body=b;h.timestamp=a;h.viewAllTrigger=this.getCardViewAllTrigger();h.tags=c;h.thumbUp=d;h.thumbDown=f;h.attachmentFilename=g;h.uid=this._nextCardUid;h.attachmentUrl=this._nextCardAttachmentUrl;var B=this.getBinding("cards");if(B){this.fireAddCard(h);var T=new sap.ui.model.Sorter("timestamp",true);B.sort(T)}else{var n=new sap.suite.ui.commons.NoteTakerCard();n.setBody(b);n.setHeader(t);n.setTimestamp(a);n.setViewAllTrigger(this.getCardViewAllTrigger());n.setTags(c);n.setThumbUp(d);n.setThumbDown(f);n.setAttachmentFilename(g);n.setUid(this._nextCardUid);n.setAttachmentUrl(this._nextCardAttachmentUrl);this.insertCard(n,0);this.fireAddCard(h)}this._nextCardUid=null;this._nextCardAttachmentUrl=null;this._filter()};sap.suite.ui.commons.NoteTaker.prototype.addCard=function(c){this._addDeleteDelegate(c);this._addEditDelegate(c);this._addAttachmentDelegate(c);this.getNotFilteredCards().push(c);var r=this._carousel.addContent(c);this._sortIfNeeded();this._spreadTagList();return r};sap.suite.ui.commons.NoteTaker.prototype.getCards=function(){return this._carousel.getContent().slice(1)};sap.suite.ui.commons.NoteTaker.prototype.insertCard=function(c,i){this._addDeleteDelegate(c);this._addEditDelegate(c);this._addAttachmentDelegate(c);this.getNotFilteredCards().push(c);var r=this._carousel.insertContent(c,++i);this._spreadTagList();return r};sap.suite.ui.commons.NoteTaker.prototype.removeCard=function(c){this._spreadTagList();return this._carousel.removeContent(c)};sap.suite.ui.commons.NoteTaker.prototype.removeAllCards=function(){var c=this._carousel.removeAllContent();this._feeder.setTags([]);this._carousel.addContent(this._feeder);return c.slice(1)};sap.suite.ui.commons.NoteTaker.prototype.indexOfCard=function(c){var i=this._carousel.indexOfContent(c);return(i>0)?--i:-1};sap.suite.ui.commons.NoteTaker.prototype.destroyCards=function(){this._carousel.destroyContent();this._carousel.addContent(this._createFeederAndAddToThis());return this};sap.suite.ui.commons.NoteTaker.prototype._createFeederAndAddToThis=function(){var t=this;this._feeder=new sap.suite.ui.commons.NoteTakerFeeder({id:this.getId()+"-feeder",attachmentName:t.getAttachmentName(),addNote:function(e){t._handleAddNote(e)},attachmentUploadUrl:t.getAttachmentUploadUrl(),attachmentSelect:function(e){var a={filename:e.getParameter("filename")};t.fireAttachmentSelect(a)},attachmentUploadComplete:function(e){var a={response:e.getParameter("response"),uid:t._nextCardUid};t.fireAttachmentUploadComplete(a);this._oAttachmentLink.setHref(t._nextCardAttachmentUrl);this._oAttachmentLink.rerender()},attachmentDelete:function(e){var a={filename:e.getParameter("filename"),uid:t._nextCardUid};t.fireAttachmentDelete(a)},attachmentClick:function(e){var a={filename:e.getParameter("filename"),uid:t._nextCardUid,isCardAttachment:false};t.fireAttachmentClick(a)}});this._spreadTagList();return this._feeder};sap.suite.ui.commons.NoteTaker.prototype._sortIfNeeded=function(){var b=this.getBinding();if(b==undefined){var c=this.getCards();c.sort(function(C,o){return o.getTimestamp().getTime()-C.getTimestamp().getTime()});this.removeAllCards();for(var i=0;i<c.length;i++){this._carousel.addContent(c[i])}}};sap.suite.ui.commons.NoteTaker.prototype.getAllTags=function(){var b=this.getBinding("cards");var c=b?this.getCards():this.getNotFilteredCards();var t={};var r=[];for(var i=0;i<c.length;i++){var T=c[i].getTags();for(var j=0;j<T.length;j++){if(T[j]!=""){t[T[j]]=true}}}for(var a in t){r.push(a)}return r.sort()};sap.suite.ui.commons.NoteTaker.prototype._handleDeleteNote=function(e){var b=this.getBinding("cards");var a={};a.title=e.getParameter("title");a.timestamp=e.getParameter("timestamp");a.body=e.getParameter("body");a.uid=e.getParameter("uid");a.thumbUp=e.getParameter("thumbUp");a.thumbDown=e.getParameter("thumbDown");if(b){this.fireDeleteCard(a)}else{var c=e.getParameter("cardId");var d=this.getNotFilteredCards();for(var i=0;i<d.length;i++){if(d[i].getId()==c){d.splice(i,1)}}this.removeCard(c);this.fireDeleteCard(a)}};sap.suite.ui.commons.NoteTaker.prototype._handleEditNote=function(e){var a={};a.title=e.getParameter("title");a.timestamp=e.getParameter("timestamp");a.body=e.getParameter("body");a.uid=e.getParameter("uid");a.thumbUp=e.getParameter("thumbUp");a.thumbDown=e.getParameter("thumbDown");a.tags=e.getParameter("tags");this.fireEditCard(a);this._sortIfNeeded();this._spreadTagList()};sap.suite.ui.commons.NoteTaker.prototype._addDeleteDelegate=function(c){var t=this;c.attachDeleteNote(function(e){t._handleDeleteNote(e)})};sap.suite.ui.commons.NoteTaker.prototype._addEditDelegate=function(c){var t=this;c.attachEditNote(function(e){t._handleEditNote(e)})};sap.suite.ui.commons.NoteTaker.prototype._handleHomeButton=function(){this._carousel.setFirstVisibleIndex(0);this._feeder._focusDefaultControl()};sap.suite.ui.commons.NoteTaker.prototype.setFilterCriteria=function(f){this.setProperty("filterCriteria",f);this._filter()};sap.suite.ui.commons.NoteTaker.prototype._toggleFilterTagPopup=function(){if(this._bFilterTagPopupOpen){jQuery.sap.byId(this.getId()+"-filterTag-panel").slideToggle();this._bFilterTagPopupOpen=false}else{this._addTagsToFilterListBox(this.getAllTags());jQuery.sap.byId(this.getId()+"-filterTag-panel").slideToggle();this._oFilterTagList.focus();this._bFilterTagPopupOpen=true}};sap.suite.ui.commons.NoteTaker.prototype._addTagsToFilterListBox=function(t){var s=[];var f=this._getFilterTags();var l=jQuery.map(t,function(v,i){if(f.indexOf){if(f.indexOf(v)>=0){s.push(i)}}else{for(var k in f){if(f[k]==v){s.push(i);break}}}return new sap.ui.core.ListItem({text:v})});this._oFilterTagList.setItems(l,true);this._oFilterTagList.setSelectedIndices(s);this._oFilterTagList.rerender()};sap.suite.ui.commons.NoteTaker.prototype._cloneFilterCriteria=function(){var f=this.getFilterCriteria();var n={};if(f){for(var p in f){n[p]=f[p]}}return n};sap.suite.ui.commons.NoteTaker.prototype._handleFilteringByTags=function(){var f=this._cloneFilterCriteria();var s=this._oFilterTagList.getSelectedItems();var t=[];for(var i in s){t.push(s[i].getText())}f.tags=t;this.setFilterCriteria(f)};sap.suite.ui.commons.NoteTaker.prototype._handleFilteringByThumbUp=function(){var f=this._cloneFilterCriteria();f.thumbUp=!f.thumbUp;this.setFilterCriteria(f)};sap.suite.ui.commons.NoteTaker.prototype._handleFilteringByThumbDown=function(){var f=this._cloneFilterCriteria();f.thumbDown=!f.thumbDown;this.setFilterCriteria(f)};sap.suite.ui.commons.NoteTaker.prototype._handleResetFilters=function(){var f=this.getFilterCriteria();var n=null;if(f&&f.search&&f.search.length>0){n={};n.search=f.search}this.setFilterCriteria(n)};sap.suite.ui.commons.NoteTaker.prototype._handleSearchingByText=function(s){var f=this._cloneFilterCriteria();var S=[];var n=s.split(new RegExp("\\s+"));for(var i=0;i<n.length;i++){if(n[i].length>0){S.push(n[i])}}f.search=S;this.setFilterCriteria(f)};sap.suite.ui.commons.NoteTaker.prototype._adjustFilterTagButton=function(){var f=this._getFilterTags();if(f.length){this._oFilterTagButton.setTooltip(this._rb.getText("NOTETAKER_BUTTON_FILTER_TAG_APPLY_SELECTED_TOOLTIP")+": "+f.join(" "));this._oFilterTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}else{this._oFilterTagButton.setTooltip(this._rb.getText("NOTETAKER_BUTTON_FILTER_TAG_TOOLTIP"));this._oFilterTagButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}};sap.suite.ui.commons.NoteTaker.prototype._handleSearchPopup=function(){if(this._bSearchPopupOpen){jQuery.sap.byId(this.getId()+"-search-panel").slideToggle();this._bSearchPopupOpen=false}else{var p=jQuery.sap.byId(this.getId()+"-filter-search-button").position();jQuery.sap.byId(this.getId()+"-search-panel").css("right",p.right-20).slideToggle();this._oFilterSearchField.focus();this._bSearchPopupOpen=true}};sap.suite.ui.commons.NoteTaker.prototype._adjustSearchButton=function(){var s=this._oFilterSearchField.getValue();if(s.length){this._oSearchButton.setTooltip(this._rb.getText("NOTETAKER_BUTTON_SEARCHED_BY_TOOLTIP")+": "+s);this._oFilterSearchField.setTooltip(this._rb.getText("NOTETAKER_BUTTON_SEARCHED_BY_TOOLTIP")+": "+s);this._oSearchButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}else{this._oSearchButton.setTooltip(this._rb.getText("NOTETAKER_BUTTON_SEARCH_TOOLTIP"));this._oFilterSearchField.setTooltip(this._rb.getText("NOTETAKER_BUTTON_SEARCH_TOOLTIP"));this._oSearchButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}};sap.suite.ui.commons.NoteTaker.prototype._getFilterTags=function(){var f=this.getFilterCriteria();if(f&&f.tags&&f.tags.length){return f.tags}else{return[]}};sap.suite.ui.commons.NoteTaker.prototype._adjustPopupState=function(){var t=jQuery.sap.byId(this.getId()+"-filterTag-button").position();jQuery.sap.byId(this.getId()+"-filterTag-panel").css("left",t.left-20);if(this._bFilterTagPopupOpen){jQuery.sap.byId(this.getId()+"-filterTag-panel").show()}if(this._bSearchPopupOpen){jQuery.sap.byId(this.getId()+"-search-panel").show()}};sap.suite.ui.commons.NoteTaker.prototype._adjustFilteringButtonsStyle=function(){this._adjustFilterTagButton();this._adjustFilteringByThumbUpButtonStyle();this._adjustFilteringByThumbDownButtonStyle();this._adjustSearchButton()};sap.suite.ui.commons.NoteTaker.prototype._adjustFilteringByThumbUpButtonStyle=function(){if(this.getFilterCriteria()&&this.getFilterCriteria().thumbUp){this._oFilterThumbUpButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}else{this._oFilterThumbUpButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}};sap.suite.ui.commons.NoteTaker.prototype._adjustFilteringByThumbDownButtonStyle=function(){if(this.getFilterCriteria()&&this.getFilterCriteria().thumbDown){this._oFilterThumbDownButton.addStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}else{this._oFilterThumbDownButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFilterButtonSelected")}};sap.suite.ui.commons.NoteTaker.prototype.getNotFilteredCards=function(){if(!this._notFilteredCards){this._notFilteredCards=[]}return this._notFilteredCards};sap.suite.ui.commons.NoteTaker.prototype._spreadTagList=function(){var a=this.getAllTags();this._feeder.setTags(a);var c=this.getCards();for(var i=0;i<c.length;i++){c[i].setAllTags(a)}};sap.suite.ui.commons.NoteTaker.prototype._filter=function(){var b=this.getBinding("cards");var c;var i;if(b){var m=this.getModel().oData['cards'];for(i=0;i<m.length;i++){c=m[i];c.isFiltered=this._applyFilters(c)}this.getModel().updateBindings();b.filter([new sap.ui.model.Filter("isFiltered",sap.ui.model.FilterOperator.EQ,false)])}else{var n=this.getNotFilteredCards();var v=this.getCards();if(n.length==0&&v.length>0){this.setNotFilteredCards(v);n=v}for(i=0;i<n.length;i++){c=n[i];c.setIsFiltered(this._applyFilters(c));if(c.getIsFiltered()){this.removeCard(c)}else if(this.indexOfCard(c)<0){this.addCard(c)}}}};sap.suite.ui.commons.NoteTaker.prototype._applyFilters=function(c){var f=true;if(this.getFilterCriteria()){for(var i=0;(i<this._filters.length)&&f;i++){var F=this._filters[i];f=F.call(this,c)}}return!f};sap.suite.ui.commons.NoteTaker.prototype._validateCardByThumbsFilter=function(c){if(c.getThumbUp&&c.getThumbDown){return this._applyThumbsFilter(c.getThumbUp(),c.getThumbDown())}else{return this._applyThumbsFilter(c.thumbUp,c.thumbDown)}};sap.suite.ui.commons.NoteTaker.prototype._validateCardByTagsFilter=function(c){if(c.getTags){return this._applyTagsFilter(c.getTags())}else{return this._applyTagsFilter(c.tags)}};sap.suite.ui.commons.NoteTaker.prototype._validateCardByTextSearch=function(c){if(c.getBody){return this._applyTextSearch(c.getBody(),c.getHeader())}else{return this._applyTextSearch(c.body,c.header)}};sap.suite.ui.commons.NoteTaker.prototype._applyThumbsFilter=function(t,T){var r=true;var f=this.getFilterCriteria();if(f.thumbUp&&f.thumbDown){r=t||T}else if(f.thumbUp){r=t}else if(f.thumbDown){r=T}return r};sap.suite.ui.commons.NoteTaker.prototype._applyTagsFilter=function(t){var r=true;var f=this.getFilterCriteria();if(f.tags&&f.tags.length>0){var i,j;var T=f.tags;r=false;for(i=0;i<T.length&&!r;i++){for(j=0;t&&(j<t.length);j++){if(T[i]==t[j]){r=true;break}}}}return r};sap.suite.ui.commons.NoteTaker.prototype._applyTextSearch=function(b,h){var r=true;var f=this.getFilterCriteria();if(f.search&&f.search.length>0){var s=f.search;r=false;b=b.toLowerCase();h=h?h.toLowerCase():null;for(var i=0;i<s.length;i++){var w=s[i].toLowerCase();if((b.indexOf(w)>=0)||(h&&h.indexOf(w)>=0)){r=true;break}}}return r};sap.suite.ui.commons.NoteTaker.prototype.setAttachmentUploadUrl=function(u){this.setProperty("attachmentUploadUrl",u,true);this._feeder.setAttachmentUploadUrl(u)};sap.suite.ui.commons.NoteTaker.prototype._filters=[sap.suite.ui.commons.NoteTaker.prototype._validateCardByThumbsFilter,sap.suite.ui.commons.NoteTaker.prototype._validateCardByTagsFilter,sap.suite.ui.commons.NoteTaker.prototype._validateCardByTextSearch];sap.suite.ui.commons.NoteTaker.prototype.setNextCardUid=function(u){this._nextCardUid=u};sap.suite.ui.commons.NoteTaker.prototype._addAttachmentDelegate=function(c){var t=this;c.attachAttachmentClick(function(e){t._handleCardAttachmentClick(e)})};sap.suite.ui.commons.NoteTaker.prototype._handleCardAttachmentClick=function(e){var a={filename:e.getParameter("filename"),uid:e.getParameter("uid"),isCardAttachment:true};this.fireAttachmentClick(a)};sap.suite.ui.commons.NoteTaker.prototype.uploadAttachment=function(){this._feeder._oFileUploader.upload()};sap.suite.ui.commons.NoteTaker.prototype.setAttachmentData=function(a){this._feeder._oFileUploader.setAdditionalData(a)};sap.suite.ui.commons.NoteTaker.prototype.handleAttachmentUploadFail=function(){this._feeder._handleDeleteAttachUI()};sap.suite.ui.commons.NoteTaker.prototype.setNextCardAttachmentUrl=function(u){this._nextCardAttachmentUrl=u}}())};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTakerCard')){jQuery.sap.declare("sap.suite.ui.commons.NoteTakerCard");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.NoteTakerCard",{metadata:{library:"sap.suite.ui.commons",properties:{"header":{type:"string",group:"Misc",defaultValue:null},"body":{type:"string",group:"Misc",defaultValue:null},"timestamp":{type:"object",group:"Misc",defaultValue:new Date()},"tags":{type:"object",group:"Misc",defaultValue:[]},"viewAllTrigger":{type:"int",group:"Misc",defaultValue:1800},"uid":{type:"string",group:"Misc",defaultValue:null},"isFiltered":{type:"boolean",group:"Misc",defaultValue:false},"thumbUp":{type:"boolean",group:"Misc",defaultValue:null},"thumbDown":{type:"boolean",group:"Misc",defaultValue:null},"allTags":{type:"object",group:"Misc",defaultValue:[]},"attachmentFilename":{type:"string",group:"Misc",defaultValue:null},"attachmentUrl":{type:"string",group:"Misc",defaultValue:null}},events:{"editNote":{},"deleteNote":{},"attachmentClick":{}}}});sap.suite.ui.commons.NoteTakerCard.M_EVENTS={'editNote':'editNote','deleteNote':'deleteNote','attachmentClick':'attachmentClick'};jQuery.sap.require('sap.ui.core.Locale');jQuery.sap.require('sap.ui.core.format.DateFormat');jQuery.sap.require('sap.ui.ux3.OverlayContainer');jQuery.sap.require('sap.ui.commons.Link');jQuery.sap.require('sap.ui.commons.MessageBox');sap.suite.ui.commons.NoteTakerCard.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var t=this;this._oEditButton=new sap.ui.commons.Button({id:this.getId()+"-edit-button",press:function(e){t._handleEdit()},tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_OPEN_EDIT_TOOLTIP")});this._oEditButton.addStyleClass("sapSuiteUiCommonsNoteTakerCardEditButton");this._oDeleteButton=new sap.ui.commons.Button({id:this.getId()+"-delete-button",tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_DELETE_TOOLTIP"),press:function(){t._handleDelete()}});this._oDeleteButton.addStyleClass("sapSuiteUiCommonsNoteTakerCardDeleteButton");this._oViewAllLink=new sap.ui.commons.Link({id:this.getId()+"-viewAll-link",text:this._rb.getText("NOTETAKERCARD_LINK_VIEW_ALL_TEXT"),tooltip:this._rb.getText("NOTETAKERCARD_LINK_VIEW_ALL_TOOLTIP"),press:function(){t._openOverlay()}});this._oOverlayCard=new sap.ui.ux3.OverlayContainer(this.getId()+"-overlay",{openButtonVisible:false,close:function(e){t._handleOverlayCloseEvent(e.getSource());e.preventDefault()}});this._oOverlayCard._superOnsapselect=this._oOverlayCard.onsapselect;this._oOverlayCard.onsapselect=function(e){var c=e.srcControl.getId();if(c.indexOf("-overlayBody")<0&&c.indexOf("-inputTag")<0&&c.indexOf("-overlayCardTitle")<0){e.stopPropagation();e.preventDefault()}setTimeout(function(){t._oOverlayCard._superOnsapselect(e)},10)};this._oOverlayCard.addStyleClass("sapSuiteCommonsNoteTakerCardOverlayWindow");this._oOverlayCard._tagControls={}};sap.suite.ui.commons.NoteTakerCard.prototype.exit=function(){this._oDeleteButton.destroy();this._oDeleteButton=null;this._oEditButton.destroy();this._oEditButton=null;this._oViewAllLink.destroy();this._oViewAllLink=null;this._oOverlayCard.destroy();this._oOverlayCard=null};sap.suite.ui.commons.NoteTakerCard.prototype.getFormattedTimestamp=function(){var l=sap.ui.getCore().getConfiguration().getLocale();var d=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"},l);return d.format(this.getTimestamp())};sap.suite.ui.commons.NoteTakerCard.prototype._handleOverlayCloseEvent=function(c){if(c.bEditMode){var t=this;sap.ui.commons.MessageBox.show(this._rb.getText("NOTETAKERCARD_CONFIRMATION_CANCEL_EDIT_MESSAGE"),sap.ui.commons.MessageBox.Icon.QUESTION,this._rb.getText("NOTETAKERCARD_CONFIRMATION_CANCEL_EDIT_TITLE"),[sap.ui.commons.MessageBox.Action.YES,sap.ui.commons.MessageBox.Action.NO],function(r){if(r==sap.ui.commons.MessageBox.Action.YES){t._closeOverlay();t._oEditButton.focus()}else{jQuery.sap.focus(jQuery.sap.domById(t.getId()+"-overlayBody"))}},sap.ui.commons.MessageBox.Action.NO)}else{this._closeOverlay()}};sap.suite.ui.commons.NoteTakerCard.prototype._closeOverlay=function(){this._destroyTagControls();this._oOverlayCard.bEditMode=false;this._oOverlayCard.destroyContent();this._oOverlayCard.close()};sap.suite.ui.commons.NoteTakerCard.prototype._openOverlay=function(e){var i;if(!this._oOverlayCard.isOpen()){this._oOverlayCard.bThumbUp=this.getThumbUp();this._oOverlayCard.bThumbDown=this.getThumbDown();this._prepareOverlayLayouts();this._prepareOverlayToolbar(e);this._prepareOverlayHeaderBtns(e);this._prepareOverlayBody();this._prepareOverlayButtons(e);if(e){i=this.getId()+"-overlayBody"}else{i=this.getId()+"-overlay-close"}this._oOverlayCard.open(i);jQuery.sap.byId(this.getId()+"-overlay-thumb-down-button").attr("aria-pressed",this.getThumbDown());jQuery.sap.byId(this.getId()+"-overlay-thumb-up-button").attr("aria-pressed",this.getThumbUp())}};sap.suite.ui.commons.NoteTakerCard.prototype._getFormattedBody=function(){var b=[];var t=this.getBody();do{var p=t.search(/[\s<>]/);var s="",w="";if(p<0){w=t}else{w=t.slice(0,p);s=t.slice(p,p+1);t=t.slice(p+1)}switch(true){case(this._isFullUrl(w)):this.wrapFullUrl(b,w,s);break;case(this._isShortUrl(w)):this._wrapShortUrl(b,w,s);break;case(this._isEmail(w)):this._wrapEmail(b,w,s);break;default:b.push(jQuery.sap.encodeHTML(w+s))}}while(p>=0);return b.join("")};sap.suite.ui.commons.NoteTakerCard.prototype._isFullUrl=function(w){return/^(https?|ftp):\/\//i.test(w)&&jQuery.sap.validateUrl(w)};sap.suite.ui.commons.NoteTakerCard.prototype._isShortUrl=function(w){return/^(www\.)/i.test(w)&&jQuery.sap.validateUrl("http://"+w)};sap.suite.ui.commons.NoteTakerCard.prototype._isEmail=function(w){return/^[\w\.=-]+@[\w\.-]+\.[\w]{2,5}$/.test(w)};sap.suite.ui.commons.NoteTakerCard.prototype.wrapFullUrl=function(b,w,s){b.push('<a class="sapUiLnk" ');b.push('href = '+'"'+jQuery.sap.encodeHTML(w)+'"');b.push(' target = "_blank"');b.push('>');b.push(jQuery.sap.encodeHTML(w));b.push('</a>'+s)};sap.suite.ui.commons.NoteTakerCard.prototype._wrapShortUrl=function(b,w,s){b.push('<a class="sapUiLnk" ');b.push('href = '+'"'+jQuery.sap.encodeHTML("http://"+w)+'"');b.push(' target = "_blank"');b.push('>');b.push(jQuery.sap.encodeHTML(w));b.push('</a>'+s)};sap.suite.ui.commons.NoteTakerCard.prototype._wrapEmail=function(b,w,s){b.push('<a class="sapUiLnk" ');b.push('href = "mailto:'+jQuery.sap.encodeHTML(w)+'"');b.push('>');b.push(jQuery.sap.encodeHTML(w));b.push('</a>'+s)};sap.suite.ui.commons.NoteTakerCard.prototype._wrapBodyToDiv=function(t){return"<div class='sapSuiteUiCommonsNoteTakerCardBody'>"+t+"</div>"};sap.suite.ui.commons.NoteTakerCard.prototype._wrapTagPanelToDiv=function(t,e){if(e){return"<div class='suiteUiNtcOverlayTagPanelEditMode'>"+t+"</div>"}else{return"<div class='suiteUiNtcOverlayTagPanelViewMode'>"+t+"</div>"}};sap.suite.ui.commons.NoteTakerCard.prototype._handleEdit=function(){this._openOverlay(true)};sap.suite.ui.commons.NoteTakerCard.prototype._getFormattedTags=function(){var b=[];var t;if(this._oOverlayCard.isOpen()){t=this._oOverlayCard._selectedTags}else{t=this.getTags()}b.push("<div id='"+this.getId()+"-tag-list' class='sapSuiteUiCommonsNoteTakerCardTagList'>");if(t.length==0){b.push(this._rb.getText("NOTETAKERCARD_LABEL_TAGS_EMPTY"))}else{b.push(this._rb.getText("NOTETAKERCARD_LABEL_TAGS_FULL")+": ");var T=jQuery.sap.encodeHTML(t.sort().join(" "));b.push("<span title='"+T+"'>");b.push(T);b.push("</span>")}b.push("</div>");return b.join("")};sap.suite.ui.commons.NoteTakerCard.prototype._handleDelete=function(c){var t=this;sap.ui.commons.MessageBox.show(this._rb.getText("NOTETAKERCARD_CONFIRMATION_DELETE_MESSAGE"),sap.ui.commons.MessageBox.Icon.QUESTION,this._rb.getText("NOTETAKERCARD_CONFIRMATION_DELETE_TITLE"),[sap.ui.commons.MessageBox.Action.YES,sap.ui.commons.MessageBox.Action.NO],function(r){if(r==sap.ui.commons.MessageBox.Action.YES){if(c){t._closeOverlay()}t._handleDeleteClick()}},sap.ui.commons.MessageBox.Action.NO)};sap.suite.ui.commons.NoteTakerCard.prototype._handleDeleteClick=function(){var e={};e.uid=this.getUid();e.cardId=this.getId();e.title=this.getHeader();e.timestamp=this.getTimestamp();e.body=this.getBody();e.thumbUp=this.getThumbUp();e.thumbDown=this.getThumbDown();this.fireDeleteNote(e)};sap.suite.ui.commons.NoteTakerCard.prototype.setUid=function(u){this.setProperty("uid",u,true)};sap.suite.ui.commons.NoteTakerCard.prototype._wrapThumbToDiv=function(i){var c=null;var t=null;if(this.getThumbUp()&&!this.getThumbDown()){c="sapSuiteUiCommonsNoteTakerCardThumbUp";t=this._rb.getText("NOTETAKERCARD_ICON_THUMB_UP_TOOLTIP");this._oOverlayCard.removeStyleClass("suiteUiNtcNegativeCard");this._oOverlayCard.addStyleClass("suiteUiNtcPositiveCard")}else if(!this.getThumbUp()&&this.getThumbDown()){c="sapSuiteUiCommonsNoteTakerCardThumbDown";t=this._rb.getText("NOTETAKERCARD_ICON_THUMB_DOWN_TOOLTIP");this._oOverlayCard.removeStyleClass("suiteUiNtcPositiveCard");this._oOverlayCard.addStyleClass("suiteUiNtcNegativeCard")}else{this._oOverlayCard.removeStyleClass("suiteUiNtcPositiveCard");this._oOverlayCard.removeStyleClass("suiteUiNtcNegativeCard")}var b=[];b.push("<div");if(i){b.push(" id='");b.push(i);b.push("'")}if(c){b.push(" class='");b.push(c);b.push("'");b.push(" title='");b.push(t);b.push("'")}b.push("></div>");return b.join("")};sap.suite.ui.commons.NoteTakerCard.prototype._handleAddTag=function(t){this._oOverlayCard._selectedTags=[];var n=t.split(new RegExp("\\s+"));var T={};for(var i=0;i<n.length;i++){if(n[i].length!=0){T[n[i]]=0}}for(var f in T){this._oOverlayCard._selectedTags.push(f)}var o=sap.ui.getCore().byId(this.getId()+'-overlayTagPanel');o.setContent(this._wrapTagPanelToDiv(this._getFormattedTags(),true));this._adjustTagButton()};sap.suite.ui.commons.NoteTakerCard.prototype._adjustTagButton=function(){var t=this._oOverlayCard._tagControls.tagButton;if(this._oOverlayCard._selectedTags.length){t.addStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}else{t.removeStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}};sap.suite.ui.commons.NoteTakerCard.prototype._toggleTagPopup=function(){var s=this._oOverlayCard._selectedTags;if(this._bTagPopupOpen){jQuery.sap.byId(this.getId()+"-selectTag-panel").slideToggle();this._focusDefaultControl();this._bTagPopupOpen=false}else{this._addTagsToListBox(this.getAllTags());jQuery.sap.byId(this.getId()+"-selectTag-panel").slideToggle();jQuery.sap.byId(this.getId()+"-inputTag").val(s.length==0?"":s.join(" ")+" ");this._oOverlayCard._tagControls.tagInput.focus();this._bTagPopupOpen=true}};sap.suite.ui.commons.NoteTakerCard.prototype._focusDefaultControl=function(){this._oOverlayCard._tagControls.tagButton.focus()};sap.suite.ui.commons.NoteTakerCard.prototype._handleTagInputLive=function(e){var l=e.getParameter("liveValue");var n=l.split(" ");var c=n[n.length-1];this._filterListBox(c)};sap.suite.ui.commons.NoteTakerCard.prototype._filterListBox=function(i){if(i.length==0){this._addTagsToListBox(this.getAllTags());return}var f=jQuery.grep(this.getAllTags(),function(a){if(a.indexOf(i)>=0){return true}});this._addTagsToListBox(f)};sap.suite.ui.commons.NoteTakerCard.prototype._addTagsToListBox=function(t){var l=jQuery.map(t,function(v,i){return new sap.ui.core.ListItem({text:v})});this._oOverlayCard._tagControls.tagList.setItems(l,true);this._oOverlayCard._tagControls.tagList.rerender()};sap.suite.ui.commons.NoteTakerCard.prototype._handleListSelect=function(e){var s=e.getParameter("selectedItem").getText();var t=this._oOverlayCard._tagControls.tagInput;var T=t.getValue();var n=T.split(" ");n.pop();if(n.length==0){t.setValue(s+" ")}else{t.setValue(n.join(" ")+" "+s+" ")}this._oOverlayCard._tagControls.tagList.setSelectedIndex(-1);t.focus()};sap.suite.ui.commons.NoteTakerCard.prototype._destroyTagControls=function(){var t=this._oOverlayCard._tagControls;for(var c in t){t[c].destroy()}this._oOverlayCard._tagControls={}};sap.suite.ui.commons.NoteTakerCard.prototype._createTagSelectorControl=function(){var t=this._oOverlayCard._tagControls;var T=new sap.ui.commons.layout.VerticalLayout({id:this.getId()+"-selectTag-panel"});T.addStyleClass("sapSuiteUiCommonsNoteTakerFeederSelectTagPanel");T.addStyleClass("sapUiShd");t.tagSelectorLayout=T;T.addContent(new sap.ui.core.HTML({content:["<div id='",this.getId(),"-selectTag-arrow' class='sapSuiteUiCommonsNoteTakerFeederSelectTagArrow' ></div>"].join("")}));T.addContent(new sap.ui.core.HTML({content:["<div id='",this.getId(),"-selectTag-header' class='sapSuiteUiCommonsNoteTakerFeederSelectTagHeader' >",this._rb.getText("NOTETAKERFEEDER_TOOLPOPUP_TITLE"),"</div>"].join("")}));T.addContent(t.tagInput);T.addContent(t.tagList);var o=new sap.ui.commons.layout.HorizontalLayout();o.addStyleClass("sapSuiteUiCommonsNoteTakerFeederSelectTagButtons");o.addContent(t.tagApplyBtn);o.addContent(t.tagCancelBtn);T.addContent(o);return T};sap.suite.ui.commons.NoteTakerCard.prototype._prepareAttachmentPanel=function(i){var I=i?"-overlay":"";var c=i?"Overlay":"";var s=[this.getId(),I,"-attachmentPanel"].join("");var C=sap.ui.getCore().byId(s);if(C){C.destroy()}var a=new sap.ui.commons.layout.HorizontalLayout(s);a.addStyleClass(["suiteUiNtc",c,"AttachmentPanel"].join(""));a.addContent(new sap.ui.core.HTML({content:"<div class='suiteUiNtcAttachmentIcon'></div>"}));var A=new sap.ui.commons.Link({id:[this.getId(),I,"-attachmentLink"].join(""),text:this.getAttachmentFilename(),tooltip:this._rb.getText("NOTETAKERCARD_LINK_ATTACHMENT_TOOLTIP"),press:this._handleAttachmentDownload,href:this.getAttachmentUrl()});A._ntc=this;a.addContent(A);return a};sap.suite.ui.commons.NoteTakerCard.prototype._prepareOverlayLayouts=function(){var t=new sap.ui.commons.layout.VerticalLayout();var h=new sap.ui.commons.layout.VerticalLayout();h.addStyleClass("sapSuiteUiCommonsNtcOverlayTitle");var H=new sap.ui.commons.layout.HorizontalLayout();H.addStyleClass("sapSuiteUiCommonsNtcHeaderButtons");var o=new sap.ui.commons.layout.HorizontalLayout(this.getId()+'-overlayHeader',{content:[h,H]});o.addStyleClass("sapSuiteUiCommonsNtcOverlayHeader");t.addContent(o);var T=new sap.ui.commons.layout.HorizontalLayout(this.getId()+'-overlayToolbar');T.addStyleClass("suiteUiNtcToolbar");var a=new sap.ui.commons.layout.HorizontalLayout();a.addStyleClass("suiteUiNtcOverlayToolbarLeftPanel");var b=new sap.ui.commons.layout.HorizontalLayout();b.addStyleClass("suiteUiNtcOverlayToolbarRightPanel");T.addContent(a);T.addContent(b);t.addContent(T);this._oOverlayCard.addContent(t);var B=new sap.ui.commons.layout.VerticalLayout();B.addStyleClass("sapSuiteUiCommonsNoteTakerCardContent");var c=new sap.ui.commons.layout.HorizontalLayout(this.getId()+"-buttons");c.addStyleClass("sapSuiteUiCommonsNoteTakerCardOverlayButtonPanel");this._oOverlayCard.layouts={topSection:t,headerLeft:h,headerRight:H,toolbar:T,toolbarLeft:a,toolbarRight:b,body:B,buttons:c}};sap.suite.ui.commons.NoteTakerCard.prototype._prepareOverlayHeaderBtns=function(e){var t=this;var E=new sap.ui.commons.Button(this.getId()+"-editButton",{tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_EDIT_TOOLTIP"),press:function(){t._fnEdit()}});t._oOverlayCard.layouts.headerRight.addContent(E,0);if(e){E.setEnabled(false);E.addStyleClass("sapSuiteUiCommonsNoteTakerCardEditButtonDsbl")}else{E.setEnabled(true);E.addStyleClass("sapSuiteUiCommonsNoteTakerCardEditButton")}var d=new sap.ui.commons.Button(this.getId()+"-deleteButton",{tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_DELETE_TOOLTIP"),press:function(){t._handleDelete(true)}});d.addStyleClass("sapSuiteUiCommonsNoteTakerCardDeleteButton");t._oOverlayCard.layouts.headerRight.addContent(d,1);var T=new sap.ui.commons.Label(this.getId()+"-overlayTimestamp",{text:t.getFormattedTimestamp()});T.addStyleClass("sapSuiteUiCommonsNoteTakerCardTimestamp");t._oOverlayCard.layouts.headerLeft.addContent(T,1)};sap.suite.ui.commons.NoteTakerCard.prototype._prepareOverlayToolbar=function(e){this._oOverlayCard._selectedTags=this.getTags();if(this.getAttachmentFilename()!==""){var a=this._prepareAttachmentPanel(true);this._oOverlayCard.layouts.topSection.addContent(a);this._oOverlayCard.layouts.body.addStyleClass("suiteUiNtcOverlayWithAttachment")}else{this._oOverlayCard.layouts.body.addStyleClass("suiteUiNtcOverlayWithoutAttachment")}};sap.suite.ui.commons.NoteTakerCard.prototype._prepareOverlayBody=function(){this._oOverlayCard.addContent(this._oOverlayCard.layouts.body)};sap.suite.ui.commons.NoteTakerCard.prototype._prepareOverlayButtons=function(e){var t=this;var c=new sap.ui.commons.Button(this.getId()+"-closeButton",{text:this._rb.getText("NOTETAKERCARD_BUTTON_CLOSE_OVERLAY"),tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_CLOSE_OVERLAY_TOOLTIP"),press:function(){t._handleOverlayCloseEvent(t._oOverlayCard)}});c.addStyleClass("sapSuiteUiCommonsNoteTakerCardOverlayButtonClose");var s=new sap.ui.commons.Button(this.getId()+"-saveButton",{text:this._rb.getText("NOTETAKERCARD_BUTTON_SAVE_TEXT"),tooltip:this._rb.getText("NOTETAKERCARD_BUTTON_SAVE_TOOLTIP"),press:function(){t._fnSave()}});s.addStyleClass("sapSuiteUiCommonsNoteTakerCardOverlayButtonSave");t._oOverlayCard.layouts.buttons.addContent(c,0);t._oOverlayCard.layouts.buttons.addContent(s,1);if(e){s.setEnabled(true);this._fnCreateInEditMode()}else{s.setEnabled(false);this._fnCreateInViewMode()}this._oOverlayCard.addContent(this._oOverlayCard.layouts.buttons)};sap.suite.ui.commons.NoteTakerCard.prototype._fnCreateInViewMode=function(){var t=this;t._oOverlayCard.bEditMode=false;var c=new sap.ui.commons.Label(t.getId()+"-overlayCardHeader",{text:t.getHeader()});c.addStyleClass("sapSuiteUiCommonsNoteTakerCardTitle");t._oOverlayCard.layouts.headerLeft.insertContent(c,0);var T=new sap.ui.core.HTML(t.getId()+'-overlayTagPanel');T.setContent(t._wrapTagPanelToDiv(t._getFormattedTags(),t._oOverlayCard.bEditMode));t._oOverlayCard.layouts.toolbarLeft.addContent(T);var o=new sap.ui.core.HTML({id:t.getId()+"-overlay-thumb",content:t._wrapThumbToDiv()});t._oOverlayCard.layouts.toolbarRight.addContent(o);var C=new sap.ui.core.HTML(t.getId()+"-overlayBody");C.setContent(t._wrapBodyToDiv(t._getFormattedBody()));C.addStyleClass("sapSuiteUiCommonsNoteTakerCardBody");t._oOverlayCard.layouts.body.addContent(C);var s=t._oOverlayCard.layouts.buttons.getContent()[1];s.setEnabled(false);var e=t._oOverlayCard.layouts.headerRight.getContent()[0];e.setEnabled(true);e.removeStyleClass("sapSuiteUiCommonsNoteTakerCardEditButtonDsbl");e.addStyleClass("sapSuiteUiCommonsNoteTakerCardEditButton")};sap.suite.ui.commons.NoteTakerCard.prototype._fnCreateInEditMode=function(){var t=this;t._oOverlayCard.bEditMode=true;var c=new sap.ui.commons.TextField(t.getId()+"-overlayCardTitle",{maxLength:50});c.setValue(t.getHeader());c.addStyleClass("sapSuiteUiCommonsNoteTakerCardTitle");var T=new sap.ui.commons.InPlaceEdit(t.getId()+"-overlayCardTitleEdit",{content:c,tooltip:t._rb.getText("NOTETAKERCARD_EDITFIELD_TITLE_TOOLTIP"),design:sap.ui.commons.TextViewDesign.H2,undoEnabled:false});T.addStyleClass("sapSuiteUiCommonsNtcdTitleEdit");t._oOverlayCard.layouts.headerLeft.insertContent(T,0);var o=new sap.ui.core.HTML(t.getId()+'-overlayTagPanel');o.setContent(t._wrapTagPanelToDiv(t._getFormattedTags(),t._oOverlayCard.bEditMode));t._oOverlayCard.layouts.toolbarLeft.addContent(o);var a=new sap.ui.commons.Button({id:t.getId()+"-tag-button",tooltip:t._rb.getText("NOTETAKERCARD_BUTTON_TAG_TOOLTIP"),press:function(){t._toggleTagPopup()}});a.addStyleClass("sapSuiteUiCommonsNoteTakerFeederTagButton");var b=new sap.ui.commons.ListBox({id:t.getId()+"-tagListBox",visibleItems:10,width:"100%",height:"194px",select:function(e){t._handleListSelect(e)}});var d=new sap.ui.commons.TextField({id:t.getId()+"-inputTag",liveChange:function(e){t._handleTagInputLive(e)}});d.onsapdown=function(e){e.preventDefault();e.stopPropagation();jQuery("#"+t.getId()+"-tagListBox li:eq(0)").focus()};var C=new sap.ui.commons.Button({id:t.getId()+"-cancel-tags-button",text:t._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS"),tooltip:t._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS_TOOLTIP"),press:function(){t._toggleTagPopup()}});C.addStyleClass("sapSuiteUiCommonsNoteTakerFeederCancelTagButton");var A=new sap.ui.commons.Button({id:t.getId()+"-add-tags-button",text:t._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TAGS"),tooltip:t._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TAGS_TOOLTIP"),press:function(){t._handleAddTag(d.getValue());a.rerender();t._toggleTagPopup()}});t._oOverlayCard._tagControls={tagButton:a,tagList:b,tagInput:d,tagCancelBtn:C,tagApplyBtn:A};t._oOverlayCard.addContent(t._createTagSelectorControl());var f=new sap.ui.commons.Button({id:t.getId()+"-overlay-thumb-up-button",press:function(e){t._oOverlayCard.bThumbUp=!t._oOverlayCard.bThumbUp;if(t._oOverlayCard.bThumbUp){t._oOverlayCard.bThumbDown=false}s()},tooltip:t._rb.getText("NOTETAKERFEEDER_BUTTON_THUMB_UP_TOOLTIP")});f.addStyleClass("sapSuiteUiCommonsNoteTakerThumbUpBtn");var g=new sap.ui.commons.Button({id:t.getId()+"-overlay-thumb-down-button",press:function(e){t._oOverlayCard.bThumbDown=!t._oOverlayCard.bThumbDown;if(t._oOverlayCard.bThumbDown){t._oOverlayCard.bThumbUp=false}s()},tooltip:t._rb.getText("NOTETAKERFEEDER_BUTTON_THUMB_DOWN_TOOLTIP")});g.addStyleClass("sapSuiteUiCommonsNoteTakerThumbDownBtn");var s=function(){if(t._oOverlayCard.bThumbUp){f.addStyleClass("sapSuiteUiCommonsNoteTakerCardSelectedBtn");t._oOverlayCard.addStyleClass("suiteUiNtcPositiveCard")}else{f.removeStyleClass("sapSuiteUiCommonsNoteTakerCardSelectedBtn");t._oOverlayCard.removeStyleClass("suiteUiNtcPositiveCard")}if(t._oOverlayCard.bThumbDown){g.addStyleClass("sapSuiteUiCommonsNoteTakerCardSelectedBtn");t._oOverlayCard.addStyleClass("suiteUiNtcNegativeCard")}else{g.removeStyleClass("sapSuiteUiCommonsNoteTakerCardSelectedBtn");t._oOverlayCard.removeStyleClass("suiteUiNtcNegativeCard")}jQuery.sap.byId(f.getId()).attr("aria-pressed",t._oOverlayCard.bThumbUp);jQuery.sap.byId(g.getId()).attr("aria-pressed",t._oOverlayCard.bThumbDown)};s();t._oOverlayCard.layouts.toolbarLeft.insertContent(a,0);t._oOverlayCard.layouts.toolbarRight.addContent(f);t._oOverlayCard.layouts.toolbarRight.addContent(g);var S=t._oOverlayCard.layouts.buttons.getContent()[1];S.setEnabled(true);var h=new sap.ui.commons.TextArea(t.getId()+"-overlayBody",{liveChange:function(e){var i=e.getParameter("liveValue");var j=(i!=null)&&!/^\s*$/.test(i);if(j!==S.getEnabled()){S.setEnabled(j)}}});h.setValue(t.getBody());h.addStyleClass("sapSuiteUiCommonsNoteTakerCardBody");t._oOverlayCard.layouts.body.addContent(h);var E=t._oOverlayCard.layouts.headerRight.getContent()[0];E.setEnabled(false);E.removeStyleClass("sapSuiteUiCommonsNoteTakerCardEditButton");E.addStyleClass("sapSuiteUiCommonsNoteTakerCardEditButtonDsbl")};sap.suite.ui.commons.NoteTakerCard.prototype._fnSave=function(){var t=this;var T=t._oOverlayCard.layouts.headerLeft.getContent()[0];var c=T.getContent();var C=t._oOverlayCard.layouts.body.getContent()[0];if(C.getValue()){t.setHeader(c.getValue());t.setBody(C.getValue());t.setTimestamp(new Date());t.setThumbUp(t._oOverlayCard.bThumbUp);t.setThumbDown(t._oOverlayCard.bThumbDown);t.setTags(t._oOverlayCard._selectedTags);var e={};e.uid=t.getUid();e.title=t.getHeader();e.body=t.getBody();e.timestamp=t.getTimestamp();e.thumbUp=t.getThumbUp();e.thumbDown=t.getThumbDown();e.tags=t.getTags();t.fireEditNote(e);t._oOverlayCard.layouts.headerLeft.removeContent(T);T.destroy();c.destroy();t._oOverlayCard.layouts.body.removeContent(C);C.destroy();t._destroyTagControls();t._oOverlayCard.layouts.toolbarLeft.destroyContent();t._oOverlayCard.layouts.toolbarRight.destroyContent();t._fnCreateInViewMode();jQuery.sap.byId(t.getId()+"-overlayTimestamp").html(t.getFormattedTimestamp());jQuery.sap.byId(t.getId()+"-overlay-close").focus()}else{}};sap.suite.ui.commons.NoteTakerCard.prototype._fnEdit=function(){var t=this;var c=t._oOverlayCard.layouts.headerLeft.getContent()[0];var C=t._oOverlayCard.layouts.body.getContent()[0];t._oOverlayCard.layouts.topSection.removeContent(c);c.destroy();t._oOverlayCard.layouts.body.removeContent(C);C.destroy();t._oOverlayCard.layouts.toolbarLeft.destroyContent();t._oOverlayCard.layouts.toolbarRight.destroyContent();t._fnCreateInEditMode();t._oOverlayCard.layouts.topSection.rerender();t._oOverlayCard.layouts.body.rerender();jQuery.sap.focus(jQuery.sap.domById(t.getId()+"-overlayBody"))};sap.suite.ui.commons.NoteTakerCard.prototype._handleAttachmentDownload=function(){var t=this._ntc;var e={};e.uid=t.getUid();e.url=t.getAttachmentUrl();e.filename=t.getAttachmentFilename();t.fireAttachmentClick(e)}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTakerCardRenderer')){jQuery.sap.declare("sap.suite.ui.commons.NoteTakerCardRenderer");sap.suite.ui.commons.NoteTakerCardRenderer={};sap.suite.ui.commons.NoteTakerCardRenderer.render=function(r,c){var f=c.getHeader();var t=this.getTruncatedHeader(f);var s=c.getBody().length>c.getViewAllTrigger();var S=c.getAttachmentFilename()!=="";var a=new sap.suite.ui.commons.util.RenderingHelper(r);r.write("<div");r.writeControlData(c);r.addClass("sapSuiteUiCommonsNoteTakerCard");if(c.getThumbUp()){r.addClass("suiteUiNtcPositiveCard")}if(c.getThumbDown()){r.addClass("suiteUiNtcNegativeCard")}r.writeClasses();r.writeAttribute("tabindex","0");r.writeAccessibilityState(c,{role:'region',labelledby:[c.getId()+"-headerLabel",c.getId()+"-timestamp",c.getId()+"-toolbar",c.getId()+"-body"].join(" ")});r.write(">");a.writeOpeningTag('div',{attributes:{id:c.getId()+"-header"},classes:['sapSuiteUiCommonsNoteTakerCardHeader']});a.writeOpeningTag('div',{attributes:{id:c.getId()+"-header-buttons"},classes:['sapSuiteUiCommonsNoteTakerCardHeaderButtons']});r.renderControl(c._oEditButton);r.renderControl(c._oDeleteButton);a.writeClosingTag('div');if(!f){r.write("&nbsp;")}else{r.write("<label");r.writeAttribute("id",c.getId()+"-headerLabel");if(f!==t){r.writeAttributeEscaped("title",f)}r.write(">");r.writeEscaped(t);r.write("</label>")}r.write("<div");r.writeAttribute("id",c.getId()+"-timestamp");r.addClass("sapSuiteUiCommonsNoteTakerCardTimestamp");r.writeClasses();r.write(">");r.writeEscaped(c.getFormattedTimestamp());r.write("</div>");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsNoteTakerCardBodyContent");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-toolbar");r.addClass("suiteUiNtcToolbar");r.writeClasses();r.write(">");this.renderToolbar(r,c);r.write("</div>");if(S){r.renderControl(c._prepareAttachmentPanel(false))}r.write("<div");r.writeAttribute("id",c.getId()+"-body");r.addClass("sapSuiteUiCommonsNoteTakerCardBody");if(S&&s){r.addClass("sapSuiteUiCommonsNtcBodyViewAllAttach")}else if(s){r.addClass("sapSuiteUiCommonsNtcBodyViewAll")}else if(S){r.addClass("sapSuiteUiCommonsNtcBodyAttach")}r.writeClasses();r.write(">");r.write(c._getFormattedBody());r.write("</div>");if(s){r.write("<div");r.writeAttribute("id",c.getId()+"-viewAll");r.addClass("sapSuiteUiCommonsNoteTakerCardViewAll");r.writeClasses();r.write(">&nbsp;");c._oViewAllLink.addStyleClass("sapSuiteUiCommonsNoteTakerCardViewAllLink");r.renderControl(c._oViewAllLink);r.write("</div>")}r.write("</div>");r.write("</div>")};sap.suite.ui.commons.NoteTakerCardRenderer.getTruncatedHeader=function(f){var l=20;var t="...";if(f&&f.length>l){return f.substr(0,l-t.length)+t}else{return f}};sap.suite.ui.commons.NoteTakerCardRenderer.renderToolbar=function(r,c){r.write("<div");r.writeAttribute("id",c.getId()+"-left-toolbar");r.addClass("sapSuiteUiCommonsNoteTakerCardLeftPanel");if(c.getThumbUp()||c.getThumbDown()){r.addClass("sapSuiteUiCommonsNoteTakerCardWithThumbs")}else{r.addClass("sapSuiteUiCommonsNoteTakerCardNoThumbs")}r.writeClasses();r.write(">");r.write(c._getFormattedTags());r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-right-toolbar");r.addClass("sapSuiteUiCommonsNoteTakerCardRightPanel");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-thumb");var t="";if(c.getThumbUp()&&!c.getThumbDown()){r.writeAttribute("class","sapSuiteUiCommonsNoteTakerCardThumbUp");t=c._rb.getText("NOTETAKERCARD_ICON_THUMB_UP_TOOLTIP");r.writeAttribute("title",t)}else if(!c.getThumbUp()&&c.getThumbDown()){r.writeAttribute("class","sapSuiteUiCommonsNoteTakerCardThumbDown");t=c._rb.getText("NOTETAKERCARD_ICON_THUMB_DOWN_TOOLTIP");r.writeAttribute("title",t)}r.write(">");r.write("<span");r.writeAttribute("style","visibility: hidden; display: none;");r.write(">");r.writeEscaped(t);r.write("</span>");r.write("</div>");r.write("</div>")}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.NoteTakerFeeder')){jQuery.sap.declare("sap.suite.ui.commons.NoteTakerFeeder");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.NoteTakerFeeder",{metadata:{library:"sap.suite.ui.commons",properties:{"body":{type:"string",group:"Data",defaultValue:null},"title":{type:"string",group:"Data",defaultValue:null},"tags":{type:"object",group:"Misc",defaultValue:[]},"thumbUp":{type:"boolean",group:"Misc",defaultValue:null},"thumbDown":{type:"boolean",group:"Misc",defaultValue:null},"attachmentUploadUrl":{type:"string",group:"Misc",defaultValue:null},"attachmentName":{type:"string",group:"Misc",defaultValue:'attachment'}},events:{"addNote":{},"attachmentSelect":{},"attachmentUploadComplete":{},"attachmentDelete":{},"attachmentClick":{}}}});sap.suite.ui.commons.NoteTakerFeeder.M_EVENTS={'addNote':'addNote','attachmentSelect':'attachmentSelect','attachmentUploadComplete':'attachmentUploadComplete','attachmentDelete':'attachmentDelete','attachmentClick':'attachmentClick'};jQuery.sap.require('sap.ui.ux3.ToolPopup');sap.suite.ui.commons.NoteTakerFeeder.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._selectedTags=[];this._bTagPopupOpen=false;var t=this;this._oAddButton=new sap.ui.commons.Button({id:this.getId()+"-add-button",text:this._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TEXT"),tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TOOLTIP"),press:function(){t._handleAdd()}});this._oAddButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederHeaderAddButton");this._oTagList=new sap.ui.commons.ListBox({id:this.getId()+"-tagListBox",visibleItems:10,width:"100%",height:"194px",select:function(e){t._handleListSelect(e)}});this._oTagInput=new sap.ui.commons.TextField({id:this.getId()+"-inputTag",liveChange:function(e){t._handleTagInputLive(e)}});this._oTagInput.onsapdown=function(e){e.preventDefault();e.stopPropagation();jQuery("#"+t.getId()+"-tagListBox li:eq(0)").focus()};this._oCancelTagButton=new sap.ui.commons.Button({id:this.getId()+"-cancel-tags-button",text:this._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS"),tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_CANCEL_TAGS_TOOLTIP"),press:function(){t._toggleTagPopup()}});this._oCancelTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederCancelTagButton");this._oAddTagButton=new sap.ui.commons.Button({id:this.getId()+"-add-tags-button",text:this._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TAGS"),tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TAGS_TOOLTIP"),press:function(){t._handleAddTag(t._oTagInput.getValue());t._oTagButton.rerender();t._toggleTagPopup()}});this._oTagButton=new sap.ui.commons.Button({id:this.getId()+"-tag-button",tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_TAG_TOOLTIP"),press:function(){t._toggleTagPopup()}});this._oTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederTagButton");sap.ui.commons.TextField.extend("sap.suite.ui.commons.TextFieldWithPlaceholder",{renderer:{renderInnerAttributes:function(r,T){r.writeAttributeEscaped("data-placeholder",t._rb.getText("NOTETAKERFEEDER_PLACEHOLDER_HEADER")+"...")}}});sap.ui.commons.TextArea.extend("sap.suite.ui.commons.TextAreaWithPlaceholder",{renderer:{renderInnerAttributes:function(r,T){r.writeAttributeEscaped("data-placeholder",t._rb.getText("NOTETAKERFEEDER_PLACEHOLDER_BODY")+"...")}}});this._oTitle=new sap.suite.ui.commons.TextFieldWithPlaceholder({id:this.getId()+"-title-field",maxLength:50});this._oBody=new sap.suite.ui.commons.TextAreaWithPlaceholder({id:this.getId()+"-body-field",liveChange:function(e){t._setAddButtonEnabled(e.getParameter("liveValue"))}});this._oThumbUpButton=new sap.ui.commons.Button({id:this.getId()+"-thumb-up-button",press:function(e){t._handleThumbUpButtonPress()},tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_THUMB_UP_TOOLTIP")});this._oThumbUpButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederThumbUpButton");this._oThumbDownButton=new sap.ui.commons.Button({id:this.getId()+"-thumb-down-button",press:function(e){t._handleThumbDownButtonPress()},tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_THUMB_DOWN_TOOLTIP")});this._oThumbDownButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederThumbDownButton");this._oFileUploader=new sap.ui.commons.FileUploader({id:this.getId()+"-attach",uploadOnChange:false,name:this.getAttachmentName(),change:function(e){t._disableAddAttachBtn();var n=e.getParameter("newValue");t._oAttachmentLink.setText(n);t._oAttachmentLink.rerender();t._handleAddAttachUI();var a={};a.filename=n;t.fireAttachmentSelect(a);t._oTitle.focus()},uploadComplete:function(e){t._handleUploadComplete(e)}});this._oFileUploader.oBrowse.setText("");this._oAddAttachButton=new sap.ui.commons.Button({id:this.getId()+"-attach-button",press:function(e){jQuery.sap.domById(t._oFileUploader.getId()+"-fu").click()},tooltip:t._rb.getText("NOTETAKER_BUTTON_ATTACH_TOOLTIP")});this._oAddAttachButton.addStyleClass("sapSuiteUiCommonsNtAttachIcon");this._oAttachmentLoadingLabel=new sap.ui.commons.Label({id:this.getId()+"-loading-label",text:this._rb.getText("NOTETAKERFEEDER_LABEL_ATTACHMENT_LOADING")+"...",});this._oDeleteAttachButton=new sap.ui.commons.Button({id:this.getId()+"-delete-attach-button",lite:true,press:function(e){t._handleDeleteAttachUI();var a={filename:t._oFileUploader.getName()};t.fireAttachmentDelete(a)},tooltip:this._rb.getText("NOTETAKERFEEDER_BUTTON_DELETE_ATTACHMENT"),});this._oAttachmentLink=new sap.ui.commons.Link({id:this.getId()+"-attachmentLink",tooltip:this._rb.getText("NOTETAKERFEEDER_LINK_ATTACHMENT_TOOLTIP"),press:function(e){var a={filename:t._oFileUploader.getName()};t.fireAttachmentClick(a)},width:"200px"})};sap.suite.ui.commons.NoteTakerFeeder.prototype.exit=function(){this._oAddButton.destroy();this._oTitle.destroy();this._oBody.destroy();this._oTagButton.destroy();this._oTagList.destroy();this._oTagInput.destroy();this._oCancelTagButton.destroy();this._oAddTagButton.destroy();this._oThumbUpButton.destroy();this._oThumbDownButton.destroy();this._oFileUploader.destroy();this._oAddAttachButton.destroy();this._oAttachmentLoadingLabel.destroy();this._oDeleteAttachButton.destroy();this._oAttachmentLink.destroy();this._oAddButton=null;this._oTitle=null;this._oBody=null;this._oTagButton=null;this._oTagList=null;this._oTagInput=null;this._oCancelTagButton=null;this._oAddTagButton=null;this._oThumbUpButton=null;this._oThumbDownButton=null;this._oFileUploader=null;this._oAddAttachButton=null;this._oAttachmentLoadingLabel=null;this._oDeleteAttachButton=null;this._oAttachmentLink=null};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleAdd=function(){if(this.getBody()){var e=new Object();e.title=this.getTitle();e.body=this.getBody();e.timestamp=this._getTimestamp();e.tags=this._selectedTags;e.thumbUp=this.getThumbUp();e.thumbDown=this.getThumbDown();e.attachmentFilename=this._oFileUploader.getValue();this.setTitle("");this.setBody("");this.setThumbDown(false);this.setThumbUp(false);this._oFileUploader.setValue("");this._enableAddAttachBtn();this.fireAddNote(e);this._handleClearTag()}else{this._setAddButtonEnabled(this.getBody())}};sap.suite.ui.commons.NoteTakerFeeder.prototype._getTimestamp=function(){return new Date()};sap.suite.ui.commons.NoteTakerFeeder.prototype.setTitle=function(t){this._oTitle.setValue(t)};sap.suite.ui.commons.NoteTakerFeeder.prototype.getTitle=function(){return jQuery.sap.byId(this.getId()+"-title-field").hasClass('sapSuiteUiCommonsPlaceholder')?"":this._oTitle.getValue()};sap.suite.ui.commons.NoteTakerFeeder.prototype.setBody=function(b){this._oBody.setValue(b)};sap.suite.ui.commons.NoteTakerFeeder.prototype.getBody=function(){return this._isBodyPlaceholderActive()?"":this._oBody.getValue()};sap.suite.ui.commons.NoteTakerFeeder.prototype._applyPlaceholder=function(){jQuery('[data-placeholder]').focus(function(){var i=jQuery(this);if(i.hasClass('sapSuiteUiCommonsPlaceholder')){i.val('');i.removeClass('sapSuiteUiCommonsPlaceholder')}}).blur(function(){var i=jQuery(this);if(jQuery.sap.equal(i.val(),'')||jQuery.sap.equal(i.val(),i.attr('data-placeholder'))){i.addClass('sapSuiteUiCommonsPlaceholder');i.val(i.attr('data-placeholder'))}}).blur()};sap.suite.ui.commons.NoteTakerFeeder.prototype._isBodyPlaceholderActive=function(){return jQuery.sap.byId(this.getId()+"-body-field").hasClass('sapSuiteUiCommonsPlaceholder')};sap.suite.ui.commons.NoteTakerFeeder.prototype._setAddButtonEnabled=function(b,n){var e=b!=null&&!this._isBodyPlaceholderActive()&&!/^\s*$/.test(b);if(e!==this._oAddButton.getEnabled()){this._oAddButton.setEnabled(e);if(!n){this._oAddButton.rerender()}}};sap.suite.ui.commons.NoteTakerFeeder.prototype._adjustUploaderForIe=function(){this._oFileUploader.superOnkeydown=this._oFileUploader.onkeydown;this._oFileUploader.onkeydown=function(e){var k=e.keyCode,a=jQuery.sap.KeyCodes;if(k!=a.SPACE&&k!=a.ENTER){this.superOnkeydown(e)}};jQuery(this._oFileUploader.oFilePath.getDomRef()).hide();jQuery(this._oFileUploader.oBrowse.getDomRef()).hide();jQuery(this._oAddAttachButton.getDomRef()).attr("tabindex","-1");var t=this;jQuery(this._oFileUploader.oFileUpload).attr("tabindex","0").attr("title",this._rb.getText("NOTETAKER_BUTTON_ATTACH_TOOLTIP")).focus(function(){this.hasFocus=true;jQuery(t._oAddAttachButton.getDomRef()).addClass("sapUiBtnStdFocus")}).focusout(function(){this.hasFocus=false;jQuery(t._oAddAttachButton.getDomRef()).removeClass("sapUiBtnStdFocus")}).hover(function(){jQuery(t._oAddAttachButton.getDomRef()).addClass("sapUiBtnStdFocus")},function(){if(!this.hasFocus){jQuery(t._oAddAttachButton.getDomRef()).removeClass("sapUiBtnStdFocus")}jQuery(t._oAddAttachButton.getDomRef()).removeClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}).mousedown(function(){jQuery(t._oAddAttachButton.getDomRef()).addClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected").addClass("sapUiBtnAct")}).mouseup(function(){jQuery(t._oAddAttachButton.getDomRef()).removeClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")});jQuery(this._oFileUploader.oFileUpload).keydown(function(e){var a=jQuery.sap.KeyCodes;if(e.keyCode==a.TAB){if(e.shiftKey){t._oThumbDownButton.focus()}else{t._oTitle.focus()}e.preventDefault();e.stopPropagation()}})};sap.suite.ui.commons.NoteTakerFeeder.prototype._setAriaInfo=function(){jQuery.sap.byId(this._oThumbUpButton.getId()).attr("aria-pressed",this.getThumbUp());jQuery.sap.byId(this._oThumbDownButton.getId()).attr("aria-pressed",this.getThumbDown());jQuery.sap.byId(this._oTitle.getId()).attr("aria-label",this._rb.getText("NOTETAKERFEEDER_PLACEHOLDER_HEADER"));jQuery.sap.byId(this._oBody.getId()).attr("aria-label",this._rb.getText("NOTETAKERFEEDER_PLACEHOLDER_BODY"));jQuery(this._oFileUploader.oFileUpload).attr("aria-label",this._rb.getText("NOTETAKERFEEDER_PLACEHOLDER_BODY"))};sap.suite.ui.commons.NoteTakerFeeder.prototype.onAfterRendering=function(){this._applyPlaceholder();this._adjustPopupState();if(this._oFileUploader.getValue()){jQuery.sap.byId(this.getId()+"-attachment-panel").show();jQuery.sap.byId(this.getId()+"-attachment-loading").hide();jQuery.sap.byId(this.getId()+"-attachment-delete").show()}jQuery.sap.byId(this._oFileUploader.getId()).addClass("sapSuiteUiCommonsNtfUploader");this._setAriaInfo();if(jQuery.browser.msie){this._adjustUploaderForIe()}};sap.suite.ui.commons.NoteTakerFeeder.prototype.onBeforeRendering=function(){this._setAddButtonEnabled(this.getBody(),true);this._setThumbButtonsView()};sap.suite.ui.commons.NoteTakerFeeder.prototype.getFormattedTags=function(){return sap.suite.ui.commons.NoteTakerCard.prototype._getFormattedTags()};sap.suite.ui.commons.NoteTakerFeeder.prototype._adjustPopupState=function(){if(this._bTagPopupOpen){jQuery.sap.byId(this.getId()+"-selectTag-panel").show()}};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleAddTag=function(t){this._selectedTags=[];var n=t.split(new RegExp("\\s+"));var T={};for(var i=0;i<n.length;i++){if(n[i].length!=0){T[n[i]]=0}}for(var f in T){this._selectedTags.push(f)}if(this._oTagButton){this._adjustTagButton()}};sap.suite.ui.commons.NoteTakerFeeder.prototype._adjustTagButton=function(){if(this._selectedTags.length){this._oTagButton.setTooltip(this._rb.getText("NOTETAKERFEEDER_BUTTON_ADD_TAGS_SELECTED_TOOLTIP")+": "+this._selectedTags.join(" "));this._oTagButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}else{this._oTagButton.setTooltip(this._rb.getText("NOTETAKERFEEDER_BUTTON_TAG_TOOLTIP"));this._oTagButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleClearTag=function(){if(this._oTagInput){this._oTagInput.setValue("")}if(this._oTagList){this._oTagList.clearSelection()}this._selectedTags=[];if(this._oTagButton){this._adjustTagButton()}};sap.suite.ui.commons.NoteTakerFeeder.prototype.setTags=function(t){this.setProperty("tags",t,true)};sap.suite.ui.commons.NoteTakerFeeder.prototype._toggleTagPopup=function(){if(this._bTagPopupOpen){jQuery.sap.byId(this.getId()+"-selectTag-panel").slideToggle();this._focusDefaultControl();this._bTagPopupOpen=false}else{this._addTagsToListBox(this.getTags());jQuery.sap.byId(this.getId()+"-selectTag-panel").slideToggle();jQuery.sap.byId(this.getId()+"-inputTag").val(this._selectedTags.length==0?"":this._selectedTags.join(" ")+" ");this._oTagInput.focus();this._bTagPopupOpen=true}};sap.suite.ui.commons.NoteTakerFeeder.prototype._focusDefaultControl=function(){this._oTagButton.focus()};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleTagInputLive=function(e){var l=e.getParameter("liveValue");var n=l.split(" ");var c=n[n.length-1];this._filterListBox(c)};sap.suite.ui.commons.NoteTakerFeeder.prototype._filterListBox=function(i){if(i.length==0){this._addTagsToListBox(this.getTags());return}var f=jQuery.grep(this.getTags(),function(a){if(a.indexOf(i)>=0){return true}});this._addTagsToListBox(f)};sap.suite.ui.commons.NoteTakerFeeder.prototype._addTagsToListBox=function(t){var l=jQuery.map(t,function(v,i){return new sap.ui.core.ListItem({text:v})});this._oTagList.setItems(l,true);this._oTagList.rerender()};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleListSelect=function(e){var s=e.getParameter("selectedItem").getText();var t=this._oTagInput.getValue();var n=t.split(" ");n.pop();if(n.length==0){this._oTagInput.setValue(s+" ")}else{this._oTagInput.setValue(n.join(" ")+" "+s+" ")}this._oTagList.setSelectedIndex(-1);this._oTagInput.focus()};sap.suite.ui.commons.NoteTakerFeeder.prototype._setThumbButtonsView=function(){if(this.getThumbUp()){this._oThumbUpButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}else{this._oThumbUpButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}if(this.getThumbDown()){this._oThumbDownButton.addStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}else{this._oThumbDownButton.removeStyleClass("sapSuiteUiCommonsNoteTakerFeederButtonSelected")}};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleThumbUpButtonPress=function(){this.setThumbUp(!this.getThumbUp());if(this.getThumbUp()){this.setThumbDown(false)}};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleThumbDownButtonPress=function(){this.setThumbDown(!this.getThumbDown());if(this.getThumbDown()){this.setThumbUp(false)}};sap.suite.ui.commons.NoteTakerFeeder.prototype._disableAddAttachBtn=function(){this._oAddAttachButton.setEnabled(false);this._oAddAttachButton.removeStyleClass("sapSuiteUiCommonsNtAttachIcon");this._oAddAttachButton.addStyleClass("sapSuiteUiCommonsNtDsblAttachIcon");this._oAddAttachButton.setTooltip("");this._oAddAttachButton.rerender()};sap.suite.ui.commons.NoteTakerFeeder.prototype._enableAddAttachBtn=function(){this._oAddAttachButton.setEnabled(true);this._oAddAttachButton.removeStyleClass("sapSuiteUiCommonsNtDsblAttachIcon");this._oAddAttachButton.addStyleClass("sapSuiteUiCommonsNtAttachIcon");this._oAddAttachButton.setTooltip(this._rb.getText("NOTETAKER_BUTTON_ATTACH_TOOLTIP"));this._oAddAttachButton.rerender();if(jQuery.browser.msie){jQuery.sap.byId(this._oAddAttachButton.getId()).attr("tabindex","-1")}};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleAddAttachUI=function(){jQuery(this._oFileUploader.oFileUpload).hide();jQuery.sap.byId(this.getId()+"-attachment-loading").show("fast");jQuery.sap.byId(this.getId()+"-body").animate({height:"332px",},300);jQuery.sap.byId(this.getId()+"-attachment-panel").slideDown({duration:300,queue:false})};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleDeleteAttachUI=function(){jQuery(this._oFileUploader.oFileUpload).show();jQuery.sap.byId(this.getId()+"-body").animate({height:"352px",},300);jQuery.sap.byId(this.getId()+"-attachment-delete").hide("fast");jQuery.sap.byId(this.getId()+"-attachment-panel").hide({duration:300,queue:false});this._enableAddAttachBtn();this._oFileUploader.setValue("");this._oAttachmentLink.setText("");if(jQuery.browser.msie){jQuery(this._oFileUploader.oFileUpload).focus()}else{this._oAddAttachButton.focus()}};sap.suite.ui.commons.NoteTakerFeeder.prototype.handleUploadResponse=function(r){};sap.suite.ui.commons.NoteTakerFeeder.prototype._handleUploadComplete=function(e){jQuery.sap.byId(this.getId()+"-attachment-loading").hide("fast");jQuery.sap.byId(this.getId()+"-attachment-delete").show("fast");var a={response:e.getParameter("response")};this.fireAttachmentUploadComplete(a)};sap.suite.ui.commons.NoteTakerFeeder.prototype.setAttachmentUploadUrl=function(u){this._oFileUploader.setUploadUrl(u)};sap.suite.ui.commons.NoteTakerFeeder.prototype.getAttachmentUploadUrl=function(){return this._oFileUploader.getUploadUrl()}};if(!jQuery.sap.isDeclared('sap.suite.ui.commons.SplitButton')){jQuery.sap.declare("sap.suite.ui.commons.SplitButton");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.suite.ui.commons.SplitButton",{metadata:{library:"sap.suite.ui.commons",properties:{"visible":{type:"boolean",group:"Misc",defaultValue:true},"enabled":{type:"boolean",group:"Behavior",defaultValue:true},"lite":{type:"boolean",group:"Appearance",defaultValue:false},"style":{type:"sap.ui.commons.ButtonStyle",group:"Appearance",defaultValue:sap.ui.commons.ButtonStyle.Default},"styled":{type:"boolean",group:"Appearance",defaultValue:true},"iconFirst":{type:"boolean",group:"Appearance",defaultValue:true},"text":{type:"string",group:"Appearance",defaultValue:''},"icon":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:''}},aggregations:{"menu":{type:"sap.ui.commons.Menu",multiple:false}}}});jQuery.sap.require('sap.ui.commons.Button');jQuery.sap.require('sap.ui.commons.MenuButton');jQuery.sap.require('sap.ui.commons.MenuItem');(function(){function e(M,o){if(!o||!M||M.getItems().length===0){return false}if(M.indexOfItem(o)>=0){return true}var I=M.getItems();var s=null;for(var i=0;i<I.length;i++){s=I[i].getSubmenu();if(e(s,o)){return true}}return false}function m(s){return function(){sap.ui.commons.MenuItem.prototype.setVisible.apply(s._oMenuItem,arguments);if(!s._oMenuItem.getVisible()){s.setMenu(s._oMenuButton.getMenu())}return s._oMenuItem}}function a(s){return function(){sap.ui.commons.MenuItem.prototype.setIcon.apply(s._oMenuItem,arguments);if(!s.getIcon()){s._oDefaultActionButton.setIcon(s._oMenuItem.getIcon())}return s._oMenuItem}}function b(s){return function(){sap.ui.commons.MenuItem.prototype.setTooltip.apply(s._oMenuItem,arguments);s._oDefaultActionButton.setTooltip(s._oMenuItem.getTooltip());return s._oMenuItem}}var c=function(s){return function(){sap.ui.commons.MenuItem.prototype.setText.apply(s._oMenuItem,arguments);if(!s.getText()){s._oDefaultActionButton.setText(s._oMenuItem.getText())}return s._oMenuItem}};var d=function(s){return function(){sap.ui.commons.MenuItem.prototype.setEnabled.apply(s._oMenuItem,arguments);if(s.getEnabled()){s._oDefaultActionButton.setEnabled(s._oMenuItem.getEnabled())}return s._oMenuItem}};sap.suite.ui.commons.SplitButton.prototype.init=function(){this._oDefaultActionButton=new sap.ui.commons.Button(this.getId()+"-defaultActionButton");var t=this;this._oDefaultActionButton.attachPress(function(){if(t._oMenuItem){t._oMenuItem.fireSelect()}});this._oMenuButton=new sap.ui.commons.MenuButton(this.getId()+"-menuButton");this._oMenuButton.addStyleClass("sapSuiteUiCommonsSplitButton-menuButton");if(this.getMenu()){this._oMenuButton.setMenu(this.getMenu())}};sap.suite.ui.commons.SplitButton.prototype.exit=function(){this.destroyAggregation("menu",true);this._oDefaultActionButton.destroy();this._oDefaultActionButton=null;this._oMenuButton.destroy();this._oMenuButton=null};sap.suite.ui.commons.SplitButton.prototype.setMenu=function(M,o){var t=this;this._oMenuButton.setMenu(M);if(e(M,o)&&o.getVisible()){this._oMenuItem=o}else{if(M&&M.getItems()){var f=M.getItems()[0];if(f&&f.getVisible()){this._oMenuItem=f}else{this._oMenuItem=null}}}if(this._oMenuItem){if(!this.getText()){this._oDefaultActionButton.setText(this._oMenuItem.getText()||null)}if(!this.getIcon()){this._oDefaultActionButton.setIcon(this._oMenuItem.getIcon()||null)}if(this.getEnabled()){this._oDefaultActionButton.setEnabled(this._oMenuItem.getEnabled())}this._oDefaultActionButton.setTooltip(this._oMenuItem.getTooltip()||null);this._oMenuItem.setTooltip=b(t);this._oMenuItem.setText=c(t);this._oMenuItem.setIcon=a(t);this._oMenuItem.setEnabled=d(t);this._oMenuItem.setVisible=m(t)}return this};sap.suite.ui.commons.SplitButton.prototype.getMenu=function(){return this._oMenuButton.getMenu()};sap.suite.ui.commons.SplitButton.prototype.destroyMenu=function(){this._oMenuButton.destroyMenu();return this};sap.suite.ui.commons.SplitButton.prototype.setEnabled=function(E){this._oDefaultActionButton.setEnabled(E);this._oMenuButton.setEnabled(E);this.setProperty("enabled",E)};sap.suite.ui.commons.SplitButton.prototype.setLite=function(l){this._oDefaultActionButton.setLite(l);this._oMenuButton.setLite(l);this.setProperty("lite",l)};sap.suite.ui.commons.SplitButton.prototype.setStyle=function(s){this._oDefaultActionButton.setStyle(s);this._oMenuButton.setStyle(s);this.setProperty("style",s)};sap.suite.ui.commons.SplitButton.prototype.setStyled=function(s){this._oDefaultActionButton.setStyled(s);this._oMenuButton.setStyled(s);this.setProperty("styled",s)};sap.suite.ui.commons.SplitButton.prototype.setIconFirst=function(i){this._oDefaultActionButton.setIconFirst(i);this.setProperty("iconFirst",i)};sap.suite.ui.commons.SplitButton.prototype.setIcon=function(i){this._oDefaultActionButton.setIcon(i);this.setProperty("icon",i)};sap.suite.ui.commons.SplitButton.prototype.setText=function(t){this._oDefaultActionButton.setText(t);this.setProperty("text",t)}}())};
