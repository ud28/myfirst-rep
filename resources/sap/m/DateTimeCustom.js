/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
(function($){var o,D,c=sap.ui.getCore(),l=sap.m.getLocale(),L=l.getLanguage(),a=sap.m.getLocaleData(),r=c.getLibraryResourceBundle("sap.m"),_=function(T){return r.getText("MOBISCROLL_"+T)},b="(?=([^']*'[^']*')*[^']*$)",j="sap.ui.thirdparty.mobiscroll.js.",C=$.sap.getModulePath("sap.ui.thirdparty.mobiscroll","/css/"),s={endYear:new Date().getFullYear()+10,lang:L},f={setText:_("SET"),cancelText:_("CANCEL"),monthText:_("MONTH"),dayText:_("DAY"),yearText:_("YEAR"),hourText:_("HOURS"),minuteText:_("MINUTES"),secText:_("SECONDS"),nowText:_("NOW"),dayNames:a.getDays("wide"),dayNamesShort:a.getDays("abbreviated"),monthNames:a.getMonths("wide"),monthNamesShort:a.getMonths("abbreviated")},t=sap.ui.core.theming.Parameters.get();$.sap.includeStyleSheet(C+"mobiscroll-core.css");$.sap.require(j+"mobiscroll-core");$.sap.require(j+"mobiscroll-datetime");D=$("<input>").scroller({}).scroller("getInst").settings;if(t["sapMPlatformDependent"]!="true"){var g=["phone","tablet","desktop"].filter(function(d){return $.device.is[d]})[0],u=function(d){if(!d){return""}return d.charAt(0).toUpperCase()+d.substr(1)},h=function(k,d,p){var v=t["sapUiDTICustom"+u(p)+u(k)];if(v){if(d=="bool"){s[k]=(v.toLowerCase()=="true"?true:false)}else if(d=="int"){v=parseInt(v,10);!isNaN(v)&&(s[k]=v)}else{s[k]=v}}if(!p&&g){h(k,d,g)}};s.mode="mixed";s.display="modal";s.theme="sapMDTICustom";h("mode");h("display");h("animate");h("rows","int");h("width","int");h("height","int");h("showLabel","bool");h("headerText","bool");if(s.headerText){s.headerText="{value}"}$.sap.require("sap.ui.core.IconPool");sap.ui.core.IconPool.insertFontFaceStyle()}else if($.os.ios){o="ios";s.display="bubble"}else if($.os.android){o="android-ics";if($.os.fVersion==2.3){s.mode="clickpick";s.rows=3}else if($.os.fVersion==3.2){s.mode="scroller"}}else if($.browser.msie){o="wp"}$.scroller.i18n[L]=$.extend(f);if(o){s.theme=($.os.android)?o+" light":o;$.sap.includeStyleSheet(C+"mobiscroll-"+o+".css");$.sap.require(j+"mobiscroll-"+o);s=$.extend({},$.mobiscroll.themes[s.theme].defaults,s)}$.sap.require("sap.m.InstanceManager");$.extend(sap.m.DateTimeInput.prototype,{close:function(){this._$input.scroller("hide")},_setScrollerHeader:function(v){try{var d=this._$input.scroller("getInst").settings,F=!this.getType().indexOf("Date")?d.dateFormat:d.timeFormat,i=$.mobiscroll.parseDate(F,v);return sap.ui.core.format.DateFormat.getDateInstance({pattern:this.getDisplayFormat()}).format(i)}catch(e){return v}},_autoClose:function(e){if(this.getDomRef().contains(e.target)){e.stopPropagation();e.preventDefault();return}if(!document.querySelector(".sapMDTICustom .dwwr").contains(e.target)){this._$input.scroller("hide")}},_centralizeOnScroll:function(d){var e=d.find(".dw"),i=e.outerHeight(true),k=e.outerWidth(true),w=document.documentElement.clientHeight,m=document.documentElement.clientWidth,n=d.find(".dw-persp");if(n.height()>w){n.height(w);d.find(".dw-arrw-i").css("display","none");e.css({top:Math.max((w-i)/2,0),left:Math.max((m-k)/2,0)})}},_restrictMaxWidth:function(d){d[0].querySelector(".dwwr").style.maxWidth=(document.documentElement.clientWidth-22)+"px"},_handleResize:function(e){this._restrictMaxWidth(e.data.$dialog)},_getScrollerConfig:function(){var d=this,T=this.getType(),F=this.getDisplayFormat(),A=$.proxy(this._autoClose,this),H=$.proxy(this._handleResize,this),e=$.extend({},s,{preset:T.toLowerCase(),onShow:function(i){sap.m.InstanceManager.addDialogInstance(d);$(window).on("resize.sapMDTICustom",{$dialog:i},H);if(s.display=="bubble"){d._centralizeOnScroll(i);document.addEventListener($.support.touch?"touchstart":"mousedown",A,true)}},onClose:function(){sap.m.InstanceManager.removeDialogInstance(d);$(window).off("resize.sapMDTICustom",H);if(s.display=="bubble"){document.removeEventListener($.support.touch?"touchstart":"mousedown",A,true)}},onMarkupReady:function(i,k){d._restrictMaxWidth(i);if(s.headerText!==false){i.addClass("sapMDTICustomHdr")}}});if(T=="Date"){F=this._convertDatePattern(F);$.extend(e,{dateFormat:F,dateOrder:this._getLongDatePattern(F.replace(/'.*?'/g,"")).replace(/[^ymd ]/ig,""),})}else if(T=="Time"){F=this._convertTimePattern(F);$.extend(e,{timeFormat:F,timeWheels:F.replace(/'.*?'/g,"").replace(/[^hisa]/ig,"")})}else if(T=="DateTime"){F=this._convertDatePattern(this._convertTimePattern(F));$.extend(e,{dateFormat:F,dateOrder:this._getLongDatePattern(F.replace(/'.*?'/g,"")).replace(/[^ymd ]/ig,""),rows:this._getRowForDateTime(),timeWheels:F,timeFormat:"",separator:""})}if(/[^ymdhisa\W]/i.test(F)){this._reformat=true;if(s.headerText!==false){e.headerText=$.proxy(this._setScrollerHeader,this)}}else{this._reformat=false}return e},_getRowForDateTime:function(){var d=s.rows||D.rows;if(!d||d<=3){return 3}return Math.min(window.innerWidth,window.innerHeight)<360?3:d},_rgxYear:new RegExp("y+"+b,"ig"),_rgxMonth:new RegExp("m+"+b,"ig"),_rgxDay:new RegExp("d+"+b,"g"),_rgxMinute:new RegExp("m"+b,"g"),_rgxAmPm:new RegExp("a"+b,"g"),_rgxDayOfWeekLong:new RegExp("EEEE"+b,"g"),_rgxDayOfWeekShort:new RegExp("E+"+b,"g"),_getLongDatePattern:function(p){p=(p||this.getDisplayFormat()).replace(this._rgxYear,"YY");if(o=="wp"){return p.replace(this._rgxMonth,"mm MM").replace(this._rgxDay,"dd DD")}return p.replace(this._rgxMonth,"MM").replace(this._rgxDay,"dd")},_convertTimePattern:function(p){p=p||this.getDisplayFormat();return p.replace(this._rgxMinute,"i").replace(this._rgxAmPm,"A")},_convertDatePattern:function(p){p=p||this.getDisplayFormat();var i=p.indexOf('M'),I=p.lastIndexOf('M'),F=p,n;if(i==-1){i=p.indexOf('L');I=p.lastIndexOf('L')}if(i>-1){switch(I-i){case 0:n='m';break;case 1:n='mm';break;case 2:n='M';break;case 5:n='m';break;default:n='MM';break}F=p.substring(0,i)+n+p.substring(I+1)}var N;i=F.indexOf('y');if(i>-1){I=F.lastIndexOf('y');if(I-i==1){N='y'}else{N='yy'}var F=F.substring(0,i)+N+F.substring(I+1)}var d;i=F.indexOf('D');if(i>-1){I=F.lastIndexOf('D');if(I-i==1){d='o'}else{d='oo'}var F=F.substring(0,i)+d+F.substring(I+1)}F=F.replace(this._rgxDayOfWeekLong,"DD").replace(this._rgxDayOfWeekShort,"D");return F}})})(jQuery);
